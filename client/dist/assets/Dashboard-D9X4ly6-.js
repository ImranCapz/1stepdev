import{r as i,c as ke,b as le,a as I,j as e,d as ae,L as ce,R as Ve,p as Ot,s as Ft,e as Se,g as $t,h as Ye,_ as Z,i as Oe,k as Fe,m as We,T as y,S as ut,n as mt,o as ft,q as ht,t as Ge,v as Ke,w as ne,x as Lt,y as Et,G as ze,z as ve,P as N,A as Rt,B as xt,C as pt,D as Bt,E as gt,F as vt,H as It,I as jt,J as Ut,K as zt}from"./index-Dyny9bk8.js";import{H as Je}from"./index-BFDlpRUR.js";import{M as Ze,a as Qe,b as bt,c as Ht,d as qt,e as Vt}from"./index-CTvxjjuv.js";import{I as Xe,a as et}from"./index-CuLErsBB.js";import Yt from"./Profile-C1Kml7ad.js";import{_ as He,I as tt,C as Wt}from"./CreateProvider--aRwgjXu.js";import{F as yt,a as Nt,C as wt,b as Gt}from"./react-content-loader.es-BryCY_bG.js";import{c as Kt,a as $e}from"./animation-BL6VsgIS.js";import{l as St}from"./index-CGwCSIWv.js";import{P as Dt}from"./index-DI5VWlZq.js";import"./index.esm2017-D3fs5DlB.js";import"./state-AChJtTv_.js";var De=function(){return De=Object.assign||function(t){for(var s,r=1,a=arguments.length;r<a;r++){s=arguments[r];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(t[l]=s[l])}return t},De.apply(this,arguments)},Jt=function(t,s){var r={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,a=Object.getOwnPropertySymbols(t);l<a.length;l++)s.indexOf(a[l])<0&&Object.prototype.propertyIsEnumerable.call(t,a[l])&&(r[a[l]]=t[a[l]]);return r},Zt=Kt("BeatLoader","50% {transform: scale(0.75);opacity: 0.2} 100% {transform: scale(1);opacity: 1}","beat");function Qt(t){var s=t.loading,r=s===void 0?!0:s,a=t.color,l=a===void 0?"#000000":a,n=t.speedMultiplier,d=n===void 0?1:n,f=t.cssOverride,u=f===void 0?{}:f,h=t.size,w=h===void 0?15:h,v=t.margin,D=v===void 0?2:v,T=Jt(t,["loading","color","speedMultiplier","cssOverride","size","margin"]),_=De({display:"inherit"},u),L=function(A){return{display:"inline-block",backgroundColor:l,width:$e(w),height:$e(w),margin:$e(D),borderRadius:"100%",animation:"".concat(Zt," ").concat(.7/d,"s ").concat(A%2?"0s":"".concat(.35/d,"s")," infinite linear"),animationFillMode:"both"}};return r?i.createElement("span",De({style:_},T),i.createElement("span",{style:L(1)}),i.createElement("span",{style:L(2)}),i.createElement("span",{style:L(3)})):null}function Xt(){const t=ke(),[s,r]=i.useState(""),[a,l]=i.useState("dashboard"),n=le();I(u=>u.user),i.useEffect(()=>{const h=new URLSearchParams(t.search).get("tab");h&&r(h)},[t.search]);const d=async()=>{try{const u=await fetch("/server/auth/signout",{method:"GET"}),h=await u.json();u.ok?(n(Ot()),n(Ft())):console.log(h.message)}catch(u){console.log(u.message)}},f=[{name:"Dashboard",icon:Ve,link:"/dashboard?tab=dashboard"},{name:"Providers",icon:Ze,link:"/dashboard?tab=providers"},{name:"Messages",icon:Xe,link:"/dashboard?tab=messages"},{name:"Profile",icon:Qe,link:"/dashboard?tab=profile"},{name:"Sign Out",icon:Je,link:"/"}];return e.jsxs("div",{children:[e.jsx(ae,{className:"w-full hidden md:flex",children:e.jsx(ae.Items,{children:e.jsxs(ae.ItemGroup,{className:"flex flex-row gap-2 items-center",children:[e.jsx(ce,{to:"/dashboard?tab=dashboard",children:e.jsx(ae.Item,{active:s==="dashboard",className:"mt-2",icon:Ve,labelColor:"light",as:"div",children:"Dashboard"})}),e.jsx(ce,{to:"/dashboard?tab=providers",children:e.jsx(ae.Item,{active:s==="providers",icon:Ze,labelColor:"light",as:"div",children:"Providers"})}),e.jsx(ce,{to:"/dashboard?tab=messages",children:e.jsx(ae.Item,{active:s==="messages",icon:Xe,labelColor:"light",as:"div",children:"Message"})}),e.jsx(ce,{to:"/dashboard?tab=profile",children:e.jsx(ae.Item,{active:s==="profile",icon:Qe,labelColor:"light",as:"div",children:"Profile"})}),e.jsx(ae.Item,{icon:Je,className:"cursor-pointer",onClick:d,children:"Sign Out"})]})})}),e.jsx("div",{className:"flex h-20 w-full fixed bottom-0 bg-slate-200 md:hidden z-10",children:e.jsx("div",{className:"flex flex-row items-center justify-around w-full",children:f.map((u,h)=>e.jsx("div",{children:e.jsx(ce,{to:u.link,children:e.jsx("div",{className:`text-2xl ${a===u.name?"provideritem-name -translate-y-2 transition-all duration-500":"text-gray-500"}`,onClick:()=>l(u.name),children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("p",{children:u.icon()}),e.jsx("p",{className:"text-xs",children:u.name})]})})})},h))})})]})}function es(){return e.jsx("div",{children:"Overview Component"})}function ts(){var V,M,U,Y,F,W,H,q,G,Q,te,c,j,C,o,g;const{currentUser:t,error:s}=I(m=>m.user),r=le(),[a,l]=i.useState(!1),[n,d]=i.useState(!1),f=i.useRef(null),[u,h]=i.useState(),[w,v]=i.useState(),[D,T]=i.useState(!1),[_,L]=i.useState(!0),[A,E]=i.useState(!0),[p,R]=i.useState({isParent:!1,parentDetails:{fullName:"",lookingFor:[],childName:"",dob:"",gender:"",height:"",weight:"",bloodGroup:"",medicalHistory:"",allergies:"",emergencyContact:w,insurance:"",address:"",phoneNumber:u}}),k=m=>{let x=m.target.value;m.target.id==="phoneNumber"&&(x.length!==10?L(!1):L(!0)),m.target.id==="isParent"?(x=m.target.value==="Yes",R({...p,isParent:x})):R({...p,parentDetails:{...p.parentDetails,[m.target.id]:x}}),T(!0)},z=async m=>{var x,S;if(m.preventDefault(),!!D){if(((x=p.parentDetails)==null?void 0:x.phoneNumber.length)!==13){Z.error("Phone number should be 10 digits"),L(!1);return}else L(!0);if(((S=p.parentDetails)==null?void 0:S.emergencyContact.length)!==13){Z.error("Emergency Contact should be 10 digits"),E(!1);return}else E(!0);r(Oe());try{f.current.continuousStart(50),r(Oe()),d(!0);const P=await(await fetch(`server/parent/updateparent/${t._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)})).json();if(P.success===!1){r(Fe(P));return}r(We(P)),p.isParent?Z.success("Parent details updated successfully"):Z.error("Parent Details Successfully Removed"),d(!1)}catch(b){r(Fe(b))}finally{f.current.complete()}}};return i.useEffect(()=>{(async()=>{var x,S,b,P,O,$,K,X,se,re,J,he,de,oe,qe;r(Oe()),l(!0);try{const B=await(await fetch(`server/parent/getparent/${t._id}`)).json();if(B.success===!1)return;const At={isParent:B.isParent||!1,lookingFor:((x=B.parentDetails)==null?void 0:x.lookingFor)||[],childName:((S=B.parentDetails)==null?void 0:S.childName)||"",fullName:((b=B.parentDetails)==null?void 0:b.fullName)||"",dob:(P=B.parentDetails)!=null&&P.dob?new Date((O=B.parentDetails)==null?void 0:O.dob).toISOString().split("T")[0]:"",gender:(($=B.parentDetails)==null?void 0:$.gender)||"",height:((K=B.parentDetails)==null?void 0:K.height)||"",weight:((X=B.parentDetails)==null?void 0:X.weight)||"",bloodGroup:((se=B.parentDetails)==null?void 0:se.bloodGroup)||"",medicalHistory:((re=B.parentDetails)==null?void 0:re.medicalHistory)||"",allergies:((J=B.parentDetails)==null?void 0:J.allergies)||"",emergencyContact:((he=B.parentDetails)==null?void 0:he.emergencyContact)||"",insurance:((de=B.parentDetails)==null?void 0:de.insurance)||"",address:((oe=B.parentDetails)==null?void 0:oe.address)||"",phoneNumber:((qe=B.parentDetails)==null?void 0:qe.phoneNumber)||""};R({isParent:B.isParent||!1,parentDetails:At}),r(We(B))}catch(Ae){console.log(Ae),r(Fe(Ae))}l(!1)})()},[t._id,r]),e.jsxs("div",{className:"p-3 flex-col items-center rounded-lg",children:[e.jsx(Se,{ref:f,color:"#ff9900",height:3}),a?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e.jsx(He,{color:"#10ebd8",loading:a,size:15})}):e.jsxs("form",{onSubmit:z,className:"p-4 flex flex-col sm:flex-row md:gap-4 gap-4 w-[1200px] mx-auto justify-center",children:[e.jsxs("div",{className:"flex flex-col flex-1 gap-2",children:[e.jsx("label",{htmlFor:"isParent",className:"text-sm font-semibold text-main",children:"Are you a parent?"}),e.jsxs("select",{id:"isParent",name:"isParent",value:p.isParent?"Yes":"No",onChange:k,className:"input border-2 p-2 rounded-lg focus:ring-0",required:!0,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"Yes",children:"Yes"}),e.jsx("option",{value:"No",children:"No"})]}),e.jsx("label",{htmlFor:"gender",className:"text-sm font-semibold text-main",children:"Gender:"}),e.jsxs("select",{id:"gender",name:"gender",value:(V=p.parentDetails)==null?void 0:V.gender,onChange:k,className:"input border-2 p-2 rounded-lg  focus:outline-none focus:ring-0",required:!0,children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]}),e.jsx("label",{className:"text-sm font-semibold text-main",children:"BloodGroup*"}),e.jsx("input",{type:"text",placeholder:"BloodGroup",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0",id:"bloodGroup",required:!0,onChange:k,value:(M=p.parentDetails)==null?void 0:M.bloodGroup}),e.jsx("label",{htmlFor:"gender",className:"text-sm font-semibold text-main",children:e.jsxs("p",{className:"flex flex-row items-center",children:[!A&&e.jsx(et,{className:"text-red-700 text-sm"}),"Emergency Contact :"," "]})}),e.jsx(tt,{placeholder:"Emergency Contact",className:`border-2 p-2 input rounded-lg focus:outline-none focus:ring-0 ${_?"":"error"}`,value:(U=p.parentDetails)==null?void 0:U.emergencyContact,onChange:m=>{v(m),R({...p,parentDetails:{...p.parentDetails,emergencyContact:m}}),T(!0)},required:!0}),!A&&e.jsx("p",{className:"text-sm text-red-500 font-semibold",children:"Please enter a 10-digit number"}),e.jsx("label",{htmlFor:"gender",className:"text-sm font-semibold text-main",children:"Address : (city, state, pincode)"}),e.jsx("textarea",{type:"text",placeholder:"Address",className:"border-2 p-2 rounded-lg input focus:outline-none focus:ring-0",id:"address",required:!0,onChange:k,value:(Y=p.parentDetails)==null?void 0:Y.address})]}),e.jsxs("div",{className:"flex flex-col flex-1 gap-2 w-full",children:[e.jsx("label",{name:"fullName",className:"text-sm font-semibold text-main",children:"Enter your Full Name :"}),e.jsx("input",{type:"text",placeholder:"Full Name",className:"input border-2 p-2 rounded-lg focus:ring-0",id:"fullName",maxLength:"62",minLength:"5",required:!0,onChange:k,value:(F=p.parentDetails)==null?void 0:F.fullName}),e.jsx("label",{name:"fullName",className:"text-sm font-semibold text-main",children:"Enter your DOB :"}),e.jsx("input",{type:"date",placeholder:"Date of Birth",className:"input border-2 p-2 rounded-lg  focus:ring-0",id:"dob",required:!0,onChange:k,value:(W=p.parentDetails)==null?void 0:W.dob}),e.jsx("label",{className:"text-sm font-semibold text-main",children:"Height*"}),e.jsx("input",{type:"text",placeholder:"Height",className:"input border-2 p-2 rounded-lg  focus:outline-none focus:ring-0",id:"height",required:!0,onChange:k,value:(H=p.parentDetails)==null?void 0:H.height}),e.jsx("label",{className:"text-sm font-semibold text-main",children:"Medical History*"}),e.jsx("input",{type:"text",placeholder:"Medical History",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0",id:"medicalHistory",required:!0,onChange:k,value:(q=p.parentDetails)==null?void 0:q.medicalHistory}),e.jsx("label",{htmlFor:"gender",className:"text-sm font-semibold text-main",children:"Insurance :"}),e.jsx("input",{type:"text",placeholder:"Insurance",className:"border-2 p-2 rounded-lg input focus:outline-none focus:ring-0",id:"insurance",required:!0,onChange:k,value:(G=p.parentDetails)==null?void 0:G.insurance})]}),e.jsxs("div",{className:"flex flex-col flex-1 gap-2 w-full",children:[e.jsx("label",{name:"fullName",className:"text-sm font-semibold text-main",children:"What therapy your looking for?"}),e.jsx($t,{id:"name",options:Ye,isMulti:!0,required:!0,placeholder:"looking for?",touchUi:!1,className:"border-2 rounded-lg border-slate-300 bg-white input hover:border-purple-400",defaultValue:Array.isArray((Q=p.parentDetails)==null?void 0:Q.lookingFor)?(te=p.parentDetails)==null?void 0:te.lookingFor.map(m=>Ye.find(x=>x.value===m)):[],onChange:m=>{R(x=>({...x,parentDetails:{...x.parentDetails,lookingFor:m.map(S=>S.value)}})),T(!0)},styles:{control:m=>({...m,backgroundColor:"transparent",minWidth:"160px",border:"none",outline:"none",boxShadow:"none",transition:"all 0.3s ease"})}},(c=p.parentDetails)==null?void 0:c.lookingFor),e.jsx("label",{className:"text-sm font-semibold text-main",children:"Child Name*"}),e.jsx("input",{type:"text",placeholder:"Child Name",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0 ",id:"childName",required:!0,onChange:k,value:(j=p.parentDetails)==null?void 0:j.childName}),e.jsx("label",{className:"text-sm font-semibold text-main",children:"Weight*"}),e.jsx("input",{type:"text",placeholder:"Weight",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0 ",id:"weight",required:!0,onChange:k,value:(C=p.parentDetails)==null?void 0:C.weight}),e.jsx("label",{className:"text-sm font-semibold text-main",children:"Allergies :"}),e.jsx("input",{type:"text",placeholder:"Allergies",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0",id:"allergies",required:!0,onChange:k,value:(o=p.parentDetails)==null?void 0:o.allergies}),e.jsx("label",{className:"text-sm font-semibold text-main",children:e.jsxs("p",{className:"flex flex-row items-center",children:[!_&&e.jsx(et,{className:"text-red-700 text-sm"}),"Phone Number :"," "]})}),e.jsx(tt,{placeholder:"Enter phone number",className:`border-2 p-2 input rounded-lg focus:outline-none focus:ring-0 ${_?"":"error"}`,value:(g=p.parentDetails)==null?void 0:g.phoneNumber,onChange:m=>{h(m),R({...p,parentDetails:{...p.parentDetails,phoneNumber:m}}),T(!0)},required:!0}),!_&&e.jsx("p",{className:"text-sm text-red-500 font-semibold",children:"Please enter a 10-digit number"}),e.jsx("button",{disabled:!D||a,className:"p-2 btn-color rounded-lg mt-8 font-semibold rounded=lg uppercase hover:opacity-95 disabled:opacity-60 transition ease-in-out duration-300",children:n?"Saving...":"Save"}),s&&e.jsx("p",{className:"text-red-700 text-xs",children:s})]})]})]})}function ss(){const[t,s]=i.useState([]),{currentUser:r}=I(n=>n.user),{loading:a}=I(n=>n.booking),l=le();return i.useEffect(()=>{(async()=>{const d=`/server/booking/getuserbookings/${r._id}`;console.log("Fetching bookings from URL:",d);try{l(mt());const f=await fetch(d);if(console.log("Response status:",f.status),!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const u=await f.json();l(ft(u)),console.log("Booking data:",u);const h=u.map(w=>({...w})).sort((w,v)=>new Date(v.updatedAt)-new Date(w.updatedAt));s(h)}catch(f){l(ht(f)),console.error("An error occurred while fetching booking details:",f)}})()},[r._id,l]),e.jsx(e.Fragment,{children:e.jsx("div",{className:`table-auto md:mx-auto p-3 scrollbar scrollbar-track-slate-100 scrollbar-thumb-slate-300 max-h-screen ${t&&t.length>0?"overflow-x-scroll":""}`,children:a?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"70vh"},children:e.jsx(Qt,{color:"#10ebd8",loading:a,size:15})}):t&&t.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"px-2 text-2xl text-gray font-bold mb-4",children:"Your Bookings :"}),e.jsxs(y,{hoverable:!0,className:"shadow-md w-full",children:[e.jsxs(y.Head,{children:[e.jsx(y.HeadCell,{children:"Provider Name"}),e.jsx(y.HeadCell,{children:"Services"}),e.jsx(y.HeadCell,{children:"Scheduled Time"}),e.jsx(y.HeadCell,{children:"Session Type"}),e.jsx(y.HeadCell,{children:"Note"}),e.jsx(y.HeadCell,{children:"Status"}),e.jsx(y.HeadCell,{children:"Process"})]}),t.map(n=>e.jsx(y.Body,{className:"divide-y",children:e.jsxs(y.Row,{className:"bg-white text-gray-600",children:[e.jsx(y.Cell,{children:n.providerDetails.fullName}),e.jsx(y.Cell,{children:n.service.join(", ")}),e.jsx(y.Cell,{children:new Date(n.scheduledTime).toLocaleDateString()}),e.jsx(y.Cell,{children:n.sessionType}),e.jsx(y.Cell,{children:n.note}),e.jsxs(y.Cell,{children:[n.status==="pending"?e.jsx("p",{className:"",children:e.jsx(bt,{})}):"",n.status==="approved"?e.jsx("p",{className:"",children:e.jsx(yt,{})}):"",n.status==="rejected"?e.jsx("p",{className:"justify-center items-center",children:e.jsx(Nt,{})}):""]}),e.jsx(y.Cell,{children:n.status})]})},n._id))]})]}):e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl text-gray font-bold mb-5 max-h-screen",children:"No Bookings Yet"}),e.jsx("div",{className:"flex flex-col mx-auto items-center",children:e.jsx(ut,{})})]})})})}function rs(){const[t,s]=i.useState("Profile setting"),{currentUser:r}=I(v=>v.user),[a,l]=i.useState(!1),n=ke(),d=le(),{bookings:f,hasApprovedBooking:u,lastSeenBookingId:h}=I(v=>v.booking),w=i.useMemo(()=>[{title:"Profile setting"},{title:"Parent Details"},{title:"Bookings"}],[]);return i.useEffect(()=>{t!=="Bookings"&&l(!1)},[t]),i.useEffect(()=>{if(Array.isArray(f)){const v=f.filter(D=>D.status==="approved");if(v.length>0){const D=v[v.length-1];D._id!==h&&(d(Ge(!0)),d(Ke(D._id)))}}},[f,d,h]),i.useEffect(()=>{const D=new URLSearchParams(n.search).get("tag");D&&w.find(_=>_.title===D)&&s(D)},[n.search,w]),e.jsxs("div",{className:"flex flex-col w-full transition-all duration-500 ",children:[e.jsx("nav",{className:"block border-b items-start",children:e.jsx("ul",{className:" flex items-center gap-x-3 max-w-screen-2xl mx-auto px-4 overflow-x-auto lg:px-8",children:w.map((v,D)=>e.jsx("li",{className:"py-1",children:e.jsx(ce,{to:`?tag=${v.title}`,className:`block py-2 px-3 rounded-lg md:text-base text-sm text-gray-700 hover:text-amber-500 hover:bg-amber-100 duration-150 ${t===v.title?"border-b-2 border-amber-500":""}`,onClick:()=>{if(v.title==="Bookings"){l(!1);const T=f.filter(_=>_.status==="approved");if(T.length>0){const _=T[T.length-1];d(Ke(_._id)),d(Ge(!1))}}},children:e.jsxs("span",{className:"flex flex-row items-center gap-1",children:[v.title,v.title==="Bookings"&&u&&e.jsx(Ht,{})]})})},D))})}),t==="Profile setting"&&e.jsx("div",{className:"w-full min-h-screen transition-all duration-500",children:e.jsx(Yt,{})}),t==="Parent Details"&&e.jsxs("div",{className:"p-2 items-center setting-bg",children:[e.jsxs("h1",{className:"flex flex-col p-3 font-bold md:text-2xl text-xl text-gray",children:[" ",r.isParent?"Your Parent Details :":"Fill the form for Parent Profile :"]}),e.jsx(ts,{})]}),t==="Bookings"&&e.jsxs("div",{className:"w-full p-2 setting-bg",children:[e.jsx("h1",{className:"flex flex-col font-bold text-2xl"}),e.jsx(ss,{})]})]})}function as(){const[t,s]=i.useState([]),[r,a]=i.useState({}),l=le(),{currentUser:n}=I(h=>h.user),d=i.useCallback(async h=>{const v=await(await fetch(`/server/booking/getbookings/${h}`)).json();if(v.success===!1)return;const D=v.sort((T,_)=>new Date(_.createdAt)-new Date(T.createdAt));s(D)},[]);i.useEffect(()=>{(async()=>{const v=await(await fetch(`/server/user/providers/${n._id}`)).json();v.success!==!1&&(a(v),v[0]&&d(v[0]._id))})()},[n._id,d]);const f=async h=>{l(Lt(h)).then(async()=>{Z.success("Appointment Approved",{position:"bottom-left"}),r[0]&&d(r[0]._id);const w=t.find(T=>T._id===h),D=await(await fetch("/server/booking/emailbookingAccept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:w.patientDetails.email,subject:"1Step Appointment Approved",providerName:r[0].fullName,service:w.service.join(", "),name:n.username,providerProfile:r[0].profilePicture,time:w.scheduledTime})})).json();if(D.success===!1){console.log("Email not sent");return}D.success===!0&&console.log("Email sent")})},u=async h=>{l(Et(h)).then(()=>{Z.error("Appointment Rejected",{position:"bottom-left"}),r[0]&&d(r[0]._id)})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"table-auto overflow-x-scroll md:mx-auto p-3 scrollbar scrollbar-track-slate-100 scrollbar-thumb-slate-300",children:t&&t.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl text-gray font-bold mb-5",children:"Your Appointments :"}),e.jsxs(y,{hoverable:!0,className:"shadow-md w-full",children:[e.jsxs(y.Head,{children:[e.jsx(y.HeadCell,{children:"Patient Name"}),e.jsx(y.HeadCell,{children:"Services they Need"}),e.jsx(y.HeadCell,{children:"Scheduled Time"}),e.jsx(y.HeadCell,{children:"Session Type"}),e.jsx(y.HeadCell,{children:"Note"}),e.jsx(y.HeadCell,{children:"Status"}),e.jsx(y.HeadCell,{children:"Action"})]}),t.map(h=>e.jsx(y.Body,{className:"divide-y",children:e.jsxs(y.Row,{className:"bg-white text-gray-600",children:[e.jsx(y.Cell,{children:h.patientDetails.username}),e.jsx(y.Cell,{children:h.service.join(", ")}),e.jsx(y.Cell,{children:h.scheduledTime}),e.jsx(y.Cell,{children:h.sessionType}),e.jsx(y.Cell,{children:h.note}),e.jsxs(y.Cell,{children:[h.status==="pending"?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(bt,{})}):"",h.status==="approved"?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(yt,{})}):"",h.status==="rejected"?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(Nt,{})}):""]}),e.jsx(y.Cell,{className:"flex flex-row gap-2",children:h.status==="approved"?e.jsxs(e.Fragment,{children:[e.jsx(ne.Button,{className:"bg-emerald-600",disabled:h.status==="approved",children:"Accepted"}),e.jsx(ne.Button,{className:"bg-red-500",onClick:()=>u(h._id),children:"Reject"})]}):h.status==="pending"?e.jsxs(e.Fragment,{children:[e.jsx(ne.Button,{className:"bg-emerald-600",onClick:()=>f(h._id),children:"Accept"}),e.jsx(ne.Button,{className:"bg-red-500",onClick:()=>u(h._id),disabled:h.status==="rejected",children:"Reject"})]}):h.status==="rejected"?e.jsxs(e.Fragment,{children:[e.jsx(ne.Button,{className:"bg-emerald-600",onClick:()=>f(h._id),children:"Accepted"}),e.jsx(ne.Button,{className:"bg-red-500",onClick:()=>u(h._id),disabled:h.status==="rejected",children:"Rejected"})]}):""})]})},h._id))]})]}):e.jsx("h1",{className:"text-2xl text-gray font-bold mb-5",children:"No Appointment Yet"})})})}function _t(t){return ze({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m21.426 11.095-17-8A.999.999 0 0 0 3.03 4.242L4.969 12 3.03 19.758a.998.998 0 0 0 1.396 1.147l17-8a1 1 0 0 0 0-1.81zM5.481 18.197l.839-3.357L12 12 6.32 9.16l-.839-3.357L18.651 12l-13.17 6.197z"},child:[]}]})(t)}var ns=["date","verboseDate","tooltip","children"];function Re(){return Re=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Re.apply(this,arguments)}function ls(t,s){if(t==null)return{};var r=os(t,s),a,l;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(l=0;l<n.length;l++)a=n[l],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function os(t,s){if(t==null)return{};var r={},a=Object.keys(t),l,n;for(n=0;n<a.length;n++)l=a[n],!(s.indexOf(l)>=0)&&(r[l]=t[l]);return r}function _e(t,s){var r=t.date,a=t.verboseDate,l=t.tooltip,n=t.children,d=ls(t,ns),f=i.useMemo(function(){return r.toISOString()},[r]);return ve.createElement("time",Re({ref:s},d,{dateTime:f,title:l?a:void 0}),n)}_e=ve.forwardRef(_e);_e.propTypes={date:N.instanceOf(Date).isRequired,verboseDate:N.string,tooltip:N.bool.isRequired,children:N.string.isRequired};function Be(t){"@babel/helpers - typeof";return Be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Be(t)}function is(t){if(Ct())return Intl.DateTimeFormat.supportedLocalesOf(t)[0]}function Ct(){var t=(typeof Intl>"u"?"undefined":Be(Intl))==="object";return t&&typeof Intl.DateTimeFormat=="function"}function Ce(t){"@babel/helpers - typeof";return Ce=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ce(t)}function cs(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function ds(t,s){for(var r=0;r<s.length;r++){var a=s[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function us(t,s,r){return s&&ds(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}var Pt=function(){function t(){cs(this,t),this.cache={}}return us(t,[{key:"get",value:function(){for(var r=this.cache,a=arguments.length,l=new Array(a),n=0;n<a;n++)l[n]=arguments[n];for(var d=0,f=l;d<f.length;d++){var u=f[d];if(Ce(r)!=="object")return;r=r[u]}return r}},{key:"put",value:function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];for(var n=a.pop(),d=a.pop(),f=this.cache,u=0,h=a;u<h.length;u++){var w=h[u];Ce(f[w])!=="object"&&(f[w]={}),f=f[w]}return f[d]=n}}]),t}(),st=new Pt,ms=Ct(),fs=function(s){return s.toString()};function hs(t,s){if(!ms)return fs;var r=ps(t),a=JSON.stringify(s),l=st.get(String(r),a)||st.put(String(r),a,new Intl.DateTimeFormat(r,s));return function(n){return l.format(n)}}const xs=Rt(hs);var Le={};function ps(t){var s=t.toString();return Le[s]?Le[s]:Le[s]=is(t)}function Ie(t){"@babel/helpers - typeof";return Ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ie(t)}function gs(t){return vs(t)?t:new Date(t)}function vs(t){return t instanceof Date||js(t)}function js(t){return Ie(t)==="object"&&typeof t.getTime=="function"}var rt=new Pt;function bs(t,s){var r=s.polyfill,a=String(t)+":"+String(r);return rt.get(a)||rt.put(a,new xt(t,{polyfill:r}))}var Me={exports:{}},pe={exports:{}};(function(){var t,s,r,a,l,n;typeof performance<"u"&&performance!==null&&performance.now?pe.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(pe.exports=function(){return(t()-l)/1e6},s=process.hrtime,t=function(){var d;return d=s(),d[0]*1e9+d[1]},a=t(),n=process.uptime()*1e9,l=a-n):Date.now?(pe.exports=function(){return Date.now()-r},r=Date.now()):(pe.exports=function(){return new Date().getTime()-r},r=new Date().getTime())}).call(pt);var ys=pe.exports,Ns=ys,ee=typeof window>"u"?pt:window,ye=["moz","webkit"],me="AnimationFrame",fe=ee["request"+me],je=ee["cancel"+me]||ee["cancelRequest"+me];for(var xe=0;!fe&&xe<ye.length;xe++)fe=ee[ye[xe]+"Request"+me],je=ee[ye[xe]+"Cancel"+me]||ee[ye[xe]+"CancelRequest"+me];if(!fe||!je){var Ee=0,at=0,ie=[],ws=1e3/60;fe=function(t){if(ie.length===0){var s=Ns(),r=Math.max(0,ws-(s-Ee));Ee=r+s,setTimeout(function(){var a=ie.slice(0);ie.length=0;for(var l=0;l<a.length;l++)if(!a[l].cancelled)try{a[l].callback(Ee)}catch(n){setTimeout(function(){throw n},0)}},Math.round(r))}return ie.push({handle:++at,callback:t,cancelled:!1}),at},je=function(t){for(var s=0;s<ie.length;s++)ie[s].handle===t&&(ie[s].cancelled=!0)}}Me.exports=function(t){return fe.call(ee,t)};Me.exports.cancel=function(){je.apply(ee,arguments)};Me.exports.polyfill=function(t){t||(t=ee),t.requestAnimationFrame=fe,t.cancelAnimationFrame=je};var Ss=Me.exports;const nt=Bt(Ss);function Ds(t,s){if(t.length===0)return 0;for(var r=0,a=t.length-1,l;r<=a;){l=Math.floor((a+r)/2);var n=s(t[l]);if(n===0)return l;if(n<0){if(r=l+1,r>a)return r}else if(a=l-1,a<r)return r}}function _s(t,s){return ks(t)||Ts(t,s)||Ps(t,s)||Cs()}function Cs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ps(t,s){if(t){if(typeof t=="string")return lt(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lt(t,s)}}function lt(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function Ts(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a=[],l=!0,n=!1,d,f;try{for(r=r.call(t);!(l=(d=r.next()).done)&&(a.push(d.value),!(s&&a.length===s));l=!0);}catch(u){n=!0,f=u}finally{try{!l&&r.return!=null&&r.return()}finally{if(n)throw f}}return a}}function ks(t){if(Array.isArray(t))return t}const Ms={instances:[],add:function(s){var r=this,a=this.instances.length===0;return Tt(this.instances,s),a&&this.start(),{stop:function(){kt(r.instances,s),r.instances.length===0&&r.stop()},forceUpdate:function(){ot(s,r.instances)}}},tick:function(){for(var s=Date.now();;){var r=this.instances[0];if(s>=r.nextUpdateTime)ot(r,this.instances);else break}},scheduleNextTick:function(){var s=this;this.scheduledTick=nt(function(){s.tick(),s.scheduleNextTick()})},start:function(){this.scheduleNextTick()},stop:function(){nt.cancel(this.scheduledTick)}};function As(t){var s=t.getNextValue(),r=_s(s,2),a=r[0],l=r[1];t.setValue(a),t.nextUpdateTime=l}function ot(t,s){As(t),kt(s,t),Tt(s,t)}function Tt(t,s){var r=Os(t,s);t.splice(r,0,s)}function kt(t,s){var r=t.indexOf(s);t.splice(r,1)}function Os(t,s){var r=s.nextUpdateTime;return Ds(t,function(a){return a.nextUpdateTime===r?0:a.nextUpdateTime>r?1:-1})}function Ne(t,s){return Es(t)||Ls(t,s)||$s(t,s)||Fs()}function Fs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $s(t,s){if(t){if(typeof t=="string")return it(t,s);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return it(t,s)}}function it(t,s){(s==null||s>t.length)&&(s=t.length);for(var r=0,a=new Array(s);r<s;r++)a[r]=t[r];return a}function Ls(t,s){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var a=[],l=!0,n=!1,d,f;try{for(r=r.call(t);!(l=(d=r.next()).done)&&(a.push(d.value),!(s&&a.length===s));l=!0);}catch(u){n=!0,f=u}finally{try{!l&&r.return!=null&&r.return()}finally{if(n)throw f}}return a}}function Es(t){if(Array.isArray(t))return t}function Rs(t){var s=t.date,r=t.future,a=t.locale,l=t.locales,n=t.timeStyle,d=t.round,f=t.minTimeLeft,u=t.formatVerboseDate,h=t.verboseDateFormat,w=h===void 0?Us:h,v=t.updateInterval,D=t.tick,T=D===void 0?!0:D,_=t.now,L=t.timeOffset,A=L===void 0?0:L,E=t.polyfill,p=i.useMemo(function(){return a&&(l=[a]),l.concat(xt.getDefaultLocale())},[a,l]),R=i.useMemo(function(){return bs(p,{polyfill:E})},[p,E]);s=i.useMemo(function(){return gs(s)},[s]);var k=i.useCallback(function(){var c=(_||Date.now())-A,j;if(r&&c>=s.getTime()&&(c=s.getTime(),j=!0),f!==void 0){var C=s.getTime()-f*1e3;c>C&&(c=C,j=!0)}var o=R.format(s,n,{getTimeToNextUpdate:!0,now:c,future:r,round:d}),g=Ne(o,2),m=g[0],x=g[1];return j?x=Is:x=v||x||60*1e3,[m,c+x]},[s,r,n,v,d,f,R,_]),z=i.useRef();z.current=k;var V=i.useMemo(k,[]),M=Ne(V,2),U=M[0],Y=M[1],F=i.useState(U),W=Ne(F,2),H=W[0],q=W[1],G=i.useRef();i.useEffect(function(){if(T)return G.current=Ms.add({getNextValue:function(){return z.current()},setValue:q,nextUpdateTime:Y}),function(){return G.current.stop()}},[T]),i.useEffect(function(){if(G.current)G.current.forceUpdate();else{var c=k(),j=Ne(c,1),C=j[0];q(C)}},[k]);var Q=i.useMemo(function(){return xs(p,w)},[p,w]),te=i.useMemo(function(){return u?u(s):Q(s)},[s,u,Q]);return{date:s,formattedDate:H,verboseDate:te}}var Bs=365*24*60*60*1e3,Is=1e3*Bs,Us={weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit"},Ue=N.oneOfType,ct=N.arrayOf,ue=N.string,dt=N.number,ge=N.shape,we=N.func,zs=Ue([ge({minTime:dt,formatAs:ue.isRequired}),ge({test:we,formatAs:ue.isRequired}),ge({minTime:dt,format:we.isRequired}),ge({test:we,format:we.isRequired})]),Hs=Ue([ue,ge({steps:ct(zs).isRequired,labels:Ue([ue,ct(ue)]).isRequired,round:ue})]),qs=["date","future","timeStyle","round","minTimeLeft","locale","locales","formatVerboseDate","verboseDateFormat","updateInterval","tick","now","timeOffset","polyfill","tooltip","component","container","wrapperComponent","wrapperProps"];function Pe(){return Pe=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Pe.apply(this,arguments)}function Vs(t,s){if(t==null)return{};var r=Ys(t,s),a,l;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);for(l=0;l<n.length;l++)a=n[l],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function Ys(t,s){if(t==null)return{};var r={},a=Object.keys(t),l,n;for(n=0;n<a.length;n++)l=a[n],!(s.indexOf(l)>=0)&&(r[l]=t[l]);return r}function be(t){var s=t.date,r=t.future,a=t.timeStyle,l=t.round,n=t.minTimeLeft,d=t.locale,f=t.locales,u=f===void 0?[]:f,h=t.formatVerboseDate,w=t.verboseDateFormat,v=t.updateInterval,D=t.tick,T=t.now,_=t.timeOffset,L=t.polyfill,A=t.tooltip,E=A===void 0?!0:A,p=t.component,R=p===void 0?_e:p,k=t.container,z=t.wrapperComponent,V=t.wrapperProps,M=Vs(t,qs),U=Rs({date:s,future:r,timeStyle:a,round:l,minTimeLeft:n,locale:d,locales:u,formatVerboseDate:h,verboseDateFormat:w,updateInterval:v,tick:D,now:T,timeOffset:_,polyfill:L}),Y=U.date,F=U.verboseDate,W=U.formattedDate,H=ve.createElement(R,Pe({date:Y,verboseDate:F,tooltip:E},M),W),q=z||k;return q?ve.createElement(q,Pe({},V,{verboseDate:F}),H):H}be.propTypes={date:N.oneOfType([N.instanceOf(Date),N.number]).isRequired,locale:N.string,locales:N.arrayOf(N.string),future:N.bool,timeStyle:Hs,round:N.string,minTimeLeft:N.number,component:N.elementType,tooltip:N.bool,formatVerboseDate:N.func,verboseDateFormat:N.object,updateInterval:N.oneOfType([N.number,N.arrayOf(N.shape({threshold:N.number,interval:N.number.isRequired}))]),tick:N.bool,now:N.number,timeOffset:N.number,polyfill:N.bool,wrapperComponent:N.elementType,wrapperProps:N.object};be=ve.memo(be);function Mt(t){return ze({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor"},child:[]}]})(t)}function Te(t){return ze({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z"},child:[]}]})(t)}function Ws(){const{currentUser:t}=I(o=>o.user),{currentProvider:s}=I(o=>o.provider),{user:r}=I(o=>o.provider),{onlineAllUsers:a}=I(o=>o.online),[l,n]=i.useState([]),[d,f]=i.useState(""),[u,h]=i.useState(null),[w,v]=i.useState([]),[D,T]=i.useState([]),[_,L]=i.useState([]),A=i.useRef(null),E=i.useRef(null),[p,R]=i.useState(!0),[k,z]=i.useState(!0),[V,M]=i.useState(!1),U=le(),Y="http://localhost:3000",[F,W]=i.useState(null),[H,q]=i.useState("");i.useEffect(()=>{const o=St(Y,{withCredentials:!0});return W(o),o.emit("Online",s._id),o.on("UserOnline",({userId:g})=>{U(gt(g))}),o.on("UserOut",({userId:g})=>{U(vt(g))}),()=>{o.close()}},[s._id,U]),i.useEffect(()=>{if(!F)return;const o=({sender:g,message:m,provider:x,userid:S})=>{if(r!==S){Z.success(`new message from ${g}`);return}const b={sender:g,message:m,provider:x,userid:S,createdAt:new Date};T(P=>[...P,b]),L(P=>[...P,b]),n(P=>P.map($=>$._id===r?{...$,lastMessage:b}:$))};return F.on("receiveMessage",o),()=>F.off("receiveMessage",o)},[F,r]);const G=()=>{H===""&&Z.error("Message cannot be empty"),F&&(F.emit("joinRoom",{roomId:`${u._id}_${d}`,sender:t._id,provider:d,reciever:u._id}),F.emit("sendMessage",{roomId:`${u._id}_${d}`,message:H,sender:t._id,provider:d,userid:u._id,reciever:u._id}),q(""))};i.useEffect(()=>{if(u&&F){const o=`${u._id}_${d}`;F.emit("joinRoom",{roomId:o,sender:t._id,provider:d,receiver:u._id})}},[u,F,t._id,d]),i.useEffect(()=>{(async()=>{try{R(!0),E.current.continuousStart(50);const m=await(await fetch(`/server/message/getuserprovider/${t._id}`)).json();if(m.success===!1){R(!1);return}n(m.users),f(m.providerId),R(!1),E.current.complete(50)}catch(g){R(!1),console.log(g)}})()},[t._id]);const Q=o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),G())};i.useEffect(()=>{const o=()=>{A.current&&A.current.scrollTop<=50&&te()};if(A.current){const g=A.current;return g.addEventListener("scroll",o),()=>{g&&g.removeEventListener("scroll",o)}}},[_]);const te=()=>{const g=_.length,m=w.slice(Math.max(0,w.length-g-10),w.length-g);L([...m,..._])},c=()=>{if(A.current){const{scrollHeight:o,clientHeight:g}=A.current,m=o-g;A.current.scrollTop=m>0?m:0}};i.useEffect(()=>{c()},[w,D]);const j=()=>{M(!0)},C=async o=>{h(o),M(!1);const g=`${o._id}_${d}`;try{const x=await(await fetch(`/server/message/getmessage/${g}`)).json();if(x.success===!1)return;v(x),L(x.slice(-9));const S=x.filter(b=>!b.read&&b.sender!==t._id);await Promise.all(S.map(async b=>fetch(`/server/message/markasread/${b._id}`,{method:"PUT",headers:{"Content-Type":"application/json"}}))),L(b=>b.map(P=>P.sender!==t._id?{...P,read:!0}:P)),n(b=>b.map(O=>{var $;return O._id===o._id&&(($=O.lastMessage)==null?void 0:$.sender)!==t._id?{...O,lastMessage:{...O.lastMessage,read:!0}}:O}))}catch(m){console.log(m)}};return i.useEffect(()=>{(async()=>{try{z(!0);const m=await(await fetch(`/server/message/getuserprovider/${t._id}`)).json();if(m.success===!1)return;const S=(await Promise.all(m.users.map(async b=>{const P=`${b._id}_${m.providerId}`,[O,$]=await Promise.all([fetch(`/server/message/getlastmessage/${P}`),fetch(`/server/message/getunreadmessagescount/${P}?reciever=${t._id}`)]),K=await O.json(),X=await $.json();return{...b,lastMessage:K,unreadCount:X.unreadCount}}))).sort((b,P)=>{const O=new Date(b.lastMessage.createdAt);return new Date(P.lastMessage.createdAt)-O});n(S),z(!1)}catch(g){console.log(g)}})()},[t._id]),e.jsxs("div",{className:"full-height flex flex-col",children:[e.jsx(Se,{color:"#722a88",ref:E,height:3,speed:1e3}),p?e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:e.jsx(He,{color:"#AFDBD8",loading:p,size:20})})}):e.jsx(e.Fragment,{children:l.length>0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-grow h-screen max-h-[390px] 2xl:max-h-[700px]",children:[e.jsx("div",{className:"w-1/4 chatbg flex flex-col items-center pt-2 pr-2 gap-2",children:l.length>0?e.jsx(e.Fragment,{children:k?e.jsx(e.Fragment,{children:l.map(o=>e.jsxs(wt,{height:80,width:290,speed:2,viewBox:"0 0 250 60",backgroundColor:"#f5f5f5",foregroundColor:"#D1BEE0",className:"2xl:w-[900px] 2xl:h-[110px]",children:[e.jsx("circle",{cx:"127",cy:"35",r:"25",className:"md:hidden block"}),e.jsx("circle",{cx:"30",cy:"35",r:"25",className:"hidden md:block"}),e.jsx("rect",{x:"70",y:"20",width:"140",height:"8",rx:"4",className:"hidden md:block"}),e.jsx("rect",{x:"70",y:"40",width:"80",height:"8",rx:"4",className:"hidden md:block"})]},o._id))}):e.jsx(e.Fragment,{children:l.map(o=>{var m,x,S,b,P,O;const g=u&&u._id===o._id;return e.jsxs("div",{className:`w-full p-4 flex chatbox-color gap-5 border-b-2 items-center cursor-pointer ${g?"chat-selected":"messagebg"}`,onClick:()=>{U(It(o._id)),C(o)},children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:o.profilePicture,alt:"provider logo",className:"w-9 h-9 2xl:size-20 md:w-12 md:h-12 rounded-full object-cover"}),a[o._id]?e.jsx(Te,{className:"absolute text-green-400 top-0 right-0 transition-all ease-in duration-150"}):e.jsx(Te,{className:"absolute text-red-400 top-0 right-0  transition-all ease-in duration-150"})]}),e.jsxs("div",{className:"flex-grow hidden md:block",children:[e.jsx("p",{className:"font-semibold items-center justify-center",children:o.username}),e.jsx("div",{className:"flex flex-row gap-1",children:e.jsxs("p",{className:`text-xs md:text-xs line-clamp-1 ${!((m=o.lastMessage)!=null&&m.read)&&((x=o.lastMessage)==null?void 0:x.sender)!==t._id?"text-gray-700 font-bold":""}`,children:[(S=o.lastMessage)==null?void 0:S.message.slice(0,20),((b=o.lastMessage)==null?void 0:b.message.length)>20?".....":""]})})]}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{style:{fontSize:"9px"},className:"hidden md:block",children:e.jsx("span",{className:"ml-2",style:{fontSize:"12px"},children:(()=>{var he;const $=new Date((he=o.lastMessage)==null?void 0:he.createdAt),K=new Date,X=K-$,se=24*60*60*1e3,re=7*se,J=de=>{const oe=new Date(K);return oe.setDate(K.getDate()-1),de.getDate()===oe.getDate()&&de.getMonth()===oe.getMonth()&&de.getFullYear()===oe.getFullYear()};return X<se?$.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):J($)?"Yesterday":X<re?$.toLocaleDateString([],{weekday:"long"}):$.toLocaleDateString([],{day:"2-digit",month:"2-digit",year:"numeric"})})()})}),e.jsx("div",{children:!((P=o.lastMessage)!=null&&P.read)&&((O=o.lastMessage)==null?void 0:O.sender)!==t._id&&e.jsx("div",{className:"bg-purple-400 rounded-full w-4 h-4 flex justify-center items-center",children:e.jsx("p",{className:"font-bold",style:{fontSize:"10px"},children:o.unreadCount})})})]})]},o._id)})})}):e.jsx(e.Fragment,{children:"no messages found"})}),e.jsx("div",{className:"w-3/4 p-4 flex flex-col rightchatbox-color overflow-hidden",children:u?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:`transition-all ease-in-out duration-200 ${V?"md:w-3/4":"w-full"}`,children:[e.jsxs("div",{className:`flex flex-row items-center mb-4 justify-between border-b-2 border-purple-500 ${V?"":"cursor-pointer"}`,onClick:j,children:[e.jsxs("div",{className:"flex item-center mb-4",children:[e.jsx("img",{src:u.profilePicture,alt:"provider logo",className:"size-10 rounded-full object-cover"}),e.jsx("div",{className:"flex flex-row items-center text-start",children:e.jsxs("div",{className:"items-center",children:[e.jsx("h2",{className:"flex flex-row ml-2 capitalize font-semibold",children:u.username}),a[u._id]?e.jsx("div",{className:"text-xs text-start ml-2 transition-all ease-in duration-150",children:"Online"}):e.jsx("div",{className:"text-xs text-start ml-2 transition-all ease-in duration-150",children:"Offline"})]})})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(Dt,{className:"size-6 text-gray",onClick:j})})]}),e.jsxs("div",{className:"flex flex-col flex-grow h-screen",children:[e.jsx("div",{ref:A,className:"overflow-y-scroll h-[245px] md:h-[240px] 2xl:h-[550px]",children:_.map(o=>e.jsxs("div",{className:"m-2",children:[e.jsxs("div",{className:`flex items-center ${String(o.sender)===String(t._id)?"justify-end":""}`,children:[o.sender!==t._id&&e.jsx("img",{src:u.profilePicture,alt:"user logo",className:"size-8 rounded-full mr-2 object-cover"}),e.jsx("div",{className:`p-2 text-xs md:text-base ${o.sender===t._id?"chat-sender rounded-l-xl rounded-tr-xl":"bg-gray-300 rounded-r-xl rounded-tl-xl"}  ${o.message.length>30?"w-2/3":"w-auto"}`,children:e.jsxs("div",{className:"flex items-center ml-2",children:[o.message,e.jsx("span",{className:"ml-2 mt-1",style:{fontSize:"10px"},children:new Date(o.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),o.sender===t._id&&e.jsx("img",{src:t.profilePicture,alt:"user logo",className:"size-9 rounded-full ml-2 object-cover"})]}),e.jsx("div",{className:`md:text-sm ${o.sender===t._id?"mr-10 text-right":"ml-10 text-left"}`,style:{fontSize:"12px"},children:e.jsx(be,{locale:"en-US",date:new Date(o.createdAt)})})]},o._id))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",required:!0,placeholder:"Type a message...",className:"w-full p-3 rounded-lg",value:H,onKeyDown:Q,onChange:o=>q(o.target.value)}),e.jsx(ne.Button,{onClick:G,variant:"outlined",className:"btn-color border-gray-400",children:e.jsx(_t,{className:"size-5"})})]})]})]}),V&&e.jsxs("div",{className:"w-1/3 p-2 pr-2 md:block hidden border-l-2 mt-2",children:[e.jsxs("div",{className:"flex flex-row items-center space-x-2 mb-3",children:[e.jsx(Mt,{className:"size-6 text-gray cursor-pointer",onClick:()=>M(!1)}),e.jsx("p",{className:"text-base font-semibold",children:"Contact info"})]}),e.jsx(jt,{children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:u.profilePicture,alt:"user logo",className:"size-10 rounded-full object-cover"}),e.jsx("h2",{className:"capitalize font-semibold mt-2",children:u.username}),e.jsx("p",{className:"text-xs mt-2",children:u.email})]})})]})]}):e.jsxs("div",{className:"flex flex-col mx-auto items-center justify-center h-full",children:[e.jsx("img",{src:t.profilePicture,alt:"user logo",className:"size-20 object-cover rounded-full border-4 border-purple-300"}),e.jsxs("h1",{className:"text-2xl font-bold text-gray",children:["Hi,",e.jsx("span",{className:"animate-wave",children:"👋🏻"}),"Welcome!"]}),e.jsx("h2",{className:"text-gray",children:"Select a people for chat."})]})})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col w-full max-h-screen p-2 mx-auto",children:e.jsx("div",{className:"h-52vh md:h-72vh bg-provmsgbg bg-cover bg-center flex flex-col justify-center items-center text-white",children:e.jsxs("div",{children:[e.jsx("h1",{className:"flex flex-col items-center text-4xl font-bold  text-gray-700",children:"No messages yet"}),e.jsx("h1",{className:"flex flex-col items-center text-2xl font-semibold mt-6 text-zinc-600",children:"You don't have any messages from client yet."})]})})})})})]})}function Gs(){const[t,s]=i.useState("Providers"),{currentProvider:r}=I(n=>n.provider),a=ke(),l=i.useMemo(()=>{const n=[{title:"Providers"}];return r&&n.push({title:"Message"},{title:"Appointment"}),n},[r]);return i.useEffect(()=>{const d=new URLSearchParams(a.search).get("tag");d&&l.find(u=>u.title===d)&&s(d)},[a.search,l]),e.jsxs("div",{className:"flex flex-col w-full transition-all duration-500",children:[e.jsx("nav",{className:"block border-b items-start",children:e.jsx("ul",{className:" flex items-center gap-x-3 max-w-screen-2xl mx-auto px-4",children:l.map((n,d)=>e.jsx("li",{className:"py-1",children:e.jsx(ce,{to:`?tag=${n.title}`,className:`block py-2 px-3 rounded-lg md:text-base text-sm text-gray-700 hover:text-amber-500 hover:bg-amber-100 duration-150 ${t===n.title?"border-b-2 border-amber-500":""}`,children:e.jsx("span",{className:"",children:n.title})})},d))})}),t==="Providers"&&e.jsx("div",{className:"w-full min-h-screen transition-all duration-500",children:e.jsx(Wt,{})}),r&&e.jsxs(e.Fragment,{children:[t==="Message"&&e.jsxs("div",{className:"w-full min-h-screen transition-all duration-500 h-screen",children:[e.jsx("h1",{className:"flex flex-col font-bold text-2xl text-zinc-800"}),e.jsx(Ws,{})]}),t==="Appointment"&&e.jsxs("div",{className:"w-full transition-all duration-500",children:[e.jsx("h1",{className:"flex flex-col p-2 font-bold text-2xl text-zinc-800"}),e.jsx(as,{})]})]})]})}function Ks(){const{currentUser:t}=I(c=>c.user),{onlineAllUsers:s}=I(c=>c.online),{id:r}=I(c=>c.provider),[a,l]=i.useState([]),[n,d]=i.useState(null),[f,u]=i.useState([]),[h,w]=i.useState([]),[v,D]=i.useState([]),[T,_]=i.useState(!0),[L,A]=i.useState(!0),E=i.useRef(null),p=i.useRef(null),[R,k]=i.useState(!1),z=le(),V="http://localhost:3000",[M,U]=i.useState(null),[Y,F]=i.useState("");i.useEffect(()=>{const c=St(V,{withCredentials:!0});return U(c),c.emit("Online",t._id),c.on("UserOnline",({userId:j})=>{z(gt(j))}),c.on("UserOut",({userId:j})=>{z(vt(j))}),()=>c.close()},[t._id,z]),i.useEffect(()=>{if(!M)return;const c=({sender:j,message:C,provider:o})=>{if(o!==r){Z.success("New message received");return}const g={sender:j,message:C,provider:o,createdAt:new Date};w(m=>[...m,g]),D(m=>[...m,g]),l(m=>m.map(S=>S._id===r?{...S,lastMessage:g}:S))};return M.on("receiveMessage",c),()=>M.off("receiveMessage",c)},[M,r]);const W=()=>{if(Y==="")return Z.error("Message cannot be empty");M&&(M.emit("joinRoom",{roomId:`${t._id}_${n._id}`,sender:t._id,provider:n._id,reciever:n.userRef}),M.emit("sendMessage",{roomId:`${t._id}_${n._id}`,message:Y,sender:t._id,provider:n._id,userid:t._id,reciever:n.userRef}),F(""))};i.useEffect(()=>{if(n&&M){const c=`${t._id}_${n._id}`;return M.emit("joinRoom",{roomId:c,sender:t._id,provider:n._id,reciever:n.userRef}),M.on("messageRead",j=>{D(C=>C.map(o=>o._id===j?{...o,read:!0}:o))}),()=>{M.off("messageRead")}}},[n,M,t._id]),i.useEffect(()=>{(async()=>{_(!0),p.current.continuousStart();try{const C=await(await fetch(`/server/message/getprovider/${t._id}`)).json();if(C.success===!1){_(!1),A(!1);return}l(C),p.current.complete(50),_(!1)}catch(j){_(!1),console.log(j)}})()},[t._id]);const H=c=>{c.key==="Enter"&&!c.shiftKey&&(c.preventDefault(),W())};i.useEffect(()=>{const c=()=>{E.current&&E.current.scrollTop<=10&&q()};if(E.current){const j=E.current;return j.addEventListener("scroll",c),()=>{j&&j.removeEventListener("scroll",c)}}},[v]);const q=()=>{const j=v.length,C=f.slice(Math.max(0,f.length-j-10),f.length-j);D(o=>[...C,...o])},G=()=>{if(E.current){const{scrollHeight:c,clientHeight:j}=E.current,C=c-j;E.current.scrollTop=C>0?C:0}};i.useEffect(()=>{G()},[h,f]);const Q=()=>{k(!0)},te=async c=>{d(c),k(!1);const j=`${t._id}_${c._id}`;try{const o=await(await fetch(`/server/message/getmessage/${j}`)).json();if(o.success===!1)return;u(o),D(o.slice(-10));const g=o.filter(m=>!m.read&&m.sender!==t._id);console.log("unreadMessages",g),await Promise.all(g.map(async m=>fetch(`/server/message/markasread/${m._id}`,{method:"PUT",headers:{"Content-Type":"application/json"}}))),D(m=>m.map(x=>x.sender!==t._id?{...x,read:!0}:x)),l(m=>m.map(S=>{var b;return S._id===c._id&&((b=S.lastMessage)==null?void 0:b.sender)!==t._id?{...S,lastMessage:{...S.lastMessage,read:!0}}:S}))}catch(C){console.log(C)}};return i.useEffect(()=>{(async()=>{try{_(!0),A(!0);const C=await(await fetch(`/server/message/getprovider/${t._id}`)).json();if(C.success===!1){_(!1),A(!1);return}const g=(await Promise.all(C.map(async m=>{const x=`${t._id}_${m._id}`,[S,b]=await Promise.all([fetch(`/server/message/getlastmessage/${x}`),fetch(`/server/message/getunreadmessagescount/${x}?reciever=${t._id}`)]),P=await S.json(),O=await b.json();return console.log("unreadData",O),{...m,lastMessage:P||"No message yet",unreadCount:O.unreadCount}}))).sort((m,x)=>{const S=new Date(m.lastMessage.createdAt);return new Date(x.lastMessage.createdAt)-S});l(g),A(!1),_(!1)}catch(j){_(!1),console.log(j)}})()},[t._id]),e.jsxs("div",{className:"full-height flex flex-col",children:[e.jsx(Se,{color:"#722a88",ref:p,height:3,speed:1e3}),T?e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"70vh"},children:e.jsx(He,{color:"#AFDBD8",loading:T,size:20})})}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{color:"#ff9900",ref:p,height:3,speed:1e3}),a.length>0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-grow h-screen max-h-[460px] 2xl:max-h-[745px]",children:[e.jsx("div",{className:"w-1/4 flex flex-col items-center pt-2 pr-2 gap-2",children:a.length>0?e.jsx(e.Fragment,{children:L&&!T?e.jsx(e.Fragment,{children:a.map(c=>e.jsxs(wt,{height:80,width:290,speed:2,viewBox:"0 0 250 60",backgroundColor:"#f5f5f5",foregroundColor:"#D1BEE0",className:"2xl:w-[900px] 2xl:h-[110px]",children:[e.jsx("circle",{cx:"127",cy:"35",r:"25",className:"md:hidden block"}),e.jsx("circle",{cx:"30",cy:"35",r:"25",className:"hidden md:block"}),e.jsx("rect",{x:"70",y:"20",width:"140",height:"8",rx:"4",className:"hidden md:block"}),e.jsx("rect",{x:"70",y:"40",width:"80",height:"8",rx:"4",className:"hidden md:block"})]},c._id))}):e.jsx(e.Fragment,{children:a.map(c=>{var C,o,g,m,x,S;const j=n&&n._id===c._id;return e.jsxs("div",{className:`w-full p-4 flex chatbox-color gap-5 border-b-2 items-center cursor-pointer ${j?"chat-selected":"messagebg"}`,onClick:()=>{z(Ut(c._id)),te(c)},children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:c.profilePicture,alt:"provider logo",className:"w-10 h-10 2xl:size-20 md:w-12 md:h-12 rounded-full object-cover"}),s[c._id]?e.jsx(Te,{className:"absolute top-0 right-0 text-green-400 transition-all ease-in duration-150"}):e.jsx(Te,{className:"absolute top-0 right-0 text-red-400 transition-all ease-in duration-150"})]}),e.jsxs("div",{className:"flex-grow hidden md:block",children:[e.jsx("p",{className:"font-semibold items-center justify-center",children:c.fullName.slice(0,15)}),e.jsx("div",{className:"flex flex-row gap-1",children:e.jsxs("p",{className:`text-sm line-clamp-1 ${!((C=c.lastMessage)!=null&&C.read)&&((o=c.lastMessage)==null?void 0:o.sender)!==t._id?"text-gray-700 font-bold":""}`,children:[(g=c.lastMessage)==null?void 0:g.message.slice(0,20),((m=c.lastMessage)==null?void 0:m.message.length)>20?"....":""]})})]}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{style:{fontSize:"11px"},className:"hidden md:block",children:e.jsx("span",{className:"ml-2",style:{fontSize:"12px"},children:(()=>{var se;const b=new Date(((se=c.lastMessage)==null?void 0:se.createdAt)||0),P=new Date,O=P-b,$=24*60*60*1e3,K=7*$,X=re=>{const J=new Date(P);return J.setDate(J.getDate()-1),re.getDate()===J.getDate()&&re.getMonth()===J.getMonth()&&re.getFullYear()===J.getFullYear()};return O<$?b.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):X(b)?"Yesterday":O<K?b.toLocaleDateString([],{weekday:"long"}):b.toLocaleDateString([],{day:"2-digit",month:"2-digit",year:"numeric"})})()})}),e.jsx("div",{children:!((x=c.lastMessage)!=null&&x.read)&&((S=c.lastMessage)==null?void 0:S.sender)!==t._id&&e.jsx("div",{className:"bg-purple-400 rounded-full w-4 h-4 flex justify-center items-center",children:e.jsx("p",{className:"font-bold",style:{fontSize:"10px"},children:c.unreadCount})})})]})]},c._id)})})}):e.jsx(e.Fragment,{children:"no messages found"})}),e.jsx("div",{className:"w-3/4 p-4 flex flex-col rightchatbox-color overflow-hidden",children:n?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:`transition-all ease-in-out duration-200 ${R?"md:w-3/4":"w-full"}`,children:[e.jsxs("div",{className:`flex flex-row items-center mb-4 justify-between border-b-2 border-purple-500 ${R?"":"cursor-pointer"}`,onClick:Q,children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("img",{src:n.profilePicture,alt:"provider logo",className:"w-10 h-10 md:h-10 md rounded-full object-cover"}),e.jsx("div",{className:"flex flex-row items-center text-start",children:e.jsxs("div",{className:"items-center",children:[e.jsx("h2",{className:"flex flex-row ml-2 capitalize font-semibold",children:n.fullName}),s[n._id]?e.jsx("div",{className:"text-xs text-start ml-2 fadeIn",children:"Online"}):e.jsx("div",{className:"text-xs text-start  ml-2",children:"Offline"})]})})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(Dt,{className:"size-6"})})]}),e.jsxs("div",{className:"flex flex-col flex-grow h-screen",children:[e.jsx("div",{ref:E,className:" overflow-y-scroll h-[320px] md:h-[290px] 2xl:h-[600px]",children:v.map(c=>e.jsxs("div",{className:"m-2",children:[e.jsxs("div",{className:`flex items-center ${String(c.sender)===String(t._id)?"justify-end":""}`,children:[c.sender!==t._id&&e.jsx("img",{src:n.profilePicture,alt:"provider logo",className:"size-9 rounded-full mr-2 object-cover"}),e.jsxs("div",{className:`p-2 text-xs md:text-base ${c.sender===t._id?"chat-sender rounded-l-xl rounded-tr-xl":"bg-gray-300 rounded-r-xl rounded-tl-xl"} ${c.message.length>30?"w-2/3":"w-max"}`,children:[c.message,e.jsx("span",{className:"ml-2",style:{fontSize:"10px"},children:new Date(c.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),c.sender===t._id&&e.jsx("img",{src:t.profilePicture,alt:"user logo",className:"size-9 rounded-full ml-2 object-cover"})]}),e.jsx("div",{className:`${c.sender===t._id?"mr-10 text-right":"ml-10 text-left"}`,style:{fontSize:"12px"},children:e.jsx(be,{locale:"en-US",date:new Date(c.createdAt)})})]},c._id))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Type a message...",className:"w-full p-3 rounded-lg",value:Y,onKeyDown:H,onChange:c=>F(c.target.value)}),e.jsx(ne.Button,{onClick:W,variant:"outlined",className:"btn-color border-gray-400",children:e.jsx(_t,{className:"size-5"})})]})]})]}),R&&e.jsxs("div",{className:"w-1/3 p-2 pr-2 md:block hidden border-l-2 mt-2",children:[e.jsxs("div",{className:"flex flex-row items-center space-x-2 mb-3",children:[e.jsx(Mt,{className:"size-6 text-gray cursor-pointer",onClick:()=>k(!1)}),e.jsx("p",{className:"text-base font-semibold",children:"Contact info"})]}),e.jsx(jt,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("img",{src:n.profilePicture,alt:"user logo",className:"size-16 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-row justify-center items-center gap-1",children:[e.jsx("h2",{className:"capitalize font-semibold mt-2 provideritem-name",children:n.fullName}),n.verified===!0&&e.jsx(e.Fragment,{children:e.jsx(zt,{content:"Verifed Profile",animation:"duration-500",children:e.jsx(Gt,{className:"animate-bounce size-4 mt-2"})})})]}),e.jsx("p",{className:"text-xs text-center provideritem-service",children:Array.isArray(n.name)?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:n.name.slice(0,2).join(", ")}),n.name.length>2?e.jsx("p",{children:n.name.slice(2).join(", ")}):null,n.name.length>3?e.jsx(e.Fragment,{children:e.jsx("p",{children:`+${n.name.length-2}more`})}):null]}):e.jsx(e.Fragment,{children:n.name})})]}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx(qt,{className:"h-4 w-4 icon-color"}),e.jsxs("p",{className:"text-sm provideritem-service",children:[e.jsx("span",{className:"text-xs provideritem-service",children:n.experience})," years experience"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Vt,{className:"h-4 w-4 icon-color"}),e.jsxs("p",{className:"text-sm provideritem-service truncate w-full",children:[n.address.state,",",n.address.city]})]})]})})]})]}):e.jsxs("div",{className:"flex flex-col mx-auto items-center justify-center h-full",children:[e.jsx("img",{src:t.profilePicture,alt:"user logo",className:"size-20 object-cover rounded-full border-4 border-purple-300"}),e.jsxs("h1",{className:"text-2xl font-bold text-gray",children:["Hi,",e.jsx("span",{className:"animate-wave",children:"👋🏻"}),"Welcome!"]}),e.jsx("h2",{className:"text-gray",children:"Select a provider for chat."})]})})]})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col w-full max-h-screen p- mx-auto",children:[e.jsx("div",{className:"h-52vh md:h-72vh bg-nomsgbg bg-cover bg-center flex flex-col justify-center items-center text-white",children:e.jsxs("div",{children:[e.jsx("h1",{className:"flex flex-col items-center text-4xl font-bold  text-gray-700",children:"No Messages yet"}),e.jsx("h1",{className:"flex flex-col items-center text-2xl font-semibold mt-6 text-zinc-600",children:"To begin, search for a provider and send them a message."})]})}),e.jsx("div",{className:"flex items-center justify-center mt-6",children:e.jsx(ut,{})})]})})]})]})}function ir(){const t=ke(),[s,r]=i.useState("Dashboard"),{currentUser:a}=I(n=>n.user),l=le();return i.useEffect(()=>{(async()=>{const d=`/server/booking/getuserbookings/${a._id}`;console.log("Fetching bookings from URL:",d);try{l(mt());const f=await fetch(d);if(console.log("Response status:",f.status),!f.ok)throw new Error(`HTTP error! status: ${f.status}`);const u=await f.json();l(ft(u)),console.log("Booking data:",u)}catch(f){l(ht(f)),console.error("An error occurred while fetching booking details:",f)}})()},[a._id,l]),i.useEffect(()=>{const d=new URLSearchParams(t.search).get("tab");["dashboard","providers","profile","Profile Setting","Parent Details","Bookings","messages"].includes(d)&&r(d)},[t.search]),i.useEffect(()=>{const d=new URLSearchParams(t.search).get("tag");["dashboard","providers","profile","Profile Setting","Parent Details","Bookings","messages"].includes(d)&&r(d)},[t.search]),e.jsxs("div",{className:"flex flex-col mx-auto",children:[e.jsx("div",{className:"",children:e.jsx(Xt,{})}),s==="dashboard"&&e.jsx(es,{}),s==="providers"&&e.jsx(Gs,{}),(s==="profile"||s==="Profile Setting"||s==="Parent Details"||s==="Bookings")&&e.jsx(rs,{}),s==="messages"&&e.jsx(Ks,{})]})}export{ir as default};
