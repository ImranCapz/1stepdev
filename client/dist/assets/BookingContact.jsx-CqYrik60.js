import{r as c,j as r}from"./react-DiIsFRGf.js";import{P as o}from"./prop-types-DepTH4Nk.js";import{r as w}from"./@material-tailwind-CfbTshu2.js";import{u as S}from"./react-redux-Cmcgb_ry.js";import{S as h}from"./react-select-xtze-_c4.js";import{_ as C}from"./react-hot-toast-BDpxPdYe.js";import{u as k}from"./react-router-Ck6p_Z-K.js";function T({provider:s}){const[g,b]=c.useState(),f=k(),{currentUser:n}=S(e=>e.user),[u,x]=c.useState("you"),[i,d]=c.useState({patientName:"",scheduledTime:"",email:"",note:"",service:"",sessionType:"",status:"pending"});console.log(i),c.useEffect(()=>{(async()=>{try{const a=await(await fetch(`/server/user/${s.userRef}`)).json();b(a),console.log(a),d(m=>({...m,email:n.email,patientName:n.username}))}catch(t){console.log(t)}})()},[s.userRef,n.email,n.username]);const y=async e=>{e.preventDefault();try{if((await(await fetch("/server/booking/bookings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...i,patient:n._id,provider:s._id})})).json()).success===!0)return;C.success("Successfully Booked"),f("/dashboard?tag=Bookings")}catch(t){console.log(t)}},l=e=>{d({...i,[e.target.id]:e.target.value})},p=(e,t)=>{e.preventDefault(),x(t)},N=()=>{const e=new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),m=String(e.getDate()).padStart(2,"0"),j=String(e.getHours()).padStart(2,"0"),v=String(e.getMinutes()).padStart(2,"0");return`${t}-${a}-${m}T${j}:${v}`};return r.jsx(r.Fragment,{children:g&&r.jsx("div",{className:"flex flex-col gap-4 mt-4",children:r.jsxs("form",{children:[r.jsxs("div",{className:"flex flex-row justify-center gap-1 items-center",children:[r.jsx("button",{onClick:e=>p(e,"you"),className:`p-2 w-20 rounded-lg font-bold hover:text-slate-700 transition duration-300 ease-in-out  ${u==="you"?"p-3 bg-emerald-400 text-slate-700":"bg-slate-300 text-slate-500 hover:text-slate-700"}`,children:"You"}),r.jsx("button",{onClick:e=>p(e,"someone else"),className:`p-2 w-30 rounded-lg font-bold transition duration-300 ease-in-out ${u==="someone else"?"p-3 bg-emerald-400 text-slate-700":"bg-slate-300 text-slate-500 hover:text-slate-700"}`,children:"Someone Else"})]}),u==="you"&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-gray-600 mt-2",children:"Name* "}),r.jsx("input",{type:"text",name:"patientName",id:"patientName",value:i.patientName,onChange:l,placeholder:"Full Name",className:"w-full border-2 border-transparent rounded-lg mb-1 focus:outline-none focus:shadow-inner focus:ring-0 focus:border-amber-500 hover:border-amber-500",required:!0})]}),u==="someone else"&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-gray-600 mt-2",children:"Patient Name* "}),r.jsx("input",{type:"text",name:"patientName",id:"patientName",onChange:l,placeholder:"Someone else",className:"w-full border-2 border-transparent rounded-lg mb-1 focus:outline-none focus:shadow-inner focus:ring-0 focus:border-amber-500 hover:border-amber-500",required:!0})]}),r.jsxs("h2",{className:"text-gray-600 mt-2",children:["How can we help your family?*"," "]}),r.jsx(h,{id:"name",options:s.name.map(e=>({value:e,label:e})),isMulti:!0,required:!0,placeholder:"What service do you need?",touchUi:!1,className:"border-2 p-0.5 rounded-lg bg-white focus:border-amber-700  hover:border-amber-500",onChange:e=>{d(t=>({...t,service:e.map(a=>a.value)}))},styles:{control:e=>({...e,backgroundColor:"transparent",minWidth:"160px",border:"none",outline:"none",boxShadow:"none",transition:"all 0.3s ease"})}}),r.jsx("h2",{className:"text-gray-600 mt-2",children:"Email* "}),r.jsx("input",{type:"email",value:i.email,name:"email",id:"email",onChange:l,className:"w-full border-2 border-transparent rounded-lg mb-1 focus:outline-none focus:shadow-inner focus:ring-0 focus:border-amber-500 hover:border-amber-500",required:!0}),r.jsx("h2",{className:"text-gray-600 mt-2",children:"Note* "}),r.jsx("textarea",{type:"text",name:"note",id:"note",rows:"2",onChange:l,className:"w-full border-2 rounded-lg mb-1 border-transparent focus:outline-none focus:ring-0 focus:ring-amber-500 focus:border-amber-500 hover:border-amber-500",placeholder:"Enter you Message here...",required:!0}),r.jsx("h2",{className:"text-gray-600 mt-2",children:"Scheduled* "}),r.jsxs("div",{className:"flex flex-row gap-2",children:[r.jsx("input",{type:"datetime-local",name:"scheduledTime",id:"scheduledTime",onChange:l,min:N(),className:"w-[130px] md:w-[170px] border-2 rounded-lg border-transparent focus:outline-none focus:ring-0 focus:ring-amber-500 focus:border-amber-500 hover:border-amber-500",required:!0}),r.jsx(h,{id:"sessionType",options:s.therapytype.map(e=>({value:e,label:e})),required:!0,placeholder:"Session Type",touchUi:!1,className:"w-full border-2 rounded-lg bg-white focus:border-amber-700  hover:border-amber-500",onChange:e=>{d(t=>({...t,sessionType:Array.isArray(e)?e.map(a=>a.value):e?e.value:[]}))},styles:{control:e=>({...e,backgroundColor:"transparent",minWidth:"160px",border:"none",outline:"none",boxShadow:"none",transition:"all 0.3s ease"})}})]}),r.jsx(w.Button,{type:"submit",onClick:y,className:"w-full mt-4 blue-button h-14 text-slate-800 font-bold text-center p-3 uppercase rounded-lg hover:opacity-95",children:"Book a Slot"})]})})})}T.propTypes={provider:o.shape({_id:o.string.isRequired,name:o.array.isRequired,userRef:o.string.isRequired,fullName:o.string.isRequired,therapytype:o.arrayOf(o.string).isRequired}).isRequired};export{T as B};
