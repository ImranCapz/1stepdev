import{r as n,j as e}from"./react-DiIsFRGf.js";import{u as me,a as pe}from"./react-redux-Cmcgb_ry.js";import{u as y,a as j,b as ae}from"./Header.jsx-DRWgs81u.js";import{_ as he}from"./react-spinners-D_wes01j.js";import{_ as g}from"./react-hot-toast-BDpxPdYe.js";import{u as ge}from"./react-top-loading-bar-BLjLFdAM.js";import{S as fe}from"./react-select-xtze-_c4.js";import{I as re}from"./react-phone-number-input-ASBvvjCp.js";import{I as se}from"./react-icons-4Z_jIp8v.js";function Pe(){var q,A,E,T,M,k,B,G,H,I,O,_,L,U,V,$;const{currentUser:f,error:D}=me(a=>a.user),o=pe(),[x,v]=n.useState(!1),[le,C]=n.useState(!1),b=n.useRef(null),[ne,oe]=n.useState(),[ie,de]=n.useState(),[S,m]=n.useState(!1),[p,h]=n.useState(!0),[P,F]=n.useState(!0),[t,d]=n.useState({isParent:!1,parentDetails:{fullName:"",lookingFor:[],childName:"",dob:"",gender:"",height:"",weight:"",bloodGroup:"",medicalHistory:"",allergies:"",emergencyContact:ie,insurance:"",address:"",phoneNumber:ne}}),w=[{value:"Diagnostic Evaluation",label:"Diagnostic Evaluation"},{value:"Speech Therapy",label:"Speech Therapy"},{value:"ABA Therapy",label:"ABA Therapy"},{value:"Occupational Therapy",label:"Occupational Therapy"},{value:"School-Based Service",label:"School-Based Service"},{value:"Dance Movement",label:"Dance Movement"},{value:"Art as Therapy",label:"Art as Therapy"},{value:"Counselling",label:"Counselling"}],l=a=>{let s=a.target.value;a.target.id==="phoneNumber"&&(s.length!==10?h(!1):h(!0)),a.target.id==="isParent"?(s=a.target.value==="Yes",d({...t,isParent:s})):d({...t,parentDetails:{...t.parentDetails,[a.target.id]:s}}),m(!0)},ue=async a=>{var s,i;if(a.preventDefault(),!!S){if(((s=t.parentDetails)==null?void 0:s.phoneNumber.length)!==13){g.error("Phone number should be 10 digits"),h(!1);return}else h(!0);if(((i=t.parentDetails)==null?void 0:i.emergencyContact.length)!==13){g.error("Emergency Contact should be 10 digits"),F(!1);return}else F(!0);o(y());try{b.current.continuousStart(50),o(y()),C(!0);const u=await(await fetch(`server/parent/updateparent/${f._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).json();if(u.success===!1){o(j(u));return}o(ae(u)),t.isParent?g.success("Parent details updated successfully"):g.error("Parent Details Successfully Removed"),C(!1)}catch(c){o(j(c))}finally{b.current.complete()}}};return n.useEffect(()=>{(async()=>{var s,i,c,u,R,W,Y,z,J,K,Q,X,Z,ee,te;o(y()),v(!0);try{const r=await(await fetch(`server/parent/getparent/${f._id}`)).json();if(r.success===!1)return;const ce={isParent:r.isParent||!1,lookingFor:((s=r.parentDetails)==null?void 0:s.lookingFor)||[],childName:((i=r.parentDetails)==null?void 0:i.childName)||"",fullName:((c=r.parentDetails)==null?void 0:c.fullName)||"",dob:(u=r.parentDetails)!=null&&u.dob?new Date((R=r.parentDetails)==null?void 0:R.dob).toISOString().split("T")[0]:"",gender:((W=r.parentDetails)==null?void 0:W.gender)||"",height:((Y=r.parentDetails)==null?void 0:Y.height)||"",weight:((z=r.parentDetails)==null?void 0:z.weight)||"",bloodGroup:((J=r.parentDetails)==null?void 0:J.bloodGroup)||"",medicalHistory:((K=r.parentDetails)==null?void 0:K.medicalHistory)||"",allergies:((Q=r.parentDetails)==null?void 0:Q.allergies)||"",emergencyContact:((X=r.parentDetails)==null?void 0:X.emergencyContact)||"",insurance:((Z=r.parentDetails)==null?void 0:Z.insurance)||"",address:((ee=r.parentDetails)==null?void 0:ee.address)||"",phoneNumber:((te=r.parentDetails)==null?void 0:te.phoneNumber)||""};d({isParent:r.isParent||!1,parentDetails:ce}),o(ae(r))}catch(N){console.log(N),o(j(N))}v(!1)})()},[f._id,o]),e.jsxs("div",{className:"p-7 flex-col items-center rounded-lg",children:[e.jsx(ge,{ref:b,color:"#ff9900",height:3}),x?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e.jsx(he,{color:"#10ebd8",loading:x,size:15})}):e.jsxs("form",{onSubmit:ue,className:"flex flex-col sm:flex-row md:gap-4 gap-4",children:[e.jsxs("div",{className:"flex flex-col flex-1 gap-2",children:[e.jsx("label",{htmlFor:"isParent",className:"text-sm font-semibold text-main",children:"Are you a parent?"}),e.jsxs("select",{id:"isParent",name:"isParent",value:t.isParent?"Yes":"No",onChange:l,className:"input border-2 p-2 rounded-lg focus:ring-0",required:!0,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"Yes",children:"Yes"}),e.jsx("option",{value:"No",children:"No"})]}),e.jsx("label",{htmlFor:"gender",className:"text-sm font-semibold text-main",children:"Gender:"}),e.jsxs("select",{id:"gender",name:"gender",value:(q=t.parentDetails)==null?void 0:q.gender,onChange:l,className:"input border-2 p-2 rounded-lg  focus:outline-none focus:ring-0",required:!0,children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]}),e.jsx("label",{className:"text-sm font-semibold text-main",children:"BloodGroup*"}),e.jsx("input",{type:"text",placeholder:"BloodGroup",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0",id:"bloodGroup",required:!0,onChange:l,value:(A=t.parentDetails)==null?void 0:A.bloodGroup}),e.jsx("label",{htmlFor:"gender",className:"text-sm font-semibold text-main",children:e.jsxs("p",{className:"flex flex-row items-center",children:[!P&&e.jsx(se,{className:"text-red-700 text-sm"}),"Emergency Contact :"," "]})}),e.jsx(re,{placeholder:"Emergency Contact",className:`border-2 p-2 input rounded-lg focus:outline-none focus:ring-0 ${p?"":"error"}`,value:(E=t.parentDetails)==null?void 0:E.emergencyContact,onChange:a=>{de(a),d({...t,parentDetails:{...t.parentDetails,emergencyContact:a}}),m(!0)},required:!0}),!P&&e.jsx("p",{className:"text-sm text-red-500 font-semibold",children:"Please enter a 10-digit number"}),e.jsx("label",{htmlFor:"gender",className:"text-sm font-semibold text-main",children:"Address : (city, state, pincode)"}),e.jsx("textarea",{type:"text",placeholder:"Address",className:"border-2 p-2 rounded-lg input focus:outline-none focus:ring-0",id:"address",required:!0,onChange:l,value:(T=t.parentDetails)==null?void 0:T.address})]}),e.jsxs("div",{className:"flex flex-col flex-1 gap-2 w-full",children:[e.jsx("label",{name:"fullName",className:"text-sm font-semibold text-main",children:"Enter your Full Name :"}),e.jsx("input",{type:"text",placeholder:"Full Name",className:"input border-2 p-2 rounded-lg focus:ring-0",id:"fullName",maxLength:"62",minLength:"5",required:!0,onChange:l,value:(M=t.parentDetails)==null?void 0:M.fullName}),e.jsx("label",{name:"fullName",className:"text-sm font-semibold text-main",children:"Enter your DOB :"}),e.jsx("input",{type:"date",placeholder:"Date of Birth",className:"input border-2 p-2 rounded-lg  focus:ring-0",id:"dob",required:!0,onChange:l,value:(k=t.parentDetails)==null?void 0:k.dob}),e.jsx("label",{className:"text-sm font-semibold text-main",children:"Height*"}),e.jsx("input",{type:"text",placeholder:"Height",className:"input border-2 p-2 rounded-lg  focus:outline-none focus:ring-0",id:"height",required:!0,onChange:l,value:(B=t.parentDetails)==null?void 0:B.height}),e.jsx("label",{className:"text-sm font-semibold text-main",children:"Medical History*"}),e.jsx("input",{type:"text",placeholder:"Medical History",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0",id:"medicalHistory",required:!0,onChange:l,value:(G=t.parentDetails)==null?void 0:G.medicalHistory}),e.jsx("label",{htmlFor:"gender",className:"text-sm font-semibold text-main",children:"Insurance :"}),e.jsx("input",{type:"text",placeholder:"Insurance",className:"border-2 p-2 rounded-lg input focus:outline-none focus:ring-0",id:"insurance",required:!0,onChange:l,value:(H=t.parentDetails)==null?void 0:H.insurance})]}),e.jsxs("div",{className:"flex flex-col flex-1 gap-2 w-full",children:[e.jsx("label",{name:"fullName",className:"text-sm font-semibold text-main",children:"What therapy your looking for?"}),e.jsx(fe,{id:"name",options:w,isMulti:!0,required:!0,placeholder:"looking for?",touchUi:!1,className:"border-2 rounded-lg border-slate-300 bg-white input hover:border-purple-400",defaultValue:Array.isArray((I=t.parentDetails)==null?void 0:I.lookingFor)?(O=t.parentDetails)==null?void 0:O.lookingFor.map(a=>w.find(s=>s.value===a)):[],onChange:a=>{d(s=>({...s,parentDetails:{...s.parentDetails,lookingFor:a.map(i=>i.value)}})),m(!0)},styles:{control:a=>({...a,backgroundColor:"transparent",minWidth:"160px",border:"none",outline:"none",boxShadow:"none",transition:"all 0.3s ease"})}},(_=t.parentDetails)==null?void 0:_.lookingFor),e.jsx("label",{className:"text-sm font-semibold text-main",children:"Child Name*"}),e.jsx("input",{type:"text",placeholder:"Child Name",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0 ",id:"childName",required:!0,onChange:l,value:(L=t.parentDetails)==null?void 0:L.childName}),e.jsx("label",{className:"text-sm font-semibold text-main",children:"Weight*"}),e.jsx("input",{type:"text",placeholder:"Weight",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0 ",id:"weight",required:!0,onChange:l,value:(U=t.parentDetails)==null?void 0:U.weight}),e.jsx("label",{className:"text-sm font-semibold text-main",children:"Allergies :"}),e.jsx("input",{type:"text",placeholder:"Allergies",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0",id:"allergies",required:!0,onChange:l,value:(V=t.parentDetails)==null?void 0:V.allergies}),e.jsx("label",{className:"text-sm font-semibold text-main",children:e.jsxs("p",{className:"flex flex-row items-center",children:[!p&&e.jsx(se,{className:"text-red-700 text-sm"}),"Phone Number :"," "]})}),e.jsx(re,{placeholder:"Enter phone number",className:`border-2 p-2 input rounded-lg focus:outline-none focus:ring-0 ${p?"":"error"}`,value:($=t.parentDetails)==null?void 0:$.phoneNumber,onChange:a=>{oe(a),d({...t,parentDetails:{...t.parentDetails,phoneNumber:a}}),m(!0)},required:!0}),!p&&e.jsx("p",{className:"text-sm text-red-500 font-semibold",children:"Please enter a 10-digit number"}),e.jsx("button",{disabled:!S||x,className:"p-2 btn-color rounded-lg mt-8 font-semibold rounded=lg uppercase hover:opacity-95 disabled:opacity-60 transition ease-in-out duration-300",children:le?"Saving...":"Save"}),D&&e.jsx("p",{className:"text-red-700 text-xs",children:D})]})]})]})}export{Pe as P};
