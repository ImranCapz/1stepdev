import{r as i,c as Ye,b as pe,j as e,d as be,L as oe,e as ts,p as ss,s as rs,g as as,o as ns,G as Te,a as V,h as xe,M as we,B as ut,i as ls,T as g,S as nt,_ as Z,F as os,k as Ie,m as ze,n as Me,q as _e,t as et,v as Mt,u as _t,w as mt,x as xt,y as is,z as cs,A as ds,C as us,D as ms,R as Ee,P as B,E as xs,H as Et,I as At,J as fs,K as Ft,N as Ot,O as hs,Q as $t,U as Lt,V as ps,W as gs,X as bs,Y as js,Z as vs,$ as ys,a0 as Ns,a1 as ws}from"./index-SDRb-TLi.js";import{H as ft}from"./index-DZDoqKsH.js";import{R as ht}from"./index-CvR7Mb5J.js";import{M as pt,a as gt,b as bt,c as lt,d as Cs,e as Ss,f as Ts,g as Ps}from"./index-CHccW3SV.js";import{I as jt,a as Ue}from"./index-oh6lfEFq.js";import{F as Bt,a as ot,b as it,C as Rt}from"./react-content-loader.es-D6V1doDx.js";import{O as Ds,l as It}from"./index-WoNcxklU.js";import{H as ks}from"./index-CvZHXOBp.js";import Ms from"./Profile-B2PdHY-l.js";import{_ as ct,I as Ae,C as _s}from"./CreateProvider-tTuuhFeD.js";import{S as Es}from"./react-select.esm-C8Y5q8oI.js";import{c as As,a as Je}from"./animation-BL6VsgIS.js";import{P as zt}from"./index-VQpsHiwJ.js";import{g as Fs,r as Os,u as $s,a as Ls}from"./index.esm2017-DbKMdowr.js";import"./state-BJkdTDHY.js";var He=function(){return He=Object.assign||function(t){for(var s,a=1,n=arguments.length;a<n;a++){s=arguments[a];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o])}return t},He.apply(this,arguments)},Bs=function(t,s){var a={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.indexOf(n)<0&&(a[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)s.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(a[n[o]]=t[n[o]]);return a},Rs=As("BeatLoader","50% {transform: scale(0.75);opacity: 0.2} 100% {transform: scale(1);opacity: 1}","beat");function Is(t){var s=t.loading,a=s===void 0?!0:s,n=t.color,o=n===void 0?"#000000":n,r=t.speedMultiplier,x=r===void 0?1:r,l=t.cssOverride,u=l===void 0?{}:l,f=t.size,F=f===void 0?15:f,p=t.margin,A=p===void 0?2:p,k=Bs(t,["loading","color","speedMultiplier","cssOverride","size","margin"]),T=He({display:"inherit"},u),w=function(O){return{display:"inline-block",backgroundColor:o,width:Je(F),height:Je(F),margin:Je(A),borderRadius:"100%",animation:"".concat(Rs," ").concat(.7/x,"s ").concat(O%2?"0s":"".concat(.35/x,"s")," infinite linear"),animationFillMode:"both"}};return a?i.createElement("span",He({style:T},k),i.createElement("span",{style:w(1)}),i.createElement("span",{style:w(2)}),i.createElement("span",{style:w(3)})):null}function zs(){const t=Ye(),[s,a]=i.useState(""),[n,o]=i.useState("dashboard"),r=pe();i.useEffect(()=>{const f=new URLSearchParams(t.search).get("tab");f&&(a(f),o(f))},[t.search]);const x=async()=>{try{const u=await fetch("/server/auth/signout",{method:"GET"}),f=await u.json();u.ok?(r(ts()),r(ss()),r(rs()),r(as()),r(ns())):console.log(f.message)}catch(u){console.log(u.message)}},l=[{name:"dashboard",icon:ht,link:"/dashboard?tab=dashboard"},{name:"providers",icon:pt,link:"/dashboard?tab=providers"},{name:"messages",icon:jt,link:"/dashboard?tab=messages"},{name:"profile",icon:gt,link:"/dashboard?tab=profile"},{name:"Sign Out",icon:ft,link:"/",onClick:x}];return e.jsxs(e.Fragment,{children:[e.jsx(be,{className:"w-full hidden md:flex",children:e.jsx(be.Items,{children:e.jsxs(be.ItemGroup,{className:"w-screen flex flex-row gap-2 items-center",children:[e.jsx(oe,{to:"/dashboard?tab=dashboard",children:e.jsx(be.Item,{active:s==="dashboard",className:"mt-2",icon:ht,labelColor:"light",as:"div",children:"Dashboard"})}),e.jsx(oe,{to:"/dashboard?tab=providers",children:e.jsx(be.Item,{active:s==="providers",icon:pt,labelColor:"light",as:"div",children:"Providers"})}),e.jsx(oe,{to:"/dashboard?tab=messages",children:e.jsx(be.Item,{active:s==="messages",icon:jt,labelColor:"light",as:"div",children:"Message"})}),e.jsx(oe,{to:"/dashboard?tab=profile",children:e.jsx(be.Item,{active:s==="profile",icon:gt,labelColor:"light",as:"div",children:"Profile"})}),e.jsx(be.Item,{icon:ft,className:"cursor-pointer",onClick:x,children:"Sign Out"})]})})}),e.jsx("div",{className:"p-3 w-full fixed bottom-0 bg-slate-200 md:hidden z-20",children:e.jsx("div",{className:"flex flex-row items-center justify-around w-full",children:l.map((u,f)=>e.jsx("div",{children:e.jsx(oe,{to:u.link,onClick:u.onClick?u.onClick:null,children:e.jsx("div",{className:`text-2xl ${n===u.name?"provideritem-name -translate-y-1 transition-all duration-500":"text-gray-500"}`,onClick:()=>o(u.name),children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("p",{children:u.icon()}),e.jsx("p",{className:"text-xs capitalize",children:u.name})]})})})},f))})})]})}function vt(t){return Te({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Edit"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M3.548,20.938h16.9a.5.5,0,0,0,0-1H3.548a.5.5,0,0,0,0,1Z"},child:[]},{tag:"path",attr:{d:"M9.71,17.18a2.587,2.587,0,0,0,1.12-.65l9.54-9.54a1.75,1.75,0,0,0,0-2.47l-.94-.93a1.788,1.788,0,0,0-2.47,0L7.42,13.12a2.473,2.473,0,0,0-.64,1.12L6.04,17a.737.737,0,0,0,.19.72.767.767,0,0,0,.53.22Zm.41-1.36a1.468,1.468,0,0,1-.67.39l-.97.26-1-1,.26-.97a1.521,1.521,0,0,1,.39-.67l.38-.37,1.99,1.99Zm1.09-1.08L9.22,12.75l6.73-6.73,1.99,1.99Zm8.45-8.45L18.65,7.3,16.66,5.31l1.01-1.02a.748.748,0,0,1,1.06,0l.93.94A.754.754,0,0,1,19.66,6.29Z"},child:[]}]}]}]})(t)}function Us(t){return Te({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M8.96712 9.60787C9.14342 9.26307 9.37775 8.94649 9.67076 8.65806C9.85736 8.47395 10.0257 8.28064 10.1757 8.07816C10.2158 7.96017 10.2532 7.8333 10.2873 7.69683C10.3615 7.40021 10.5382 7.15079 10.7739 6.98253C10.945 6.51978 11.0303 6.0252 11.0303 5.49953C11.0303 5.08664 10.9769 4.68802 10.8698 4.30397C10.763 3.92088 10.6112 3.56285 10.4143 3.23016C10.2177 2.89376 9.98251 2.5891 9.70882 2.31641C9.43513 2.0437 9.12939 1.80938 8.79183 1.61351C8.45803 1.41739 8.09883 1.2662 7.71451 1.15983C7.32923 1.0532 6.92934 1 6.51514 1C6.10094 1 5.70106 1.0532 5.31578 1.15983C4.93146 1.2662 4.56979 1.41764 4.23195 1.61364C3.89858 1.80953 3.59503 2.04383 3.32146 2.31641C3.04777 2.58911 2.81257 2.89377 2.61595 3.23018C2.41907 3.56286 2.26728 3.92089 2.16048 4.30397C2.05342 4.68802 2 5.08664 2 5.49953C2 6.11672 2.11756 6.69107 2.35361 7.22134C2.58896 7.75003 2.92468 8.22903 3.35953 8.65806C3.69832 8.99156 3.95683 9.36336 4.13553 9.77209C4.31772 10.1795 4.40927 10.622 4.40927 11.1009V12.7012C4.40927 12.8807 4.44311 13.0503 4.51141 13.2091C4.57895 13.3661 4.67168 13.5038 4.78961 13.6213C4.90753 13.7388 5.04564 13.8311 5.20306 13.8984C5.36223 13.9663 5.53223 14 5.71205 14H7.31823C7.49806 14 7.66806 13.9663 7.82723 13.8984C7.98464 13.8311 8.12275 13.7388 8.24068 13.6213C8.35861 13.5038 8.45134 13.3661 8.51887 13.2091C8.58718 13.0503 8.62102 12.8807 8.62102 12.7012V12.2734C8.61586 12.2723 8.61079 12.2712 8.60581 12.2701C8.54613 12.2576 8.50299 12.2525 8.48241 12.2506L8.47329 12.2498C8.1415 12.2429 7.8415 12.1066 7.62162 11.8894V12.7012C7.62162 12.7823 7.59309 12.8512 7.5314 12.9127C7.46971 12.9741 7.40022 13.0028 7.31823 13.0028H5.71205C5.63007 13.0028 5.56058 12.9741 5.49888 12.9127C5.4372 12.8512 5.40867 12.7823 5.40867 12.7012V10.5H7.35405C7.54359 10.0663 7.97213 9.76091 8.4732 9.75037L8.48232 9.7496C8.50289 9.74769 8.54604 9.74259 8.60572 9.73002C8.69843 9.7105 8.82494 9.67428 8.96712 9.60787Z"},child:[]},{tag:"path",attr:{d:"M11.5 14C12.25 11.0001 14.5 11.0001 14.5 11.0001C14.5 11.0001 12.25 11 11.5 8C10.75 11 8.5 11.0001 8.5 11.0001C8.5 11.0001 10.75 11 11.5 14Z",strokeWidth:"0.75",strokeLinejoin:"round"},child:[]},{tag:"path",attr:{d:"M12.926 13.2393C13.2849 12.977 13.5538 12.6663 13.7328 12.4216C13.8545 12.2553 14.1455 12.2553 14.2672 12.4216C14.4462 12.6663 14.7151 12.977 15.074 13.2393C15.2403 13.3609 15.2403 13.6393 15.074 13.7609C14.7151 14.0231 14.4462 14.3337 14.2672 14.5784C14.1455 14.7447 13.8545 14.7447 13.7328 14.5784C13.5538 14.3337 13.2849 14.0231 12.926 13.7609C12.7597 13.6393 12.7597 13.3609 12.926 13.2393Z"},child:[]}]})(t)}function Hs(){const{currentUser:t}=V(p=>p.user),{currentProvider:s}=V(p=>p.provider),[a,n]=i.useState(!1),[o,r]=i.useState(0),{bookings:x}=V(p=>p.booking),l=async()=>{try{n(!0);const A=await(await fetch("/server/provider/sendotp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.email})})).json();A.success===!1&&console.log("Error:",A.message)}catch(p){console.error("Error:",p)}},u=async()=>{try{const A=await(await fetch("/server/provider/verifyotp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.email,otp:o})})).json();if(console.log("verified Data",A),A.success===!1){console.log("Error:",A.message),Z.error(A.message);return}A.success===!0&&(Z.success("Profile Verified"),n(!1))}catch(p){console.log(p),Z.error("An error occurred while verifying the OTP.")}};function f(){n(!1)}const F=[{label:"New",description:"Details about your account.",icon:os},{label:"Claim Profile",description:"Details about your account.",icon:Cs},{label:"Experience & Skills",description:"Verify your information.",icon:bt},{label:"Skilled Provider",description:"Complete your setup.",icon:ks},{label:"1Step Pro",description:"Complete your setup.",icon:Us}];return e.jsx("div",{className:"w-full flex bg-slate-100 justify-center items-center mx-auto mb-16 md:mb-0",children:e.jsxs("div",{className:"p-4 flex flex-col lg:flex-row gap-2 w-full",children:[e.jsxs("div",{className:"flex flex-col gap-2 lg:w-auto",children:[e.jsxs("div",{className:"border border-slate-200 rounded-md bg-white",children:[e.jsx("h1",{className:"text-gray font-semibold text-xl p-2.5 border-b",children:"Profile"}),e.jsxs("div",{className:"relative flex flex-col items-center",children:[e.jsx(oe,{to:"/dashboard?tab=profile",children:e.jsx(vt,{className:"size-6 right-3 top-3 absolute cursor-pointer text-gray hover:text-slate-400 transition-all duration-200 ease-in"})}),e.jsxs("div",{className:"p-4 w-[280px] flex flex-col items-center",children:[e.jsx("img",{src:t.profilePicture||"https://i.ibb.co/tKQH4zp/defaultprofile.jpg",alt:"profile",className:"w-28 h-28 object-cover rounded-full"}),e.jsx("h1",{className:"text-gray text-base font-semibold mt-2",children:t.username})]})]})]}),e.jsx("div",{className:"border border-slate-200 rounded-md bg-gradient-to-r from-purple-600 via-purple-600 to-rose-500",children:e.jsx("div",{className:"p-4 flex flex-col items-start",children:e.jsx("h1",{className:"text-white",children:"Become A 1Step Pro"})})}),e.jsx("div",{className:""})]}),e.jsxs("div",{className:"flex flex-col gap-2 flex-grow",children:[s?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative flex flex-col border border-slate-200 bg-white p-1 rounded-md",children:[e.jsx("h1",{className:"p-2 border-b text-gray font-semibold text-xl",children:"Provider Status"}),e.jsx(oe,{to:"/dashboard?tab=providers",children:e.jsx(vt,{className:"size-6 right-3 top-3 absolute cursor-pointer text-gray hover:text-slate-400 transition-all duration-200 ease-in"})}),e.jsxs("div",{className:"w-full mt-2",children:[e.jsx("div",{className:"w-full flex items-center md:px-24 py-4 p-6 mb-20",children:e.jsx(xe.Stepper,{activeStep:Number(s.status),children:F.map((p,A)=>e.jsxs(xe.Step,{className:"h-8 w-8 bg-blue-200",children:[e.jsx("p",{className:"text-[15px] mt-2 ml-2",children:p.icon()}),e.jsx("div",{className:"flex text-gray items-center justify-center mt-8 md:text-base text-[10px]",children:p.label==="Claim Profile"?e.jsx(e.Fragment,{children:s.status===0?e.jsx("p",{children:"Claim Profile"}):e.jsx("p",{className:"text-green-600",children:"Profile Claimed"})}):p.label==="Experience & Skills"?e.jsx(e.Fragment,{children:s.status===1?e.jsx("p",{className:"text-gray-600",children:"Experience & Skills"}):e.jsx("p",{className:"text-gray-400",children:"Experience & Skills"})}):p.label==="Skilled Provider"?e.jsx(e.Fragment,{children:s.status===2?e.jsx("p",{className:"text-gray-600",children:"Skilled Provider"}):e.jsx("p",{className:"text-gray-600",children:"Skilled Provider"})}):p.label==="1Step Pro"?e.jsx(e.Fragment,{children:s.status===3?e.jsx("p",{className:"text-gray-600",children:"1Step Pro"}):e.jsx("p",{className:"text-gray-600",children:"1Step Pro"})}):e.jsx("p",{children:p.label==="New"?e.jsx("p",{className:"",children:"New"}):e.jsx(e.Fragment,{})})})]},A))})}),e.jsxs("div",{className:"border-t p-4",children:[s.status===0&&s.verified===!1&&e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"flex flex-row items-center gap-2 text-xl font-semibold text-slate-800",children:["Benefit of claiming profile",e.jsx(Bt,{className:"size-6"})]}),e.jsxs("ul",{className:"list-disc list-inside mt-2 text-gray-800 mb-4",children:[e.jsx("li",{children:"Get verified badge on your profile."}),e.jsx("li",{children:"Get more visibility and attract more."})]})]}),e.jsx("div",{className:"flex justify-center border border-slate-200 p-4 rounded-lg bg-sky-100",children:e.jsxs("button",{className:"flex flex-row space-x-2 items-center",onClick:l,children:[e.jsx(Ue,{className:"text-amber-500"}),e.jsx("p",{className:"flex flex-row items-center underline text-gray font-semibold",children:"Claim Your Profile Now"})]})})]}),s.status===1&&e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"flex flex-row items-center gap-1 text-xl font-semibold text-slate-800",children:["Experienced Provider",e.jsx(bt,{className:"size-5"})]}),e.jsxs("ul",{className:"list-disc list-inside mt-2 text-gray-800 mb-4",children:[e.jsx("li",{children:"With this status, you gain visibility x2"}),e.jsx("li",{children:"Expert care, backed by years of experience."}),e.jsx("li",{children:"Your well-being is our top priority, shaped by years of experience."})]})]}),e.jsx("div",{className:"flex justify-center border border-slate-200 p-4 rounded-lg bg-sky-100",children:e.jsxs("button",{className:"flex flex-row space-x-2 items-center",children:[e.jsx(Ue,{className:"text-amber-500"}),e.jsx("p",{className:"flex flex-row items-center underline text-gray font-semibold",children:"Verify your Experience"})]})})]})]}),e.jsxs(we,{show:a,onClose:f,popup:!0,children:[e.jsx(we.Header,{}),e.jsx(we.Body,{children:e.jsxs("div",{className:"flex flex-col text-xl font-semibold text-gray gap-4",children:["OTP Sended to your ",s.email,e.jsxs("div",{className:"flex flex-col gap-4 p-10",children:[e.jsx("label",{children:"Enter OTP"}),e.jsx("div",{className:"flex flex-row items-center justify-center",children:e.jsx(Ds,{value:o,onChange:r,numInputs:6,renderInput:p=>e.jsx("input",{...p,style:{width:"2.5rem",height:"3rem",margin:"0 0.5rem",fontSize:"1.5rem",borderRadius:"4px",border:"1px solid rgba(0,0,0,0.3)",color:"black",backgroundColor:"white"}})})}),e.jsx(ut,{onClick:u,children:"Verify OTP"})]})]})})]})]})]})}):e.jsx("div",{className:"flex border border-slate-200 bg-white p-1 rounded-md w-full",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center p-4 w-full",children:[e.jsx("img",{src:ls,alt:"profile",className:"flex items-center h-24 w-24 rounded-full bg-gray-400 p-1"}),e.jsxs("div",{className:"p-5 flex flex-col md:flex-row md:justify-between items-center w-full md:gap-6",children:[e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("p",{className:"text-2xl font-semibold text-gray-800",children:"Can't find a profile for your practice?"}),e.jsx("h4",{className:"text-sm font-semibold text-gray-600",children:"we might not have a profile for you yet. The good news - you can create a profile for free!"})]}),e.jsx("div",{className:"mt-4",children:e.jsx(oe,{to:"/dashboard?tab=providers",children:e.jsx(ut,{children:"Create Profile"})})})]})]})}),x&&x.length>0?e.jsxs("div",{className:"flex flex-col border border-slate-200 bg-white p-2 rounded-md",children:[e.jsxs("div",{className:"flex flex-row justify-between border-b mb-4",children:[e.jsx("h1",{className:"p-3 font-semibold text-xl text-gray",children:"Your Recent Bookings"}),e.jsx("button",{className:"p-3 md:text-sm text-xs font-bold text-gray hover:text-gray-500 transition-all duration-200 ease-in-out",children:e.jsx(oe,{to:"/dashboard?tag=Bookings",children:"View All"})})]}),e.jsx("div",{className:"overflow-auto w-full",children:e.jsxs(g,{hoverable:!0,children:[e.jsxs(g.Head,{children:[e.jsx(g.HeadCell,{children:"Provider Name"}),e.jsx(g.HeadCell,{children:"Services"}),e.jsx(g.HeadCell,{children:"Scheduled Time"}),e.jsx(g.HeadCell,{children:"Slot Time"}),e.jsx(g.HeadCell,{children:"Session Type"}),e.jsx(g.HeadCell,{children:"Note"}),e.jsx(g.HeadCell,{children:"Status"}),e.jsx(g.HeadCell,{children:"Process"})]}),x.map(p=>e.jsx(g.Body,{className:"divide-y",children:e.jsxs(g.Row,{className:`text-gray-600 rounded-lg ${p.status==="pending"&&"border-l-4 border-amber-300 bg-amber-100"} ${p.status==="approved"&&"border-l-4 border-emerald-400 bg-emerald-100"}  ${p.status==="rejected"&&"border-l-4 border-red-500 bg-red-100"}`,children:[e.jsx(g.Cell,{children:p.providerDetails.fullName}),e.jsx(g.Cell,{children:p.service.join(", ")}),e.jsx(g.Cell,{children:new Date(p.scheduledTime.date).toLocaleDateString()}),e.jsx(g.Cell,{children:p.scheduledTime.slot}),e.jsx(g.Cell,{children:p.sessionType}),e.jsx(g.Cell,{children:p.note}),e.jsxs(g.Cell,{children:[p.status==="pending"?e.jsx("p",{className:"",children:e.jsx(lt,{})}):"",p.status==="approved"?e.jsx("p",{children:e.jsx(ot,{})}):"",p.status==="rejected"?e.jsx("p",{className:"justify-center items-center",children:e.jsx(it,{})}):""]}),e.jsx(g.Cell,{children:e.jsx("p",{children:p.status})})]})},p._id))]})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center border border-slate-200 bg-white p-4 rounded-md w-full",children:[e.jsx("h1",{className:"text-gray-800 text-xl font-semibold mb-4",children:"No Bookings"}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsx(nt,{})})]})]})]})})}function qs(){var te,U,J,se,H,ee,N,P,M,$,Q,m,D,L,d,y;const{currentUser:t,error:s}=V(h=>h.user),a=pe(),[n,o]=i.useState(!1),[r,x]=i.useState(!1),l=i.useRef(null),[u,f]=i.useState(),[F,p]=i.useState(),[A,k]=i.useState(!1),[T,w]=i.useState(!0),[O,G]=i.useState(!0),[b,I]=i.useState({isParent:!1,parentDetails:{fullName:"",lookingFor:[],childName:"",dob:"",gender:"",height:"",weight:"",bloodGroup:"",medicalHistory:"",allergies:"",emergencyContact:F,insurance:"",address:"",phoneNumber:u}}),z=h=>{let v=h.target.value;const _=h.target.id,C={fullName:25,childName:15,bloodGroup:10,height:3,weight:3,medicalHistory:30,allergies:30,insurance:30,address:100};_==="dob"&&!/^\d{4}-\d{2}-\d{2}$/.test(v)||(_==="fullName"&&(v=v.replace(/[^a-zA-Z\s]/g,"")),!(C[_]&&v.length>C[_])&&(h.target.id==="phoneNumber"&&(v.length!==10?w(!1):w(!0)),h.target.id==="isParent"?(v=h.target.value==="Yes",I({...b,isParent:v})):I({...b,parentDetails:{...b.parentDetails,[h.target.id]:v}}),k(!0)))},X=async h=>{var v,_;if(h.preventDefault(),!!A){if(((v=b.parentDetails)==null?void 0:v.phoneNumber.length)!==13){Z.error("Phone number should be 10 digits"),w(!1);return}else w(!0);if(((_=b.parentDetails)==null?void 0:_.emergencyContact.length)!==13){Z.error("Emergency Contact should be 10 digits"),G(!1);return}else G(!0);a(Me());try{l.current.continuousStart(50),a(Me()),x(!0);const R=await(await fetch(`server/parent/updateparent/${t._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).json();if(R.success===!1){a(_e(R));return}a(et(R)),b.isParent?Z.success("Parent details updated successfully"):Z.error("Parent Details Successfully Removed"),k(!1),x(!1)}catch(C){a(_e(C))}finally{l.current.complete()}}};return i.useEffect(()=>{(async()=>{var v,_,C,R,q,W,ae,le,ie,ce,ne,ge,fe,de,ye;a(Me()),o(!0);try{const Y=await(await fetch(`server/parent/getparent/${t._id}`)).json();if(Y.success===!1)return;const Ze={isParent:Y.isParent||!1,lookingFor:((v=Y.parentDetails)==null?void 0:v.lookingFor)||[],childName:((_=Y.parentDetails)==null?void 0:_.childName)||"",fullName:((C=Y.parentDetails)==null?void 0:C.fullName)||"",dob:(R=Y.parentDetails)!=null&&R.dob?new Date((q=Y.parentDetails)==null?void 0:q.dob).toISOString().split("T")[0]:"",gender:((W=Y.parentDetails)==null?void 0:W.gender)||"",height:((ae=Y.parentDetails)==null?void 0:ae.height)||"",weight:((le=Y.parentDetails)==null?void 0:le.weight)||"",bloodGroup:((ie=Y.parentDetails)==null?void 0:ie.bloodGroup)||"",medicalHistory:((ce=Y.parentDetails)==null?void 0:ce.medicalHistory)||"",allergies:((ne=Y.parentDetails)==null?void 0:ne.allergies)||"",emergencyContact:((ge=Y.parentDetails)==null?void 0:ge.emergencyContact)||"",insurance:((fe=Y.parentDetails)==null?void 0:fe.insurance)||"",address:((de=Y.parentDetails)==null?void 0:de.address)||"",phoneNumber:((ye=Y.parentDetails)==null?void 0:ye.phoneNumber)||""};I({isParent:Y.isParent||!1,parentDetails:Ze}),a(et(Y))}catch(ue){console.log(ue),a(_e(ue))}o(!1)})()},[t._id,a]),e.jsxs("div",{className:"p-3 flex-col items-center rounded-lg",children:[e.jsx(Ie,{ref:l,color:"#ff9900",height:3}),n?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:e.jsx(ct,{color:"#10ebd8",loading:n,size:15})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex",children:e.jsx("h1",{className:"p-2 text-gray font-bold text-2xl",children:"Your Parent Details :"})}),e.jsxs("form",{onSubmit:X,className:"p-4 flex flex-col sm:flex-row md:gap-4 gap-4 md:w-[1200px] mx-auto justify-center",children:[e.jsxs("div",{className:"flex flex-col flex-1 gap-2",children:[e.jsx("label",{htmlFor:"isParent",className:"text-sm font-semibold text-main",children:"Are you a parent?"}),e.jsxs("select",{id:"isParent",name:"isParent",value:b.isParent?"Yes":"No",onChange:z,className:"input border-2 p-2 rounded-lg focus:ring-0",required:!0,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"Yes",children:"Yes"}),e.jsx("option",{value:"No",children:"No"})]}),e.jsx("label",{htmlFor:"gender",className:"text-sm font-semibold text-main",children:"Gender:"}),e.jsxs("select",{id:"gender",name:"gender",value:(te=b.parentDetails)==null?void 0:te.gender,onChange:z,className:"input border-2 p-2 rounded-lg  focus:outline-none focus:ring-0",required:!0,children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]}),e.jsx("label",{className:"text-sm font-semibold text-main",children:"BloodGroup*"}),e.jsx("input",{type:"text",placeholder:"BloodGroup",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0",id:"bloodGroup",required:!0,onChange:z,value:(U=b.parentDetails)==null?void 0:U.bloodGroup}),e.jsx("label",{htmlFor:"gender",className:"text-sm font-semibold text-main",children:e.jsxs("p",{className:"flex flex-row items-center",children:[!O&&e.jsx(Ue,{className:"text-red-700 text-sm"}),"Emergency Contact :"," "]})}),e.jsx(Ae,{placeholder:"Emergency Contact",className:`border-2 p-2 input rounded-lg focus:outline-none focus:ring-0 ${T?"":"error"}`,maxLength:"15",value:(J=b.parentDetails)==null?void 0:J.emergencyContact,onChange:h=>{p(h),I({...b,parentDetails:{...b.parentDetails,emergencyContact:h}}),k(!0)},required:!0}),!O&&e.jsx("p",{className:"text-sm text-red-500 font-semibold",children:"Please enter a 10-digit number"}),e.jsx("label",{htmlFor:"gender",className:"text-sm font-semibold text-main",children:"Address : (city, state, pincode)"}),e.jsx("textarea",{type:"text",placeholder:"Address",rows:3,className:"border-2 p-2 rounded-lg input focus:outline-none focus:ring-0",id:"address",required:!0,onChange:z,value:(se=b.parentDetails)==null?void 0:se.address})]}),e.jsxs("div",{className:"flex flex-col flex-1 gap-2 w-full",children:[e.jsx("label",{name:"fullName",className:"text-sm font-semibold text-main",children:"Enter your Full Name :"}),e.jsx("input",{type:"text",placeholder:"Full Name",className:"input border-2 p-2 rounded-lg focus:ring-0",id:"fullName",maxLength:"62",minLength:"5",required:!0,onChange:z,value:(H=b.parentDetails)==null?void 0:H.fullName}),e.jsx("label",{name:"fullName",className:"text-sm font-semibold text-main",children:"Enter your DOB :"}),e.jsx("input",{type:"date",placeholder:"Date of Birth",className:"input border-2 p-2 rounded-lg focus:ring-0",id:"dob",required:!0,onChange:z,value:(ee=b.parentDetails)==null?void 0:ee.dob}),e.jsx("label",{className:"text-sm font-semibold text-main",children:"Height Cm*"}),e.jsx("input",{type:"number",placeholder:"Height in Cm",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0",id:"height",required:!0,onChange:z,value:(N=b.parentDetails)==null?void 0:N.height}),e.jsx("label",{className:"text-sm font-semibold text-main",children:"Medical History*"}),e.jsx("input",{type:"text",placeholder:"Medical History",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0",id:"medicalHistory",required:!0,onChange:z,value:(P=b.parentDetails)==null?void 0:P.medicalHistory}),e.jsx("label",{htmlFor:"gender",className:"text-sm font-semibold text-main",children:"Insurance :"}),e.jsx("input",{type:"text",placeholder:"Insurance",className:"border-2 p-2 rounded-lg input focus:outline-none focus:ring-0",id:"insurance",required:!0,onChange:z,value:(M=b.parentDetails)==null?void 0:M.insurance})]}),e.jsxs("div",{className:"flex flex-col flex-1 gap-2 w-full",children:[e.jsx("label",{name:"fullName",className:"text-sm font-semibold text-main",children:"What therapy your looking for?"}),e.jsx(Es,{id:"name",options:ze,isMulti:!0,required:!0,placeholder:"looking for?",touchUi:!1,className:"border-2 rounded-lg border-slate-300 bg-white input hover:border-purple-400",defaultValue:Array.isArray(($=b.parentDetails)==null?void 0:$.lookingFor)?(Q=b.parentDetails)==null?void 0:Q.lookingFor.map(h=>ze.find(v=>v.value===h)):[],onChange:h=>{I(v=>({...v,parentDetails:{...v.parentDetails,lookingFor:h.map(_=>_.value)}})),k(!0)},styles:{control:h=>({...h,backgroundColor:"transparent",minWidth:"160px",border:"none",outline:"none",boxShadow:"none",transition:"all 0.3s ease"})}},(m=b.parentDetails)==null?void 0:m.lookingFor),e.jsx("label",{className:"text-sm font-semibold text-main",children:"Child Name*"}),e.jsx("input",{type:"text",placeholder:"Child Name",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0 ",id:"childName",required:!0,onChange:z,value:(D=b.parentDetails)==null?void 0:D.childName}),e.jsx("label",{className:"text-sm font-semibold text-main",children:"Weight Kg*"}),e.jsx("input",{type:"number",placeholder:"Weight Kg*",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0 ",id:"weight",required:!0,onChange:z,value:(L=b.parentDetails)==null?void 0:L.weight}),e.jsx("label",{className:"text-sm font-semibold text-main",children:"Allergies :"}),e.jsx("input",{type:"text",placeholder:"Allergies",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0",id:"allergies",required:!0,onChange:z,value:(d=b.parentDetails)==null?void 0:d.allergies}),e.jsx("label",{className:"text-sm font-semibold text-main",children:e.jsxs("p",{className:"flex flex-row items-center",children:[!T&&e.jsx(Ue,{className:"text-red-700 text-sm"}),"Phone Number :"," "]})}),e.jsx(Ae,{placeholder:"Enter phone number",className:`border-2 p-2 input rounded-lg focus:outline-none focus:ring-0 ${T?"":"error"}`,value:(y=b.parentDetails)==null?void 0:y.phoneNumber,onChange:h=>{f(h),I({...b,parentDetails:{...b.parentDetails,phoneNumber:h}}),k(!0)},required:!0}),!T&&e.jsx("p",{className:"text-sm text-red-500 font-semibold",children:"Please enter a 10-digit number"}),e.jsx("button",{disabled:!A||n,className:"p-2 btn-color rounded-lg mt-8 font-semibold rounded=lg uppercase hover:opacity-95 disabled:opacity-60 transition ease-in-out duration-300",children:r?"Saving...":"Save"}),s&&e.jsx("p",{className:"text-red-700 text-xs",children:s})]})]})]})]})}function Vs(){const{bookings:t}=V(n=>n.booking),{isUserBookingFetched:s}=V(n=>n.booking);console.log("isUserBookingFetched:",s);const{loading:a}=V(n=>n.booking);return e.jsx(e.Fragment,{children:e.jsx("div",{className:`table-auto md:mx-auto p-3 scrollbar scrollbar-track-slate-100 scrollbar-thumb-slate-300 max-h-screen ${t&&t.length>0?"overflow-x-scroll md:overflow-x-auto":""}`,children:a?e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"70vh"},children:e.jsx(Is,{color:"#10ebd8",loading:a,size:15})}):t&&t.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"px-2 text-2xl text-gray font-bold mb-4",children:"Your Bookings :"}),e.jsxs(g,{hoverable:!0,className:"shadow-md w-full",children:[e.jsxs(g.Head,{children:[e.jsx(g.HeadCell,{children:"Provider Name"}),e.jsx(g.HeadCell,{children:"Services"}),e.jsx(g.HeadCell,{children:"Scheduled Time"}),e.jsx(g.HeadCell,{children:"Slot Time"}),e.jsx(g.HeadCell,{children:"Session Type"}),e.jsx(g.HeadCell,{children:"Note"}),e.jsx(g.HeadCell,{children:"Status"}),e.jsx(g.HeadCell,{children:"Process"})]}),t.map(n=>e.jsx(g.Body,{className:"divide-y",children:e.jsxs(g.Row,{className:`text-gray-600 rounded-lg ${n.status==="pending"&&"border-l-4 border-amber-300 bg-amber-100"} ${n.status==="approved"&&"border-l-4 border-emerald-400 bg-emerald-100"}  ${n.status==="rejected"&&"border-l-4 border-red-500 bg-red-100"}`,children:[e.jsx(g.Cell,{children:n.providerDetails.fullName}),e.jsx(g.Cell,{children:n.service.join(", ")}),e.jsx(g.Cell,{children:new Date(n.scheduledTime.date).toLocaleDateString()}),e.jsx(g.Cell,{children:n.scheduledTime.slot}),e.jsx(g.Cell,{children:n.sessionType}),e.jsx(g.Cell,{children:n.note}),e.jsxs(g.Cell,{children:[n.status==="pending"?e.jsx("p",{className:"",children:e.jsx(lt,{})}):"",n.status==="approved"?e.jsx("p",{children:e.jsx(ot,{})}):"",n.status==="rejected"?e.jsx("p",{className:"justify-center items-center",children:e.jsx(it,{})}):""]}),e.jsx(g.Cell,{children:e.jsx("p",{children:n.status})})]})},n._id))]})]}):e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl text-gray font-bold mb-5 max-h-screen",children:"No Bookings Yet"}),e.jsx("div",{className:"flex flex-col mx-auto items-center",children:e.jsx(nt,{})})]})})})}function Gs(){const{currentUser:t}=V(N=>N.user),[s,a]=i.useState(""),[n,o]=i.useState(""),[r,x]=i.useState({isParent:!0,parentDetails:{fullName:"",lookingFor:[],childName:"",dob:"",gender:"",height:"",weight:"",bloodGroup:"",medicalHistory:"",allergies:"",emergencyContact:n,insurance:"",address:"",phoneNumber:s}}),[l,u]=i.useState(0),[f,F]=i.useState({}),[p,A]=i.useState(!1),[k,T]=i.useState(5),w=pe(),O=()=>{u(l-1)},b=l/5*100,I=N=>{let{name:P,value:M}=N.target;const $=P.split(".");P==="parentDetails.childName"&&(M=M.replace(/[^a-zA-Z\s]/g,"")),P==="parentDetails.fullName"&&(M=M.replace(/[^a-zA-Z\s]/g,"")),!(P==="parentDetails.height"&&M.length>3)&&(P==="parentDetails.weight"&&M.length>3||P==="parentDetails.dob"&&!/^\d{4}-\d{2}-\d{2}$/.test(M)||($.length===2?x(Q=>({...Q,[$[0]]:{...Q[$[0]],[$[1]]:M}})):x(Q=>({...Q,[P]:M}))))},z=async N=>{N.preventDefault(),w(Me());try{w(Me());const M=await(await fetch(`server/parent/updateparent/${t._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).json();if(M.success===!1){w(_e(M));return}w(et(M)),Z.success("Parent saved successfully")}catch(P){w(_e(P))}},X=()=>{const N={};return l===0&&r.parentDetails.lookingFor.length===0&&(N.lookingFor="Please select at least one service"),l===0&&!/^[A-Za-z\s]+$/.test(r.parentDetails.fullName)&&(N.fullName="Name must contains only alphabets"),l===3&&!/^\+\d{12}$/.test(r.parentDetails.emergencyContact)&&(N.emergencyContact="Emergency contact must be a valid phone number"),l===1&&!/^[A-Za-z\s]+$/.test(r.parentDetails.childName)&&(N.childName="Name must contains only alphabets"),l===4&&!/^\+\d{12}$/.test(r.parentDetails.phoneNumber)&&(N.phoneNumber="Emergency contact must be a valid phone number"),l===1&&!r.parentDetails.gender&&(N.gender="Please choose a gender"),F(N),Object.keys(N).length===0},te=N=>{N.preventDefault();try{if(X()){const P=window.innerWidth<=768?140:240;window.scrollTo({top:P,behavior:"smooth"}),u(l+1)}}catch{console.log("Failed to save data.")}},U=(N,P)=>{x(M=>{const $=M.parentDetails[N]||[],Q=$.includes(P)?$.filter(m=>m!==P):[...$,P];return{...M,parentDetails:{...M.parentDetails,[N]:Q}}})},J=N=>{switch(N){case 0:return"Providing accurate personal information helps us tailor our services to meet your specific needs.";case 1:return"Accurate child information ensures appropriate and personalized care for your child.";case 2:return"Providing accurate physical information helps us better understand and address your child's health needs.";case 3:return"Comprehensive medical information is crucial for effective and safe medical care.";case 4:return"Providing accurate contact information ensures we can reach you when necessary.";default:return""}},se=N=>{switch(N){case 0:return"Rules: Must be at least 3 characters long. Ensure it's your legal name for accurate records. Indicate the specific service you're looking for. Helps us direct you to the right resources and support.";case 1:return"Rules: Ensure it matches your child's legal documents. Must be a valid date. Select from Male, Female, or Other. Helps us in providing gender-appropriate care.";case 2:return"Rules: Must be a positive number in centimeters. Helps us track growth and development accurately. Must be a positive number in kilograms. Crucial for determining appropriate dosages and care. Indicate a valid blood group type (eg, A+, B-, O+). Essential for emergency medical situations.";case 3:return"Rules: Optional but recommended. Helps us understand past medical conditions for better care. Optional but recommended. Helps us avoid substances that may cause allergic reactions. Must be a valid phone number. Essential for contacting you in urgent situations. Provide details if available for processing insurance claims.";case 4:return"Rules: Helps us locate you for home visits or deliveries. Must be a valid phone number. Crucial for communication and follow-ups.";default:return""}},H=N=>{const M=se(N).split(".").filter($=>$.trim()!=="");return e.jsx("ul",{className:"menu-subTextColor mt-2 text-xs md:text-lg",children:M.map(($,Q)=>e.jsxs("li",{className:"mb-2",children:[$.trim(),"."]},Q))})},ee=(N,P)=>N.map(M=>{var $;return e.jsx("button",{type:"button",disabled:M.isDisabled,className:`p-3 m-1 rounded-lg border ${($=r.parentDetails[P])!=null&&$.includes(M.value)?"menu-Button text-white":`bg-blue-100 ${M.isDisabled?"text-gray-400":"text-gray-700"}`}`,onClick:()=>U(P,M.value),children:M.value},M.value)});return p?e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-green-600",children:"Data saved successfully"}),e.jsxs("h1",{className:"text-3xl font-bold text-center text-green-600",children:["Redirecting to dashboard in ",k]})]}):e.jsxs("div",{children:[e.jsx("div",{className:"fixed progress-bg w-full md:h-1 h-1 top-0 z-50 ",children:e.jsx("div",{className:"progress-bgs h-full transition-width duration-500 ease-in-out",style:{width:`${b}%`}})}),e.jsxs("div",{className:"container flex flex-col mx-auto mb-16 md:mb-0",children:[e.jsx("h1",{className:"text-2xl m-4 text-left font-bold text-gray",children:"Fill the form for Parent Profile :"}),e.jsxs("div",{className:"flex flex-col md:flex-row md:gap-10 rounded-lg justify-center items-center",children:[e.jsx("div",{className:"flex-col h-auto p-2 max-w-lg text-left",children:e.jsxs("div",{className:"border-l-4 menu-borderColor md:p-6 lg:p-8 p-4 secondary-bg rounded-3xl ",children:[e.jsxs("h2",{className:"flex flex-row  items-center gap-2 menu-textColor text-2xl font-bold",children:[e.jsx(Mt,{})," Good To Know"]}),e.jsx("p",{className:"menu-subTextColor mt-2 text-xs md:text-lg justify-between",children:J(l)}),e.jsx("span",{className:"menu-subTextColor mt-2 text-xs md:text-lg justify-between",children:H(l)})]})}),e.jsxs("form",{onSubmit:te,className:"w-full md:w-[500px]",children:[l===0&&e.jsxs("div",{className:"flex flex-col p-6 rounded-lg",children:[e.jsx("label",{className:"p-1 menu-headTextColor font-bold mb-2",children:"Parent Name :"}),e.jsx("input",{type:"text",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0",placeholder:"full name",onChange:I,value:r.parentDetails.fullName,name:"parentDetails.fullName",maxLength:25,required:!0}),f.fullName&&e.jsx("p",{className:"text-red-500 font-serif text-sm mt-1",children:f.fullName}),e.jsx("p",{className:"font-bold menu-headTextColor mt-5 mb-4",children:"What service are you looking for ?"}),e.jsx("p",{className:"flex flex-col max-h-64 overflow-y-auto",children:ee(ze,"lookingFor")}),f.lookingFor&&e.jsx("p",{className:"text-red-500 font-serif text-sm mt-1",children:f.lookingFor}),e.jsxs("div",{className:"flex justify-center mt-4 gap-4",children:[e.jsx("button",{className:"p-3 px-8 rounded-xl bg-slate-200 text-slate-400",type:"submit",disabled:!0,children:"Back"}),e.jsx("button",{className:"p-3 px-8 rounded-xl btn-color text-white font-semibold text-center hover:opacity-95",type:"submit",children:"Next"})]})]}),l===1&&e.jsxs("div",{className:"p-6 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold menu-headTextColor mb-10",children:"Child Information"}),e.jsx("label",{className:"mb-2 menu-headTextColor font-bold",children:"Child Name"}),e.jsx("input",{type:"text",className:"w-full p-3 rounded-lg border-gray-300 mt-5 mb-5 input border-2 focus:outline-none focus:ring-0",placeholder:"Enter child fullname",onChange:I,value:r.parentDetails.childName,name:"parentDetails.childName",maxLength:25,required:!0}),f.childName&&e.jsx("p",{className:"text-red-500 font-serif text-sm mt-1",children:f.childName}),e.jsx("label",{className:"menu-headTextColor font-bold mt-5",children:"Date of Birth"}),e.jsx("input",{type:"date",placeholder:"select date",className:"w-full p-3 rounded-lg border-gray-300 mt-5 input border-2 focus:outline-none focus:ring-0",value:r.parentDetails.dob,onChange:I,name:"parentDetails.dob",required:!0}),e.jsxs("div",{className:"mt-5",children:[e.jsx("label",{htmlFor:"gender",className:"block menu-headTextColor font-bold mb-5 ",children:"Gender"}),e.jsxs("select",{id:"gender",name:"parentDetails.gender",onChange:I,value:r.parentDetails.gender,placeholder:"select gender",className:"w-full p-3 rounded-lg border-gray-300 mb-5 input border-2 focus:outline-none focus:ring-0",children:[e.jsx("option",{value:"",disabled:!0,children:"select a gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"})]}),f.gender&&e.jsx("p",{className:"text-red-500 font-serif text-sm mt-1",children:f.gender})]}),e.jsxs("div",{className:"flex justify-center mt-4 gap-4",children:[e.jsx("button",{className:"p-3 px-8 rounded-xl bg-slate-300 text-slate-600",type:"button",onClick:O,children:"Back"}),e.jsx("button",{className:"p-3 px-8 rounded-xl btn-color text-white font-semibold text-center hover:opacity-95",type:"submit",children:"Next"})]})]}),l===2&&e.jsxs("div",{className:"p-6 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold menu-headTextColor mb-10",children:"Physical Information"}),e.jsx("label",{className:"mb-5 menu-headTextColor font-bold",children:"Height"}),e.jsx("input",{type:"number",className:"w-full p-3 rounded-lg border-gray-300 mt-5 mb-5 input border-2 focus:outline-none focus:ring-0",placeholder:"Enter height in cm",onChange:I,value:r.parentDetails.height,name:"parentDetails.height",required:!0}),e.jsx("label",{className:"mt-5 menu-headTextColor font-bold",children:"Weight"}),e.jsx("input",{type:"number",className:"w-full p-3 rounded-lg border-gray-300 mb-5 mt-5 input border-2 focus:outline-none focus:ring-0",placeholder:"Enter weight in kg",onChange:I,value:r.parentDetails.weight,name:"parentDetails.weight",required:!0}),e.jsx("label",{className:"mb-5 menu-headTextColor font-bold",children:"Blood Group"}),e.jsx("input",{type:"text",className:"w-full p-3 rounded-lg border-gray-300 mb-5 mt-5 input border-2 focus:outline-none focus:ring-0",placeholder:"Enter blood group (e.g., A+, B-, O+)",onChange:I,value:r.parentDetails.bloodGroup,name:"parentDetails.bloodGroup",maxLength:10,required:!0}),e.jsxs("div",{className:"flex justify-center mt-4 gap-4",children:[e.jsx("button",{className:"p-3 px-8 rounded-xl bg-slate-300 text-slate-600",type:"button",onClick:O,children:"Back"}),e.jsx("button",{className:"p-3 px-8 rounded-xl btn-color text-white font-semibold text-center hover:opacity-95",type:"submit",children:"Next"})]})]}),l===3&&e.jsxs("div",{className:"p-6 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold menu-headTextColor mb-10",children:"Medical Information"}),e.jsx("label",{className:"mt-5 menu-headTextColor font-bold",children:"Medical History"}),e.jsx("input",{type:"textarea",className:"w-full p-3 rounded-lg border-gray-300 mb-5 mt-5 input border-2 focus:outline-none focus:ring-0",placeholder:"Enter Medical History",onChange:I,value:r.parentDetails.medicalHistory,name:"parentDetails.medicalHistory",required:!0,maxLength:30}),e.jsx("label",{className:"mt-5 menu-headTextColor font-bold",children:"Allergies"}),e.jsx("input",{type:"textarea",className:"w-full p-3 rounded-lg border-gray-300 mb-5 mt-5 input border-2 focus:outline-none focus:ring-0",placeholder:"Enter any allergies",onChange:I,value:r.parentDetails.allergies,name:"parentDetails.allergies",maxLength:30,required:!0}),e.jsx("label",{className:"mt-5 menu-headTextColor font-bold",children:"Emergency Contact"}),e.jsx(Ae,{placeholder:"Enter emergency contact number",className:"border-2 p-2 mt-2 mb-4 input rounded-lg focus:outline-none focus:ring-0 w-full",value:r.parentDetails.emergencyContact,maxLength:15,onChange:N=>{o(N),x(P=>({...P,parentDetails:{...P.parentDetails,emergencyContact:N}}))}}),f.emergencyContact&&e.jsx("p",{className:"text-red-500 font-serif text-sm mt-1",children:f.emergencyContact}),e.jsx("label",{className:"mb-5 menu-headTextColor font-bold",children:"Insurance"}),e.jsx("input",{type:"text",className:"w-full p-3 rounded-lg border-gray-300 mb-5 mt-5 input border-2 focus:outline-none focus:ring-0",placeholder:"Enter insurance details",onChange:I,value:r.parentDetails.insurance,name:"parentDetails.insurance",required:!0}),e.jsxs("div",{className:"flex justify-center mt-4 gap-4",children:[e.jsx("button",{className:"p-3 px-8 rounded-xl bg-slate-300 text-slate-600",type:"button",onClick:O,children:"Back"}),e.jsx("button",{className:"p-3 px-8 rounded-xl btn-color text-white font-semibold text-center hover:opacity-95",type:"submit",children:"Next"})]})]}),l===4&&e.jsx("div",{className:"p-6 rounded-lg",children:e.jsxs("form",{children:[e.jsx("p",{className:"text-2xl font-bold menu-headTextColor mb-10",children:"Contact Information"}),e.jsx("label",{className:"mb-5 menu-headTextColor font-bold",children:"Address"}),e.jsx("input",{type:"textarea",className:"w-full p-3 rounded-lg border-gray-300 mb-5 mt-5 input border-2 focus:outline-none focus:ring-0",placeholder:"Enter your full address",onChange:I,value:r.parentDetails.address,name:"parentDetails.address",required:!0}),e.jsx("label",{className:"mb-5 menu-headTextColor font-bold",children:"Phone Number"}),e.jsx(Ae,{placeholder:"Enter phone number",className:"border-2 p-2 mt-2 mb-4 input rounded-lg focus:outline-none focus:ring-0 w-full",value:r.parentDetails.phoneNumber,maxLength:15,onChange:N=>{a(N),x(P=>({...P,parentDetails:{...P.parentDetails,phoneNumber:N}}))}}),f.phoneNumber&&e.jsx("p",{className:"text-red-500 font-serif text-sm mt-1",children:f.phoneNumber}),e.jsxs("div",{className:"flex justify-center mt-4 gap-4",children:[e.jsx("button",{className:"p-3 px-8 rounded-xl bg-slate-300 text-slate-600",type:"button",onClick:O,children:"Back"}),e.jsx("button",{className:"p-3 px-8 rounded-xl btn-color text-white font-semibold text-center hover:opacity-95",type:"button",onClick:z,children:"Save"})]})]})})]})]})]})]})}function Ws(){const[t,s]=i.useState("Profile setting"),{currentUser:a}=V(k=>k.user),[n,o]=i.useState(!1),r=Ye(),x=pe(),l=_t(),{bookings:u,hasApprovedBooking:f,lastSeenBookingId:F}=V(k=>k.booking),p=i.useMemo(()=>[{title:"Profile setting"},{title:"Parent Details"},{title:"Bookings"}],[]);i.useEffect(()=>{t!=="Bookings"&&o(!1)},[t]),i.useEffect(()=>{if(Array.isArray(u)){const k=u.filter(T=>T.status==="approved");if(k.length>0){const T=k[k.length-1];T._id!==F&&(x(mt(!0)),x(xt(T._id)))}}},[u,x,F]),i.useEffect(()=>{const T=new URLSearchParams(r.search).get("tag");T&&p.find(O=>O.title===T)&&s(T)},[r.search,p]);const A=(k,T)=>{if(k.preventDefault(),s(T),l(`?tag=${T}`),T==="Bookings"&&(o(!1),u&&u.length>0)){const w=u.filter(O=>O.status==="approved");if(w.length>0){const O=w[w.length-1];x(xt(O._id)),x(mt(!1))}}};return e.jsxs("div",{className:"flex flex-col transition-all duration-500 ",children:[e.jsx("div",{className:"flex flex-row",children:p.map((k,T)=>e.jsx("nav",{children:e.jsx("div",{className:`border-b-2 hover:text-amber-500 hover:bg-amber-100 duration-150 ${t===k.title?"border-amber-500 ":""}`,children:e.jsx("ul",{className:"flex max-w-screen-2xl overflow-x-auto lg:px-4",children:e.jsx("li",{className:"py-1",children:e.jsx(oe,{to:`?tag=${k.title}`,className:"block py-1.5 px-2 rounded-t-lg md:text-base text-sm text-gray-700 ",onClick:w=>A(w,k.title),children:e.jsxs("span",{className:"flex flex-row items-center gap-1",children:[k.title,k.title==="Bookings"&&f&&e.jsx(Ss,{})]})})})})})},T))}),t==="Profile setting"&&e.jsx("div",{className:"w-full min-h-screen transition-all duration-500",children:e.jsx(Ms,{})}),t==="Parent Details"&&e.jsx("div",{className:"items-start",children:a.isParent?e.jsx(qs,{}):e.jsx(Gs,{})}),t==="Bookings"&&e.jsx("div",{className:"w-full p-2 ",children:e.jsx(Vs,{})})]})}function Ys(){const{providerBooking:t,loading:s}=V(l=>l.booking),a=pe(),{currentUser:n}=V(l=>l.user),{currentProvider:o}=V(l=>l.provider);console.log(t),i.useEffect(()=>{(async()=>{if(o)try{a(is());const f=await(await fetch(`/server/booking/getbookings/${o._id}`)).json();if(f.success===!1)return;console.log(f);const F=f.sort((p,A)=>new Date(A.createdAt)-new Date(p.createdAt));console.log(F),a(cs(F))}catch(u){console.log(u),a(ds())}})()},[o,a]);const r=async l=>{a(us(l)).then(async()=>{Z.success("Appointment Approved",{position:"bottom-left"}),provider[0]&&fetchBooking(provider[0]._id);const u=appointment.find(p=>p._id===l),F=await(await fetch("/server/booking/emailbookingAccept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u.patientDetails.email,subject:"1Step Appointment Approved",providerName:provider[0].fullName,service:u.service.join(", "),name:n.username,providerProfile:provider[0].profilePicture,slot:u.scheduledTime.slot,date:u.scheduledTime.date})})).json();if(F.success===!1){console.log("Email not sent");return}F.success===!0&&console.log("Email sent")})},x=async l=>{a(ms(l)).then(()=>{Z.error("Appointment Rejected",{position:"bottom-left"}),provider[0]&&fetchBooking(provider[0]._id)})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:`table-auto md:mx-auto p-3 scrollbar scrollbar-track-slate-100 scrollbar-thumb-slate-300 ${t?"overflow-x-scroll":""}`,children:t&&t.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl text-gray font-bold mb-5",children:"Your Appointments :"}),e.jsxs(g,{hoverable:!0,className:"shadow-md w-full",children:[e.jsxs(g.Head,{children:[e.jsx(g.HeadCell,{children:"Patient Name"}),e.jsx(g.HeadCell,{children:"Services they Need"}),e.jsx(g.HeadCell,{children:"Scheduled Time"}),e.jsx(g.HeadCell,{children:"Session Type"}),e.jsx(g.HeadCell,{children:"Note"}),e.jsx(g.HeadCell,{children:"Status"}),e.jsx(g.HeadCell,{children:"Action"})]}),t.map(l=>e.jsx(g.Body,{className:"divide-y",children:e.jsxs(g.Row,{className:"bg-white text-gray-600",children:[e.jsx(g.Cell,{children:l.patientDetails.username}),e.jsx(g.Cell,{children:l.service.join(", ")}),e.jsx(g.Cell,{children:l.scheduledTime.slot}),e.jsx(g.Cell,{children:l.sessionType}),e.jsx(g.Cell,{children:l.note}),e.jsxs(g.Cell,{children:[l.status==="pending"?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(lt,{})}):"",l.status==="approved"?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(ot,{})}):"",l.status==="rejected"?e.jsx("div",{className:"flex justify-center items-center",children:e.jsx(it,{})}):""]}),e.jsx(g.Cell,{className:"flex flex-row gap-2",children:l.status==="approved"?e.jsxs(e.Fragment,{children:[e.jsx(xe.Button,{className:"bg-emerald-600",disabled:l.status==="approved",children:"Accepted"}),e.jsx(xe.Button,{className:"bg-red-500",onClick:()=>x(l._id),children:"Reject"})]}):l.status==="pending"?e.jsxs(e.Fragment,{children:[e.jsx(xe.Button,{className:"bg-emerald-600",onClick:()=>r(l._id),children:"Accept"}),e.jsx(xe.Button,{className:"bg-red-500",onClick:()=>x(l._id),disabled:l.status==="rejected",children:"Reject"})]}):l.status==="rejected"?e.jsxs(e.Fragment,{children:[e.jsx(xe.Button,{className:"bg-emerald-600",onClick:()=>r(l._id),children:"Accepted"}),e.jsx(xe.Button,{className:"bg-red-500",onClick:()=>x(l._id),disabled:l.status==="rejected",children:"Rejected"})]}):""})]})},l._id))]})]}):e.jsx("h1",{className:"text-2xl text-gray font-bold mb-5",children:"No Appointment Yet"})})})}function Ut(t){return Te({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m21.426 11.095-17-8A.999.999 0 0 0 3.03 4.242L4.969 12 3.03 19.758a.998.998 0 0 0 1.396 1.147l17-8a1 1 0 0 0 0-1.81zM5.481 18.197l.839-3.357L12 12 6.32 9.16l-.839-3.357L18.651 12l-13.17 6.197z"},child:[]}]})(t)}var Ks=["date","verboseDate","tooltip","children"];function tt(){return tt=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},tt.apply(this,arguments)}function Zs(t,s){if(t==null)return{};var a=Js(t,s),n,o;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)n=r[o],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Js(t,s){if(t==null)return{};var a={},n=Object.keys(t),o,r;for(r=0;r<n.length;r++)o=n[r],!(s.indexOf(o)>=0)&&(a[o]=t[o]);return a}function qe(t,s){var a=t.date,n=t.verboseDate,o=t.tooltip,r=t.children,x=Zs(t,Ks),l=i.useMemo(function(){return a.toISOString()},[a]);return Ee.createElement("time",tt({ref:s},x,{dateTime:l,title:o?n:void 0}),r)}qe=Ee.forwardRef(qe);qe.propTypes={date:B.instanceOf(Date).isRequired,verboseDate:B.string,tooltip:B.bool.isRequired,children:B.string.isRequired};function st(t){"@babel/helpers - typeof";return st=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},st(t)}function Qs(t){if(Ht())return Intl.DateTimeFormat.supportedLocalesOf(t)[0]}function Ht(){var t=(typeof Intl>"u"?"undefined":st(Intl))==="object";return t&&typeof Intl.DateTimeFormat=="function"}function Ve(t){"@babel/helpers - typeof";return Ve=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ve(t)}function Xs(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function er(t,s){for(var a=0;a<s.length;a++){var n=s[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function tr(t,s,a){return s&&er(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}var qt=function(){function t(){Xs(this,t),this.cache={}}return tr(t,[{key:"get",value:function(){for(var a=this.cache,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];for(var x=0,l=o;x<l.length;x++){var u=l[x];if(Ve(a)!=="object")return;a=a[u]}return a}},{key:"put",value:function(){for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];for(var r=n.pop(),x=n.pop(),l=this.cache,u=0,f=n;u<f.length;u++){var F=f[u];Ve(l[F])!=="object"&&(l[F]={}),l=l[F]}return l[x]=r}}]),t}(),yt=new qt,sr=Ht(),rr=function(s){return s.toString()};function ar(t,s){if(!sr)return rr;var a=lr(t),n=JSON.stringify(s),o=yt.get(String(a),n)||yt.put(String(a),n,new Intl.DateTimeFormat(a,s));return function(r){return o.format(r)}}const nr=xs(ar);var Qe={};function lr(t){var s=t.toString();return Qe[s]?Qe[s]:Qe[s]=Qs(t)}function rt(t){"@babel/helpers - typeof";return rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},rt(t)}function or(t){return ir(t)?t:new Date(t)}function ir(t){return t instanceof Date||cr(t)}function cr(t){return rt(t)==="object"&&typeof t.getTime=="function"}var Nt=new qt;function dr(t,s){var a=s.polyfill,n=String(t)+":"+String(a);return Nt.get(n)||Nt.put(n,new Et(t,{polyfill:a}))}var Ke={exports:{}},De={exports:{}};(function(){var t,s,a,n,o,r;typeof performance<"u"&&performance!==null&&performance.now?De.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(De.exports=function(){return(t()-o)/1e6},s=process.hrtime,t=function(){var x;return x=s(),x[0]*1e9+x[1]},n=t(),r=process.uptime()*1e9,o=n-r):Date.now?(De.exports=function(){return Date.now()-a},a=Date.now()):(De.exports=function(){return new Date().getTime()-a},a=new Date().getTime())}).call(At);var ur=De.exports,mr=ur,he=typeof window>"u"?At:window,Le=["moz","webkit"],Ce="AnimationFrame",Se=he["request"+Ce],Fe=he["cancel"+Ce]||he["cancelRequest"+Ce];for(var Pe=0;!Se&&Pe<Le.length;Pe++)Se=he[Le[Pe]+"Request"+Ce],Fe=he[Le[Pe]+"Cancel"+Ce]||he[Le[Pe]+"CancelRequest"+Ce];if(!Se||!Fe){var Xe=0,wt=0,ve=[],xr=1e3/60;Se=function(t){if(ve.length===0){var s=mr(),a=Math.max(0,xr-(s-Xe));Xe=a+s,setTimeout(function(){var n=ve.slice(0);ve.length=0;for(var o=0;o<n.length;o++)if(!n[o].cancelled)try{n[o].callback(Xe)}catch(r){setTimeout(function(){throw r},0)}},Math.round(a))}return ve.push({handle:++wt,callback:t,cancelled:!1}),wt},Fe=function(t){for(var s=0;s<ve.length;s++)ve[s].handle===t&&(ve[s].cancelled=!0)}}Ke.exports=function(t){return Se.call(he,t)};Ke.exports.cancel=function(){Fe.apply(he,arguments)};Ke.exports.polyfill=function(t){t||(t=he),t.requestAnimationFrame=Se,t.cancelAnimationFrame=Fe};var fr=Ke.exports;const Ct=fs(fr);function hr(t,s){if(t.length===0)return 0;for(var a=0,n=t.length-1,o;a<=n;){o=Math.floor((n+a)/2);var r=s(t[o]);if(r===0)return o;if(r<0){if(a=o+1,a>n)return a}else if(n=o-1,n<a)return a}}function pr(t,s){return vr(t)||jr(t,s)||br(t,s)||gr()}function gr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function br(t,s){if(t){if(typeof t=="string")return St(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return St(t,s)}}function St(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,n=new Array(s);a<s;a++)n[a]=t[a];return n}function jr(t,s){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var n=[],o=!0,r=!1,x,l;try{for(a=a.call(t);!(o=(x=a.next()).done)&&(n.push(x.value),!(s&&n.length===s));o=!0);}catch(u){r=!0,l=u}finally{try{!o&&a.return!=null&&a.return()}finally{if(r)throw l}}return n}}function vr(t){if(Array.isArray(t))return t}const yr={instances:[],add:function(s){var a=this,n=this.instances.length===0;return Vt(this.instances,s),n&&this.start(),{stop:function(){Gt(a.instances,s),a.instances.length===0&&a.stop()},forceUpdate:function(){Tt(s,a.instances)}}},tick:function(){for(var s=Date.now();;){var a=this.instances[0];if(s>=a.nextUpdateTime)Tt(a,this.instances);else break}},scheduleNextTick:function(){var s=this;this.scheduledTick=Ct(function(){s.tick(),s.scheduleNextTick()})},start:function(){this.scheduleNextTick()},stop:function(){Ct.cancel(this.scheduledTick)}};function Nr(t){var s=t.getNextValue(),a=pr(s,2),n=a[0],o=a[1];t.setValue(n),t.nextUpdateTime=o}function Tt(t,s){Nr(t),Gt(s,t),Vt(s,t)}function Vt(t,s){var a=wr(t,s);t.splice(a,0,s)}function Gt(t,s){var a=t.indexOf(s);t.splice(a,1)}function wr(t,s){var a=s.nextUpdateTime;return hr(t,function(n){return n.nextUpdateTime===a?0:n.nextUpdateTime>a?1:-1})}function Be(t,s){return Pr(t)||Tr(t,s)||Sr(t,s)||Cr()}function Cr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sr(t,s){if(t){if(typeof t=="string")return Pt(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Pt(t,s)}}function Pt(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,n=new Array(s);a<s;a++)n[a]=t[a];return n}function Tr(t,s){var a=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(a!=null){var n=[],o=!0,r=!1,x,l;try{for(a=a.call(t);!(o=(x=a.next()).done)&&(n.push(x.value),!(s&&n.length===s));o=!0);}catch(u){r=!0,l=u}finally{try{!o&&a.return!=null&&a.return()}finally{if(r)throw l}}return n}}function Pr(t){if(Array.isArray(t))return t}function Dr(t){var s=t.date,a=t.future,n=t.locale,o=t.locales,r=t.timeStyle,x=t.round,l=t.minTimeLeft,u=t.formatVerboseDate,f=t.verboseDateFormat,F=f===void 0?_r:f,p=t.updateInterval,A=t.tick,k=A===void 0?!0:A,T=t.now,w=t.timeOffset,O=w===void 0?0:w,G=t.polyfill,b=i.useMemo(function(){return n&&(o=[n]),o.concat(Et.getDefaultLocale())},[n,o]),I=i.useMemo(function(){return dr(b,{polyfill:G})},[b,G]);s=i.useMemo(function(){return or(s)},[s]);var z=i.useCallback(function(){var m=(T||Date.now())-O,D;if(a&&m>=s.getTime()&&(m=s.getTime(),D=!0),l!==void 0){var L=s.getTime()-l*1e3;m>L&&(m=L,D=!0)}var d=I.format(s,r,{getTimeToNextUpdate:!0,now:m,future:a,round:x}),y=Be(d,2),h=y[0],v=y[1];return D?v=Mr:v=p||v||60*1e3,[h,m+v]},[s,a,r,p,x,l,I,T]),X=i.useRef();X.current=z;var te=i.useMemo(z,[]),U=Be(te,2),J=U[0],se=U[1],H=i.useState(J),ee=Be(H,2),N=ee[0],P=ee[1],M=i.useRef();i.useEffect(function(){if(k)return M.current=yr.add({getNextValue:function(){return X.current()},setValue:P,nextUpdateTime:se}),function(){return M.current.stop()}},[k]),i.useEffect(function(){if(M.current)M.current.forceUpdate();else{var m=z(),D=Be(m,1),L=D[0];P(L)}},[z]);var $=i.useMemo(function(){return nr(b,F)},[b,F]),Q=i.useMemo(function(){return u?u(s):$(s)},[s,u,$]);return{date:s,formattedDate:N,verboseDate:Q}}var kr=365*24*60*60*1e3,Mr=1e3*kr,_r={weekday:"long",day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit"},at=B.oneOfType,Dt=B.arrayOf,Ne=B.string,kt=B.number,ke=B.shape,Re=B.func,Er=at([ke({minTime:kt,formatAs:Ne.isRequired}),ke({test:Re,formatAs:Ne.isRequired}),ke({minTime:kt,format:Re.isRequired}),ke({test:Re,format:Re.isRequired})]),Ar=at([Ne,ke({steps:Dt(Er).isRequired,labels:at([Ne,Dt(Ne)]).isRequired,round:Ne})]),Fr=["date","future","timeStyle","round","minTimeLeft","locale","locales","formatVerboseDate","verboseDateFormat","updateInterval","tick","now","timeOffset","polyfill","tooltip","component","container","wrapperComponent","wrapperProps"];function Ge(){return Ge=Object.assign||function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},Ge.apply(this,arguments)}function Or(t,s){if(t==null)return{};var a=$r(t,s),n,o;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)n=r[o],!(s.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function $r(t,s){if(t==null)return{};var a={},n=Object.keys(t),o,r;for(r=0;r<n.length;r++)o=n[r],!(s.indexOf(o)>=0)&&(a[o]=t[o]);return a}function Oe(t){var s=t.date,a=t.future,n=t.timeStyle,o=t.round,r=t.minTimeLeft,x=t.locale,l=t.locales,u=l===void 0?[]:l,f=t.formatVerboseDate,F=t.verboseDateFormat,p=t.updateInterval,A=t.tick,k=t.now,T=t.timeOffset,w=t.polyfill,O=t.tooltip,G=O===void 0?!0:O,b=t.component,I=b===void 0?qe:b,z=t.container,X=t.wrapperComponent,te=t.wrapperProps,U=Or(t,Fr),J=Dr({date:s,future:a,timeStyle:n,round:o,minTimeLeft:r,locale:x,locales:u,formatVerboseDate:f,verboseDateFormat:F,updateInterval:p,tick:A,now:k,timeOffset:T,polyfill:w}),se=J.date,H=J.verboseDate,ee=J.formattedDate,N=Ee.createElement(I,Ge({date:se,verboseDate:H,tooltip:G},U),ee),P=X||z;return P?Ee.createElement(P,Ge({},te,{verboseDate:H}),N):N}Oe.propTypes={date:B.oneOfType([B.instanceOf(Date),B.number]).isRequired,locale:B.string,locales:B.arrayOf(B.string),future:B.bool,timeStyle:Ar,round:B.string,minTimeLeft:B.number,component:B.elementType,tooltip:B.bool,formatVerboseDate:B.func,verboseDateFormat:B.object,updateInterval:B.oneOfType([B.number,B.arrayOf(B.shape({threshold:B.number,interval:B.number.isRequired}))]),tick:B.bool,now:B.number,timeOffset:B.number,polyfill:B.bool,wrapperComponent:B.elementType,wrapperProps:B.object};Oe=Ee.memo(Oe);function Wt(t){return Te({tag:"svg",attr:{viewBox:"0 0 15 15",fill:"none"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor"},child:[]}]})(t)}function We(t){return Te({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z"},child:[]}]})(t)}function Lr(){const{currentUser:t}=V(d=>d.user),{currentProvider:s}=V(d=>d.provider),{user:a}=V(d=>d.provider),{onlineAllUsers:n}=V(d=>d.online),[o,r]=i.useState([]),[x,l]=i.useState(""),[u,f]=i.useState(null),[F,p]=i.useState([]),[A,k]=i.useState([]),[T,w]=i.useState([]),O=i.useRef(null),G=i.useRef(null),[b,I]=i.useState(!0),[z,X]=i.useState(!0),[te,U]=i.useState(!1),J=pe(),se="http://localhost:3000",[H,ee]=i.useState(null),[N,P]=i.useState("");i.useEffect(()=>{const d=It(se,{withCredentials:!0});return ee(d),d.emit("Online",s._id),d.on("UserOnline",({userId:y})=>{J(Ft(y))}),d.on("UserOut",({userId:y})=>{J(Ot(y))}),()=>{d.close()}},[s._id,J]),i.useEffect(()=>{if(!H)return;const d=({sender:y,message:h,provider:v,userid:_})=>{if(a!==_){Z.success(`new message from ${y}`);return}const C={sender:y,message:h,provider:v,userid:_,createdAt:new Date};k(R=>[...R,C]),w(R=>[...R,C]),r(R=>R.map(W=>W._id===a?{...W,lastMessage:C}:W))};return H.on("receiveMessage",d),()=>H.off("receiveMessage",d)},[H,a]);const M=()=>{N===""&&Z.error("Message cannot be empty"),H&&(H.emit("joinRoom",{roomId:`${u._id}_${x}`,sender:t._id,provider:x,reciever:u._id}),H.emit("sendMessage",{roomId:`${u._id}_${x}`,message:N,sender:t._id,provider:x,userid:u._id,reciever:u._id}),P(""))};i.useEffect(()=>{if(u&&H){const d=`${u._id}_${x}`;H.emit("joinRoom",{roomId:d,sender:t._id,provider:x,receiver:u._id})}},[u,H,t._id,x]),i.useEffect(()=>{(async()=>{try{I(!0),G.current.continuousStart(50);const h=await(await fetch(`/server/message/getuserprovider/${t._id}`)).json();if(h.success===!1){I(!1);return}r(h.users),l(h.providerId),I(!1),G.current.complete(50)}catch(y){I(!1),console.log(y)}})()},[t._id]);const $=d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),M())};i.useEffect(()=>{const d=()=>{O.current&&O.current.scrollTop<=50&&Q()};if(O.current){const y=O.current;return y.addEventListener("scroll",d),()=>{y&&y.removeEventListener("scroll",d)}}},[T]);const Q=()=>{const y=T.length,h=F.slice(Math.max(0,F.length-y-10),F.length-y);w([...h,...T])},m=()=>{if(O.current){const{scrollHeight:d,clientHeight:y}=O.current,h=d-y;O.current.scrollTop=h>0?h:0}};i.useEffect(()=>{m()},[F,A]);const D=()=>{U(!0)},L=async d=>{f(d),U(!1);const y=`${d._id}_${x}`;try{const v=await(await fetch(`/server/message/getmessage/${y}`)).json();if(v.success===!1)return;p(v),w(v.slice(-9));const _=v.filter(C=>!C.read&&C.sender!==t._id);await Promise.all(_.map(async C=>fetch(`/server/message/markasread/${C._id}`,{method:"PUT",headers:{"Content-Type":"application/json"}}))),w(C=>C.map(R=>R.sender!==t._id?{...R,read:!0}:R)),r(C=>C.map(q=>{var W;return q._id===d._id&&((W=q.lastMessage)==null?void 0:W.sender)!==t._id?{...q,lastMessage:{...q.lastMessage,read:!0}}:q}))}catch(h){console.log(h)}};return i.useEffect(()=>{(async()=>{try{X(!0);const h=await(await fetch(`/server/message/getuserprovider/${t._id}`)).json();if(h.success===!1)return;const _=(await Promise.all(h.users.map(async C=>{const R=`${C._id}_${h.providerId}`,[q,W]=await Promise.all([fetch(`/server/message/getlastmessage/${R}`),fetch(`/server/message/getunreadmessagescount/${R}?reciever=${t._id}`)]),ae=await q.json(),le=await W.json();return{...C,lastMessage:ae,unreadCount:le.unreadCount}}))).sort((C,R)=>{const q=new Date(C.lastMessage.createdAt);return new Date(R.lastMessage.createdAt)-q});r(_),X(!1)}catch(y){console.log(y)}})()},[t._id]),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(Ie,{color:"#722a88",ref:G,height:3,speed:1e3}),b?e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"70vh"},children:e.jsx(ct,{color:"#AFDBD8",loading:b,size:20})})}):e.jsx(e.Fragment,{children:o.length>0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-grow h-screen max-h-[390px] 2xl:max-h-[700px]",children:[e.jsx("div",{className:"w-1/4 chatbg flex flex-col items-center pt-2 pr-2 gap-2",children:o.length>0?e.jsx(e.Fragment,{children:z?e.jsx(e.Fragment,{children:o.map(d=>e.jsxs(Rt,{height:80,width:290,speed:2,viewBox:"0 0 250 60",backgroundColor:"#f5f5f5",foregroundColor:"#D1BEE0",className:"2xl:w-[900px] 2xl:h-[110px]",children:[e.jsx("circle",{cx:"127",cy:"35",r:"25",className:"md:hidden block"}),e.jsx("circle",{cx:"30",cy:"35",r:"25",className:"hidden md:block"}),e.jsx("rect",{x:"70",y:"20",width:"140",height:"8",rx:"4",className:"hidden md:block"}),e.jsx("rect",{x:"70",y:"40",width:"80",height:"8",rx:"4",className:"hidden md:block"})]},d._id))}):e.jsx(e.Fragment,{children:o.map(d=>{var h,v,_,C,R,q;const y=u&&u._id===d._id;return e.jsxs("div",{className:`w-full p-4 flex chatbox-color gap-5 border-b-2 items-center cursor-pointer ${y?"chat-selected":"messagebg"}`,onClick:()=>{J(hs(d._id)),L(d)},children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:d.profilePicture,alt:"provider logo",className:"w-9 h-9 2xl:size-20 md:w-12 md:h-12 rounded-full object-cover"}),n[d._id]?e.jsx(We,{className:"absolute text-green-400 top-0 right-0 transition-all ease-in duration-150"}):e.jsx(We,{className:"absolute text-red-400 top-0 right-0  transition-all ease-in duration-150"})]}),e.jsxs("div",{className:"flex-grow hidden md:block",children:[e.jsx("p",{className:"font-semibold items-center justify-center",children:d.username}),e.jsx("div",{className:"flex flex-row gap-1",children:e.jsxs("p",{className:`text-xs md:text-xs line-clamp-1 ${!((h=d.lastMessage)!=null&&h.read)&&((v=d.lastMessage)==null?void 0:v.sender)!==t._id?"text-gray-700 font-bold":""}`,children:[(_=d.lastMessage)==null?void 0:_.message.slice(0,20),((C=d.lastMessage)==null?void 0:C.message.length)>20?".....":""]})})]}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{style:{fontSize:"9px"},className:"hidden md:block",children:e.jsx("span",{className:"ml-2",style:{fontSize:"12px"},children:(()=>{var ge;const W=new Date((ge=d.lastMessage)==null?void 0:ge.createdAt),ae=new Date,le=ae-W,ie=24*60*60*1e3,ce=7*ie,ne=fe=>{const de=new Date(ae);return de.setDate(ae.getDate()-1),fe.getDate()===de.getDate()&&fe.getMonth()===de.getMonth()&&fe.getFullYear()===de.getFullYear()};return le<ie?W.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):ne(W)?"Yesterday":le<ce?W.toLocaleDateString([],{weekday:"long"}):W.toLocaleDateString([],{day:"2-digit",month:"2-digit",year:"numeric"})})()})}),e.jsx("div",{children:!((R=d.lastMessage)!=null&&R.read)&&((q=d.lastMessage)==null?void 0:q.sender)!==t._id&&e.jsx("div",{className:"bg-purple-400 rounded-full w-4 h-4 flex justify-center items-center",children:e.jsx("p",{className:"font-bold",style:{fontSize:"10px"},children:d.unreadCount})})})]})]},d._id)})})}):e.jsx(e.Fragment,{children:"no messages found"})}),e.jsx("div",{className:"w-3/4 p-4 flex flex-col rightchatbox-color overflow-hidden",children:u?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:`transition-all ease-in-out duration-200 ${te?"md:w-3/4":"w-full"}`,children:[e.jsxs("div",{className:`flex flex-row items-center mb-4 justify-between border-b-2 border-purple-500 ${te?"":"cursor-pointer"}`,onClick:D,children:[e.jsxs("div",{className:"flex item-center mb-4",children:[e.jsx("img",{src:u.profilePicture,alt:"provider logo",className:"size-10 rounded-full object-cover"}),e.jsx("div",{className:"flex flex-row items-center text-start",children:e.jsxs("div",{className:"items-center",children:[e.jsx("h2",{className:"flex flex-row ml-2 capitalize font-semibold",children:u.username}),n[u._id]?e.jsx("div",{className:"text-xs text-start ml-2 transition-all ease-in duration-150",children:"Online"}):e.jsx("div",{className:"text-xs text-start ml-2 transition-all ease-in duration-150",children:"Offline"})]})})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(zt,{className:"size-6 text-gray",onClick:D})})]}),e.jsxs("div",{className:"flex flex-col flex-grow h-screen",children:[e.jsx("div",{ref:O,className:"overflow-y-scroll h-[245px] md:h-[240px] 2xl:h-[550px]",children:T.map(d=>e.jsxs("div",{className:"m-2",children:[e.jsxs("div",{className:`flex items-center ${String(d.sender)===String(t._id)?"justify-end":""}`,children:[d.sender!==t._id&&e.jsx("img",{src:u.profilePicture,alt:"user logo",className:"size-8 rounded-full mr-2 object-cover"}),e.jsx("div",{className:`p-2 text-xs md:text-base ${d.sender===t._id?"chat-sender rounded-l-xl rounded-tr-xl":"bg-gray-300 rounded-r-xl rounded-tl-xl"}  ${d.message.length>30?"w-2/3":"w-auto"}`,children:e.jsxs("div",{className:"flex items-center ml-2",children:[d.message,e.jsx("span",{className:"ml-2 mt-1",style:{fontSize:"10px"},children:new Date(d.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})}),d.sender===t._id&&e.jsx("img",{src:t.profilePicture,alt:"user logo",className:"size-9 rounded-full ml-2 object-cover"})]}),e.jsx("div",{className:`md:text-sm ${d.sender===t._id?"mr-10 text-right":"ml-10 text-left"}`,style:{fontSize:"12px"},children:e.jsx(Oe,{locale:"en-US",date:new Date(d.createdAt)})})]},d._id))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",required:!0,placeholder:"Type a message...",className:"w-full p-3 rounded-lg",value:N,onKeyDown:$,onChange:d=>P(d.target.value)}),e.jsx(xe.Button,{onClick:M,variant:"outlined",className:"btn-color border-gray-400",children:e.jsx(Ut,{className:"size-5"})})]})]})]}),te&&e.jsxs("div",{className:"w-1/3 p-2 pr-2 md:block hidden border-l-2 mt-2",children:[e.jsxs("div",{className:"flex flex-row items-center space-x-2 mb-3",children:[e.jsx(Wt,{className:"size-6 text-gray cursor-pointer",onClick:()=>U(!1)}),e.jsx("p",{className:"text-base font-semibold",children:"Contact info"})]}),e.jsx($t,{children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:u.profilePicture,alt:"user logo",className:"size-10 rounded-full object-cover"}),e.jsx("h2",{className:"capitalize font-semibold mt-2",children:u.username}),e.jsx("p",{className:"text-xs mt-2",children:u.email})]})})]})]}):e.jsxs("div",{className:"flex flex-col mx-auto items-center justify-center h-full",children:[e.jsx("img",{src:t.profilePicture,alt:"user logo",className:"size-20 object-cover rounded-full border-4 border-purple-300"}),e.jsxs("h1",{className:"text-2xl font-bold text-gray",children:["Hi,",e.jsx("span",{className:"animate-wave",children:"👋🏻"}),"Welcome!"]}),e.jsx("h2",{className:"text-gray",children:"Select a people for chat."})]})})]})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col w-full max-h-screen mx-auto",children:e.jsx("div",{className:"h-52vh md:h-72vh bg-provmsgbg bg-cover bg-center flex flex-col justify-center items-center text-white",children:e.jsxs("div",{children:[e.jsx("h1",{className:"flex flex-col items-center text-xl md:text-4xl font-bold  text-gray-700",children:"No messages yet"}),e.jsx("h1",{className:"flex flex-col items-center md:text-2xl font-semibold md:mt-6 mt-2 text-zinc-600",children:"You don't have any messages from client yet."})]})})})})})]})}function Br(){const[t,s]=i.useState("Providers"),{currentProvider:a}=V(r=>r.provider),n=Ye(),o=i.useMemo(()=>{const r=[{title:"Providers"}];return a&&r.push({title:"Message"},{title:"Appointment"}),r},[a]);return i.useEffect(()=>{const x=new URLSearchParams(n.search).get("tag");x&&o.find(u=>u.title===x)&&s(x)},[n.search,o]),e.jsxs("div",{className:"flex flex-col transition-all duration-500",children:[e.jsx("div",{className:"flex flex-row",children:o.map((r,x)=>e.jsx("nav",{children:e.jsx("div",{className:`border-b-2 hover:text-amber-500 hover:bg-amber-100 duration-150 ${t===r.title?"border-amber-500 ":""}`,children:e.jsx("ul",{className:"flex max-w-screen-2xl overflow-x-auto lg:px-4",children:e.jsx("li",{className:"py-1",children:e.jsx(oe,{to:`?tag=${r.title}`,className:"block py-1.5 px-2 rounded-t-lg md:text-base text-sm text-gray-700",children:e.jsx("span",{className:"",children:r.title})})},x)})})},x))}),t==="Providers"&&e.jsx("div",{className:"w-full transition-all duration-500",children:e.jsx(_s,{})}),a&&e.jsxs(e.Fragment,{children:[t==="Message"&&e.jsxs("div",{className:"w-full transition-all duration-500 h-screen",children:[e.jsx("h1",{className:"flex flex-col font-bold text-2xl text-zinc-800"}),e.jsx(Lr,{})]}),t==="Appointment"&&e.jsxs("div",{className:"w-full transition-all duration-500",children:[e.jsx("h1",{className:"flex flex-col p-2 font-bold text-2xl text-zinc-800"}),e.jsx(Ys,{})]})]})]})}function Rr(){const{currentUser:t}=V(m=>m.user),{onlineAllUsers:s}=V(m=>m.online),{id:a}=V(m=>m.provider),[n,o]=i.useState([]),[r,x]=i.useState(null),[l,u]=i.useState([]),[f,F]=i.useState([]),[p,A]=i.useState([]),[k,T]=i.useState(!0),[w,O]=i.useState(!0),G=i.useRef(null),b=i.useRef(null),[I,z]=i.useState(!1),X=pe(),te="http://localhost:3000",[U,J]=i.useState(null),[se,H]=i.useState("");i.useEffect(()=>{const m=It(te,{withCredentials:!0});return J(m),m.emit("Online",t._id),m.on("UserOnline",({userId:D})=>{X(Ft(D))}),m.on("UserOut",({userId:D})=>{X(Ot(D))}),()=>m.close()},[t._id,X]),i.useEffect(()=>{if(!U)return;const m=({sender:D,message:L,provider:d})=>{if(d!==a){Z.success("New message received");return}const y={sender:D,message:L,provider:d,createdAt:new Date};F(h=>[...h,y]),A(h=>[...h,y]),o(h=>h.map(_=>_._id===a?{..._,lastMessage:y}:_))};return U.on("receiveMessage",m),()=>U.off("receiveMessage",m)},[U,a]);const ee=()=>{if(se==="")return Z.error("Message cannot be empty");U&&(U.emit("joinRoom",{roomId:`${t._id}_${r._id}`,sender:t._id,provider:r._id,reciever:r.userRef}),U.emit("sendMessage",{roomId:`${t._id}_${r._id}`,message:se,sender:t._id,provider:r._id,userid:t._id,reciever:r.userRef}),H(""))};i.useEffect(()=>{if(r&&U){const m=`${t._id}_${r._id}`;return U.emit("joinRoom",{roomId:m,sender:t._id,provider:r._id,reciever:r.userRef}),U.on("messageRead",D=>{A(L=>L.map(d=>d._id===D?{...d,read:!0}:d))}),()=>{U.off("messageRead")}}},[r,U,t._id]);const N=m=>{m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),ee())};i.useEffect(()=>{const m=()=>{G.current&&G.current.scrollTop<=10&&P()};if(G.current){const D=G.current;return D.addEventListener("scroll",m),()=>{D&&D.removeEventListener("scroll",m)}}},[p]);const P=()=>{const D=p.length,L=l.slice(Math.max(0,l.length-D-10),l.length-D);A(d=>[...L,...d])},M=()=>{if(G.current){const{scrollHeight:m,clientHeight:D}=G.current,L=m-D;G.current.scrollTop=L>0?L:0}};i.useEffect(()=>{M()},[f,l]);const $=()=>{z(!0)},Q=async m=>{x(m),z(!1);const D=`${t._id}_${m._id}`;try{const d=await(await fetch(`/server/message/getmessage/${D}`)).json();if(d.success===!1)return;u(d),A(d.slice(-10));const y=d.filter(h=>!h.read&&h.sender!==t._id);console.log("unreadMessages",y),await Promise.all(y.map(async h=>fetch(`/server/message/markasread/${h._id}`,{method:"PUT",headers:{"Content-Type":"application/json"}}))),A(h=>h.map(v=>v.sender!==t._id?{...v,read:!0}:v)),o(h=>h.map(_=>{var C;return _._id===m._id&&((C=_.lastMessage)==null?void 0:C.sender)!==t._id?{..._,lastMessage:{..._.lastMessage,read:!0}}:_}))}catch(L){console.log(L)}};return i.useEffect(()=>{(async()=>{T(!0),b.current.continuousStart();try{const L=await(await fetch(`/server/message/getprovider/${t._id}`)).json();if(L.success===!1){T(!1),O(!1);return}o(L),b.current.complete(50),T(!1)}catch(D){T(!1),console.log(D)}})()},[t._id]),i.useEffect(()=>{(async()=>{try{T(!0),O(!0);const L=await(await fetch(`/server/message/getprovider/${t._id}`)).json();if(L.success===!1){T(!1),O(!1);return}const y=(await Promise.all(L.map(async h=>{const v=`${t._id}_${h._id}`,[_,C]=await Promise.all([fetch(`/server/message/getlastmessage/${v}`),fetch(`/server/message/getunreadmessagescount/${v}?reciever=${t._id}`)]),R=await _.json(),q=await C.json();return console.log("unreadData",q),{...h,lastMessage:R||"No message yet",unreadCount:q.unreadCount}}))).sort((h,v)=>{const _=new Date(h.lastMessage.createdAt);return new Date(v.lastMessage.createdAt)-_});o(y),O(!1),T(!1)}catch(D){T(!1),console.log(D)}})()},[t._id]),e.jsxs("div",{className:"full-height flex flex-col",children:[e.jsx(Ie,{color:"#722a88",ref:b,height:3,speed:1e3}),k?e.jsx(e.Fragment,{children:e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"70vh"},children:e.jsx(ct,{color:"#AFDBD8",loading:k,size:20})})}):e.jsxs(e.Fragment,{children:[e.jsx(Ie,{color:"#ff9900",ref:b,height:3,speed:1e3}),n.length>0?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-grow h-screen max-h-[435px] 2xl:max-h-[745px]",children:[e.jsx("div",{className:"w-1/4 flex flex-col items-center pt-2 pr-2 gap-2",children:n.length>0?e.jsx(e.Fragment,{children:w&&!k?e.jsx(e.Fragment,{children:n.map(m=>e.jsxs(Rt,{height:80,width:290,speed:2,viewBox:"0 0 250 60",backgroundColor:"#f5f5f5",foregroundColor:"#D1BEE0",className:"2xl:w-[900px] 2xl:h-[110px]",children:[e.jsx("circle",{cx:"127",cy:"35",r:"25",className:"md:hidden block"}),e.jsx("circle",{cx:"30",cy:"35",r:"25",className:"hidden md:block"}),e.jsx("rect",{x:"70",y:"20",width:"140",height:"8",rx:"4",className:"hidden md:block"}),e.jsx("rect",{x:"70",y:"40",width:"80",height:"8",rx:"4",className:"hidden md:block"})]},m._id))}):e.jsx(e.Fragment,{children:n.map(m=>{var L,d,y,h,v,_;const D=r&&r._id===m._id;return e.jsxs("div",{className:`w-full p-4 flex chatbox-color gap-5 border-b-2 items-center cursor-pointer ${D?"chat-selected":"messagebg"}`,onClick:()=>{X(Lt(m._id)),Q(m)},children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:m.profilePicture,alt:"provider logo",className:"w-10 h-10 2xl:size-20 md:w-12 md:h-12 rounded-full object-cover"}),s[m._id]?e.jsx(We,{className:"absolute top-0 right-0 text-green-400 transition-all ease-in duration-150"}):e.jsx(We,{className:"absolute top-0 right-0 text-red-400 transition-all ease-in duration-150"})]}),e.jsxs("div",{className:"flex-grow hidden md:block",children:[e.jsx("p",{className:"font-semibold items-center justify-center",children:m.fullName.slice(0,15)}),e.jsx("div",{className:"flex flex-row gap-1",children:e.jsxs("p",{className:`text-sm line-clamp-1 ${!((L=m.lastMessage)!=null&&L.read)&&((d=m.lastMessage)==null?void 0:d.sender)!==t._id?"text-gray-700 font-bold":""}`,children:[(y=m.lastMessage)==null?void 0:y.message.slice(0,20),((h=m.lastMessage)==null?void 0:h.message.length)>20?"....":""]})})]}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{style:{fontSize:"11px"},className:"hidden md:block",children:e.jsx("span",{className:"ml-2",style:{fontSize:"12px"},children:(()=>{var ie;const C=new Date(((ie=m.lastMessage)==null?void 0:ie.createdAt)||0),R=new Date,q=R-C,W=24*60*60*1e3,ae=7*W,le=ce=>{const ne=new Date(R);return ne.setDate(ne.getDate()-1),ce.getDate()===ne.getDate()&&ce.getMonth()===ne.getMonth()&&ce.getFullYear()===ne.getFullYear()};return q<W?C.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):le(C)?"Yesterday":q<ae?C.toLocaleDateString([],{weekday:"long"}):C.toLocaleDateString([],{day:"2-digit",month:"2-digit",year:"numeric"})})()})}),e.jsx("div",{children:!((v=m.lastMessage)!=null&&v.read)&&((_=m.lastMessage)==null?void 0:_.sender)!==t._id&&e.jsx("div",{className:"bg-purple-400 rounded-full w-4 h-4 flex justify-center items-center",children:e.jsx("p",{className:"font-bold",style:{fontSize:"10px"},children:m.unreadCount})})})]})]},m._id)})})}):e.jsx(e.Fragment,{children:"no messages found"})}),e.jsx("div",{className:"w-3/4 p-4 flex flex-col rightchatbox-color overflow-hidden",children:r?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:`transition-all ease-in-out duration-200 ${I?"md:w-3/4":"w-full"}`,children:[e.jsxs("div",{className:`flex flex-row items-center mb-4 justify-between border-b-2 border-purple-500 ${I?"":"cursor-pointer"}`,onClick:$,children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("img",{src:r.profilePicture,alt:"provider logo",className:"w-10 h-10 md:h-10 md rounded-full object-cover"}),e.jsx("div",{className:"flex flex-row items-center text-start",children:e.jsxs("div",{className:"items-center",children:[e.jsx("h2",{className:"flex flex-row ml-2 capitalize font-semibold",children:r.fullName}),s[r._id]?e.jsx("div",{className:"text-xs text-start ml-2 fadeIn",children:"Online"}):e.jsx("div",{className:"text-xs text-start  ml-2",children:"Offline"})]})})]}),e.jsx("div",{className:"flex items-center",children:e.jsx(zt,{className:"size-6"})})]}),e.jsxs("div",{className:"flex flex-col flex-grow h-screen",children:[e.jsx("div",{ref:G,className:" overflow-y-scroll h-[320px] md:h-[290px] 2xl:h-[600px]",children:p.map(m=>e.jsxs("div",{className:"m-2",children:[e.jsxs("div",{className:`flex items-center ${String(m.sender)===String(t._id)?"justify-end":""}`,children:[m.sender!==t._id&&e.jsx("img",{src:r.profilePicture,alt:"provider logo",className:"size-9 rounded-full mr-2 object-cover"}),e.jsxs("div",{className:`p-2 text-xs md:text-base ${m.sender===t._id?"chat-sender rounded-l-xl rounded-tr-xl":"bg-gray-300 rounded-r-xl rounded-tl-xl"} ${m.message.length>30?"w-2/3":"w-max"}`,children:[m.message,e.jsx("span",{className:"ml-2",style:{fontSize:"10px"},children:new Date(m.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),m.sender===t._id&&e.jsx("img",{src:t.profilePicture,alt:"user logo",className:"size-9 rounded-full ml-2 object-cover"})]}),e.jsx("div",{className:`${m.sender===t._id?"mr-10 text-right":"ml-10 text-left"}`,style:{fontSize:"12px"},children:e.jsx(Oe,{locale:"en-US",date:new Date(m.createdAt)})})]},m._id))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Type a message...",className:"w-full p-3 rounded-lg",value:se,onKeyDown:N,onChange:m=>H(m.target.value)}),e.jsx(xe.Button,{onClick:ee,variant:"outlined",className:"btn-color border-gray-400",children:e.jsx(Ut,{className:"size-5"})})]})]})]}),I&&e.jsxs("div",{className:"w-1/3 p-2 pr-2 md:block hidden border-l-2 mt-2",children:[e.jsxs("div",{className:"flex flex-row items-center space-x-2 mb-3",children:[e.jsx(Wt,{className:"size-6 text-gray cursor-pointer",onClick:()=>z(!1)}),e.jsx("p",{className:"text-base font-semibold",children:"Contact info"})]}),e.jsx($t,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("img",{src:r.profilePicture,alt:"user logo",className:"size-16 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-row justify-center items-center gap-1",children:[e.jsx("h2",{className:"capitalize font-semibold mt-2 provideritem-name",children:r.fullName}),r.verified===!0&&e.jsx(e.Fragment,{children:e.jsx(ps,{content:"Verifed Profile",animation:"duration-500",children:e.jsx(Bt,{className:"animate-bounce size-4 mt-2"})})})]}),e.jsx("p",{className:"text-xs text-center provideritem-service",children:Array.isArray(r.name)?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:r.name.slice(0,2).join(", ")}),r.name.length>2?e.jsx("p",{children:r.name.slice(2).join(", ")}):null,r.name.length>3?e.jsx(e.Fragment,{children:e.jsx("p",{children:`+${r.name.length-2}more`})}):null]}):e.jsx(e.Fragment,{children:r.name})})]}),e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx(Ts,{className:"h-4 w-4 icon-color"}),e.jsxs("p",{className:"text-sm provideritem-service",children:[e.jsx("span",{className:"text-xs provideritem-service",children:r.experience})," years experience"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ps,{className:"h-4 w-4 icon-color"}),e.jsxs("p",{className:"text-sm provideritem-service truncate w-full",children:[r.address.state,",",r.address.city]})]})]})})]})]}):e.jsxs("div",{className:"flex flex-col mx-auto items-center justify-center h-full",children:[e.jsx("img",{src:t.profilePicture,alt:"user logo",className:"size-20 object-cover rounded-full border-4 border-purple-300"}),e.jsxs("h1",{className:"text-2xl font-bold text-gray",children:["Hi,",e.jsx("span",{className:"animate-wave",children:"👋🏻"}),"Welcome!"]}),e.jsx("h2",{className:"text-gray",children:"Select a provider for chat."})]})})]})}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col w-full max-h-screen mx-auto",children:[e.jsx("div",{className:"h-52vh md:h-72vh bg-nomsgbg bg-cover bg-center flex flex-col justify-center items-center text-white",children:e.jsxs("div",{className:"flex flex-col items-center text-center justify-center",children:[e.jsx("h1",{className:"flex flex-col text-xl md:text-4xl font-bold mt-2 text-gray-700",children:"No Messages yet"}),e.jsx("h1",{className:"flex flex-col text-normal md:text-2xl font-semibold mt-2 text-zinc-600",children:"To begin, search for a provider and send them a message."})]})}),e.jsx("div",{className:"flex items-center justify-center mt-6",children:e.jsx(nt,{})})]})})]})]})}function Ir(t){return Te({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",strokeWidth:"2",d:"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M7,12 L11,15 L16,8"},child:[]}]})(t)}function zr(){const{currentUser:t}=V(c=>c.user),[s,a]=i.useState(""),[n,o]=i.useState(!1),[r,x]=i.useState({imageUrls:[],name:[],therapytype:[],email:"",qualification:"",fullName:"",experience:"",phone:s,address:{addressLine1:"",street:"",country:"",state:"",city:"",pincode:""},regularPrice:"",license:"",description:"",profilePicture:"",timeSlots:{Monday:[],Tuesday:[],Wednesday:[],Thursday:[],Friday:[],Saturday:[],Sunday:[]}});console.log(r);const[l,u]=i.useState(0),[f,F]=i.useState({email:!1}),p=_t(),A=pe(),k=i.useRef(),T=(c,j)=>{x(E=>{const S=E[c]||[],K=S.includes(j)?S.filter(re=>re!==j):[...S,j];return{...E,[c]:K}})},w=c=>{const j={...f};let{name:E,value:S}=c.target;const K=E.split(".");E==="address.pincode"&&S.length>6||(E==="email"&&(/^[^\s@]+@[^\s@]+\.com$/.test(S)?j.email=!1:j.email=!0,F(j)),!(E==="regularPrice"&&S.length>5)&&(E==="experience"&&S.length>2||(E==="fullName"&&(S=S.replace(/[^a-zA-Z\s]/g,"")),K.length===2?x(re=>({...re,[K[0]]:{...re[K[0]],[K[1]]:S}})):x(re=>({...re,[E]:S})))))},O=()=>{const c={};return l===0&&r.name.length===0&&(c.name="Please select at least one service"),l===0&&!r.profilePicture&&(c.profilePicture="Profile picture is required"),l===1&&r.therapytype.length===0&&(c.therapytype="Please select at least one service type"),l===2&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)&&(c.email="Invalid email format"),l===3&&!/^[0-9]{6}$/.test(r.address.pincode)&&(c.pincode="Pincode must be 6 digits"),l===4&&r.regularPrice<=100&&(c.regularPrice="Fee must be greater than 100"),l===5&&r.experience<0&&(c.experience="Experience must be greater than or equal to 0"),l===6&&!/^\+\d{12}$/.test(r.phone)&&(c.phone="Phone number must have exactly 12 digits with Country Code"),l===8&&r.description.split(" ").length<60&&(c.description="Biography must be at least 60 words"),F(c),Object.keys(c).length===0},G=c=>{c.preventDefault();try{if(O()){const j=window.innerWidth<=768?140:240;window.scrollTo({top:j,behavior:"smooth"}),u(l+1)}}catch(j){console.log(j),console.log("Failed to save data.")}},b=()=>{u(l-1)},z=l/9*100,X=c=>{switch(c){case 0:return"Select the primary service you are offering. This helps us tailor the rest of the form to better suit your needs.";case 1:return"Specify the type of service you provide. This information helps us categorize your expertise accurately.";case 2:return"Enter your personal details. Accurate information ensures smooth communication and verification.";case 3:return"Provide your location details. This helps potential clients find and reach you more easily.";case 4:return"Indicate the fee you charge for your services. Make sure it's competitive and reflects your expertise.";case 5:return"Share your experience in this field. Clients value providers with a proven track record.";case 6:return"Enter your licensing details and phone number. This ensures we have the correct contact information and validates your credentials.";case 7:return"Set your available timings for appointments. This helps clients book sessions at convenient times.";case 8:return"Write a brief biography and upload a profile picture. A compelling introduction and a professional image can attract more clients.";default:return""}},te=c=>{switch(c){case 0:return"Ensure the service aligns with your expertise and qualifications.Profile picture must be a clear, professional image.";case 1:return"Provide a detailed and accurate service type to attract the right clients.";case 2:return"Use your legal name and a valid email address to avoid delays.";case 3:return"Use your legal name and a valid email address to avoid delays.";case 4:return"Fees must be reasonable and justified by your experience and service quality.";case 5:return"Detail your years of experience and significant achievements or qualifications.";case 6:return" Only provide valid licenses and a contactable phone number.";case 7:return"Be realistic about your availability to avoid overbooking.";case 8:return"Your biography should be at least 30 words.";default:return""}},U=c=>{const E=te(c).split(".").filter(S=>S.trim()!=="");return e.jsx("ul",{className:"menu-subTextColor mt-2 text-xs md:text-lg",children:E.map((S,K)=>e.jsxs("li",{className:"mb-2",children:[S.trim(),"."]},K))})},J=(c,j)=>c.map(E=>{var S;return e.jsx("button",{type:"button",disabled:E.isDisabled,className:`w-full h-12 p-3 m-1 rounded-lg border ${(S=r[j])!=null&&S.includes(E.value)?"menu-Button text-white":`bg-blue-100 ${E.isDisabled?"text-gray-400":"text-gray-700"}`}`,onClick:()=>T(j,E.value),children:E.value},E.value)}),se=async c=>{c.preventDefault();try{const j=await fetch("/server/provider/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,userRef:t._id})});r.success&&console.log(r.success);const E=await j.json();p(`/provider/${E._id}`),A(Lt(E._id)),A(bs(E))}catch(j){console.log(j)}};i.useState(!1);const[H,ee]=i.useState(null),N=async c=>new Promise((j,E)=>{ee(null),o(!0);const S=Fs(vs),K=new Date().getTime()+c.name,re=Os(S,K),je=$s(re,c);je.on("state_changed",me=>{const es=me.bytesTransferred/me.totalBytes*100;ee(es),o(!1)},me=>{E(me)},()=>{Ls(je.snapshot.ref).then(me=>{j(me)})})}),P=c=>{c.preventDefault(),k.current.click()},M=c=>{const j=c.target.files[0];j&&N(j).then(E=>{x(S=>({...S,profilePicture:E})),Z.success("Profile image uploaded successfully")}).catch(()=>{Z.error("Profile image upload failed")})},[$,Q]=i.useState("Monday"),[m,D]=i.useState([]),[L,d]=i.useState(""),[y,h]=i.useState(""),[v,_]=i.useState(""),[C,R]=i.useState(""),[q,W]=i.useState(30),ae=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],le=c=>{W(Number(c.target.value))},ie=c=>{Q(c)},ce=c=>{m.includes(c)?D(m.filter(j=>j!==c)):D([...m,c])},ne=()=>{const c=[],j=[],E=[];for(let S=7;S<24;S++)for(let K=0;K<60;K+=q){const re=S<12?"AM":"PM",je=S%12===0?12:S%12,me=`${String(je).padStart(2,"0")}:${String(K).padStart(2,"0")} ${re}`;S<12?c.push(me):S<16?j.push(me):E.push(me)}return{morningSlots:c,afternoonSlots:j,eveningSlots:E}},{morningSlots:ge,afternoonSlots:fe,eveningSlots:de}=ne(),ye=(c,j)=>{const E=r.timeSlots[c].includes(j)?r.timeSlots[c].filter(S=>S!==j):[...r.timeSlots[c],j];x({...r,timeSlots:{...r.timeSlots,[c]:E}})},ue=c=>{const[j,E]=c.split(":").map(Number);if(j<7||j>23)return Z.error("Please select a time between 7:00 AM to 11:45 PM");const S=E<30?"00":"30";return`${String(j).padStart(2,"0")}:${S}`},Y=c=>{const[j,E]=c.split(" ");let[S,K]=j.split(":").map(Number);return E==="PM"&&S!==12?S+=12:E==="AM"&&S===12&&(S=0),`${String(S).padStart(2,"0")}:${String(K).padStart(2,"0")}`},Ze=c=>{const j=ue(c.target.value);ue?(d(j),y&&j>y&&h("")):Z.error("Please select a time between 7:00 AM and 11:00 PM")},Yt=c=>{const j=ue(c.target.value);j>=L&&h(j)},Kt=c=>{const j=ue(c.target.value);ue?(_(j),C&&j>C&&R("")):Z.error("Please select a time between 7:00 AM and 11:00 PM")},Zt=c=>{const j=ue(c.target.value);j>=v&&R(j)},dt=(c,j,E)=>{const S=Y(j),K=Y(E);return c.filter(re=>{const je=Y(re);return je>=S&&je<=K})},Jt=()=>{if(!L||!y){Z.error("Please select start and end time");return}if(m.length===0){Z.error("Please select atleast one day");return}const c=[...ge,...fe,...de],j=dt(c,L,y),E=dt(c,v,C);x(S=>{const K={...S.timeSlots};return m.forEach(re=>{K[re]=[...j,...E]}),{...S,timeSlots:K}}),$e(!1)},[Qt,$e]=i.useState(!1);function Xt(){$e(!0),D([$])}return e.jsxs("div",{children:[e.jsxs(we,{size:"md",show:Qt,onClose:()=>$e(!1),children:[e.jsxs(we.Header,{children:["Choose for ",m.join(", "),","]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex flex-row items-center justify-center",children:ae.map(c=>e.jsx("button",{type:"button",className:`px-2 py-2 border-primary-60 font-semibold  ${m.includes(c)?"text-primary-60 bg-primary-50 transition-all duration-300":"bg-slate-200 text-gray"}`,onClick:()=>ce(c),children:c.slice(0,3)},c))}),e.jsxs("div",{className:"p-4 flex gap-2 items-center mt-2 justify-center",children:[e.jsx("h1",{className:"text-base",children:"Session 1 *"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{style:{fontSize:"11px"},children:"Start Time"}),e.jsx("input",{type:"time",id:"startTime",className:"rounded-lg text-xs mt-1",value:L,onChange:Ze})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{style:{fontSize:"11px"},children:"End Time"}),e.jsx("input",{type:"time",id:"endTime",className:"rounded-lg text-xs mt-1",value:y,onChange:Yt})]})]}),e.jsxs("div",{className:"p- flex gap-2 items-center justify-center",children:[e.jsx("h1",{className:"text-base",children:"Session 2  "}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{style:{fontSize:"11px"},children:"Start Time"}),e.jsx("input",{type:"time",id:"startTime2",className:"rounded-lg text-xs mt-1",value:v,onChange:Kt})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{style:{fontSize:"11px"},children:"End Time"}),e.jsx("input",{type:"time",id:"endTime2",className:"rounded-lg text-xs mt-1",value:C,onChange:Zt})]})]}),e.jsxs("div",{className:"mb-6 mt-6 flex items-center justify-center gap-4",children:[e.jsx("button",{onClick:()=>$e(!1),className:"px-6 py-1 bg-slate-200 rounded-md font-medium text-slate-700 hover:bg-slate-300 duration-300",children:"Cancel"}),e.jsx("button",{onClick:Jt,className:"px-7 py-1 card-btn rounded-md ",children:"Apply"})]})]}),e.jsxs(we.Footer,{children:[" ",e.jsxs("h1",{className:"text-gray text-xs",children:[e.jsx(gs,{style:{backgroundColor:"#e5e7c7"},children:"Note :"})," Select multiple days if the session time remains the same."]})]})]}),e.jsx("div",{className:"fixed progress-bg w-full md:h-1 h-1 top-0 z-50 right-0 left-0",children:e.jsx("div",{className:"progress-bgs h-full transition-width duration-500",style:{width:`${z}%`}})}),e.jsx("div",{className:"container flex flex-col mx-auto mt-4 mb-16 md:mb-0",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:gap-10 justify-center item-center rounded-lg",children:[e.jsx("div",{className:"flex-col h-auto p-2 max-w-lg text-left",children:e.jsxs("div",{className:"border-l-4 menu-borderColor md:p-6 lg:p-8 p-4 secondary-bg rounded-3xl",children:[e.jsxs("h2",{className:"flex flex-row items-center gap-2 menu-textColor text-2xl font-bold",children:[e.jsx(Mt,{})," Good To Know"]}),e.jsx("p",{className:"menu-subTextColor mt-2 text-xs md:text-lg justify-between",children:X(l)}),e.jsx("span",{className:"menu-subTextColor mt-2 text-xs md:text-lg justify-between",children:U(l)})]})}),e.jsxs("form",{onSubmit:G,className:"w-full md:w-[500px]",children:[l===0&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"file",id:"profilePicture",name:"profilePicture",ref:k,hidden:!0,accept:"image/*",onChange:M}),e.jsx("div",{className:"relative w-24 h-24 mx-auto group",children:e.jsxs("label",{htmlFor:"profilePicture",className:"w-24 h-24 cursor-pointer",onClick:P,children:[e.jsx("img",{src:r.profilePicture||"https://i.ibb.co/tKQH4zp/defaultprofile.jpg",alt:"profile",className:`w-24 h-24 rounded-full object-cover border-4
                      } ${f.profilePicture&&"border-red-500"}`}),e.jsx("div",{className:"border-4 rounded-full w-24 h-24 absolute inset-0 transition-all duration-300",style:{borderColor:`rgba(49, 196, 141, ${H/100})`,border:`${H}%`}}),e.jsxs("div",{className:"hidden rounded-full group-hover:flex flex-col items-center justify-center absolute inset-0 bg-gray-800 bg-opacity-60",children:[e.jsx("img",{src:"https://www.svgrepo.com/show/33565/upload.svg",alt:"camera",className:"w-8 h-8"}),e.jsx("p",{className:"text-white text-xs",children:"Choose Profile"})]})]})}),f.profilePicture&&!H&&e.jsx("p",{className:"text-center mt-2 text-red-500",children:f.profilePicture}),H===100&&e.jsx("p",{className:"text-center mt-2 text-gray font-semibold",children:"Profile image upload successfully"}),e.jsxs("div",{className:"flex flex-col p-6 rounded-lg",children:[e.jsx("label",{className:"font-bold menu-headTextColor mb-5 text-left",children:"Please Select your Service"}),e.jsx("div",{className:"flex flex-col max-h-64 overflow-y-auto",children:J(ze,"name")}),f.name&&e.jsx("p",{className:"text-red-500 font-serif text-sm mt-1",children:f.name}),e.jsxs("div",{className:"flex mt-4 gap-4 justify-center",children:[e.jsx("button",{className:"bg-slate-200 p-3 px-8 rounded-xl text-slate-400",type:"submit",disabled:!0,children:"Back"}),e.jsx("button",{className:`p-3 px-8 rounded-xl btn-color text-white font-semibold text-center hover:opacity-95 ${n?"cursor-not-allowed opacity-50":""}`,type:"submit",disabled:n,children:"Next"})]})]})]}),l===1&&e.jsxs("div",{className:"flex flex-col p-6 rounded-lg",children:[e.jsx("p",{className:"p-1 menu-headTextColor font-bold mb-4 text-left",children:"Please Select your Service Type"}),e.jsx("div",{className:"flex flex-col justify-center",children:J(js,"therapytype")}),f.therapytype&&e.jsx("p",{className:"text-red-500 font-serif text-sm mt-1",children:f.therapytype}),e.jsxs("div",{className:"flex justify-center mt-4 gap-4",children:[e.jsx("button",{className:"p-3 px-8 rounded-xl bg-slate-200 text-slate-700",type:"submit",onClick:b,children:"Back"}),e.jsx("button",{className:"p-3 px-8 rounded-xl btn-color text-white font-semibold text-center hover:opacity-95",type:"submit",children:"Next"})]})]}),l===2&&e.jsxs("div",{className:"flex flex-col p-6 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold menu-headTextColor mb-5",children:"Basic Information"}),e.jsx("label",{className:"ml-3 menu-headTextColor font-bold text-left mb-2",children:"Full Name"}),e.jsx("input",{type:"text",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0",placeholder:"Enter your fullname",onChange:w,value:r.fullName,name:"fullName",maxLength:20,required:!0}),e.jsx("label",{className:"ml-3 menu-headTextColor font-bold text-left mb-2 mt-2",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",className:`w-full border-2 p-2 input rounded-lg focus:outline-none focus:ring-0 ${f.email?"border-red-500 focus:border-red-500 text-red-700":"border-green-500 focus:border-green-500 text-green-800"}`,placeholder:"Enter your Email",onChange:w,value:r.email,name:"email",id:"email",required:!0}),!f.email&&e.jsx(Ir,{className:"absolute top-1/2 right-3 transform -translate-y-1/2 text-green-800"})]}),e.jsx("label",{className:"ml-3 menu-headTextColor font-bold text-left mb-2 mt-2",children:"Qualification"}),e.jsx("input",{type:"text",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0",placeholder:"Enter your Qualification",onChange:w,value:r.qualification,name:"qualification",maxLength:20,required:!0}),e.jsxs("div",{className:"mt-4 flex justify-center gap-4",children:[e.jsx("button",{className:"p-3 px-8 rounded-xl bg-slate-300 text-slate-700",type:"button",onClick:b,children:"Back"}),e.jsx("button",{className:"p-3 px-8 rounded-xl btn-color text-white font-semibold text-center hover:opacity-95",type:"submit",disabled:f.email,children:"Next"})]})]}),l===3&&e.jsxs("div",{className:"flex flex-col p-6 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold menu-headTextColor",children:"Location Details"}),e.jsx("label",{className:"ml-3 mt-5 menu-headTextColor font-bold text-left mb-2",children:"Address"}),e.jsx("input",{type:"text",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0",placeholder:"Enter Address",onChange:w,value:r.address.addressLine1,name:"address.addressLine1",maxLength:30,required:!0}),e.jsx("label",{className:"ml-3 mt-5 menu-headTextColor font-bold text-left mb-2",children:"Street"}),e.jsx("input",{type:"text",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0",placeholder:"Enter your Street",onChange:w,value:r.address.street,name:"address.street",maxLength:30,required:!0}),e.jsxs("div",{className:"flex flex-row mt-5 gap-4",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"ml-3 menu-headTextColor font-bold text-left",children:"Country"}),e.jsx("input",{type:"text",className:"w-full input border-2 p-2 mt-2 rounded-lg focus:outline-none focus:ring-0",placeholder:"Enter your Country",onChange:w,value:r.address.country,name:"address.country",maxLength:20,required:!0})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"ml-3 menu-headTextColor font-bold text-left",children:"State"}),e.jsx("input",{type:"text",className:"w-full input border-2 p-2 mt-2 rounded-lg focus:outline-none focus:ring-0",placeholder:"Enter your State",onChange:w,value:r.address.state,name:"address.state",maxLength:20,required:!0})]})]}),e.jsxs("div",{className:"flex flex-row mt-5 gap-4",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"ml-3 menu-headTextColor font-bold text-left ",children:"City"}),e.jsx("input",{type:"text",className:"w-full input border-2 p-2 mt-2 rounded-lg focus:outline-none focus:ring-0",placeholder:"Enter your City",onChange:w,value:r.address.city,name:"address.city",maxLength:20,required:!0})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"ml-3 menu-headTextColor font-bold text-left",children:"Pincode"}),e.jsx("input",{type:"number",className:"w-full input border-2 mt-2 p-2 rounded-lg focus:outline-none focus:ring-0",placeholder:"Enter your Pincode",onChange:w,value:r.address.pincode,name:"address.pincode",maxLength:"6",required:!0})]})]}),f.pincode&&e.jsx("p",{className:"text-red-500 font-serif text-sm mt-1",children:f.pincode}),e.jsxs("div",{className:"mt-6 flex justify-center gap-4",children:[e.jsx("button",{className:"p-3 px-8 rounded-xl bg-slate-300 text-slate-700",type:"button",onClick:b,children:"Back"}),e.jsx("button",{className:"p-3 px-8 rounded-xl btn-color text-white font-semibold text-center hover:opacity-95",type:"submit",children:"Next"})]})]}),l===4&&e.jsxs("div",{className:"flex flex-col p-6 rounded-lg",children:[e.jsx("label",{className:"mb-5 menu-headTextColor font-bold ml-3 text-left",children:"Fee per Appoinment"}),e.jsx("input",{type:"number",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0",placeholder:"Enter your fee",onChange:w,value:r.regularPrice,name:"regularPrice",required:!0}),f.regularPrice&&e.jsx("p",{className:"text-red-500 font-serif text-sm mt-1",children:f.regularPrice}),e.jsxs("div",{className:"flex justify-center mt-4 gap-4",children:[e.jsx("button",{className:"p-3 px-8 rounded-xl bg-slate-300 text-slate-700",type:"button",onClick:b,children:"Back"}),e.jsx("button",{className:"p-3 px-8 rounded-xl btn-color text-white font-semibold text-center hover:opacity-95",type:"submit",children:"Next"})]})]}),l===5&&e.jsxs("div",{className:"flex flex-col p-6  rounded-lg",children:[e.jsx("label",{className:"mb-5 menu-headTextColor font-bold ml-3 text-left",children:"Years of Experience"}),e.jsx("input",{type:"number",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0",placeholder:"Enter your experience",onChange:w,value:r.experience,name:"experience",required:!0}),f.experience&&e.jsx("p",{className:"text-red-500 font-serif text-sm mt-1",children:f.experience}),e.jsxs("div",{className:"flex justify-center mt-4 gap-4",children:[e.jsx("button",{className:"p-3 px-8 rounded-xl bg-slate-300 text-slate-600",type:"button",onClick:b,children:"Back"}),e.jsx("button",{className:"p-3 px-8 rounded-xl btn-color text-white font-semibold text-center hover:opacity-95",type:"submit",children:"Next"})]})]}),l===6&&e.jsxs("div",{className:"flex flex-col p-6  rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold menu-headTextColor mb-5",children:"Authentication"}),e.jsx("label",{className:"menu-headTextColor font-bold ml-3 text-left mb-2",children:"Licensing"}),e.jsx("input",{type:"text",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0",placeholder:"Eg. License Number, Issuing authority",onChange:w,value:r.license,name:"license",maxLength:10,required:!0}),e.jsxs("label",{className:"mb-2 menu-headTextColor font-bold ml-3 mt-3 text-left",children:["Phone Number"," ",e.jsx("span",{className:"text-xs",children:"(with Country Code)"})]}),e.jsx(Ae,{placeholder:"Phone number",className:"border-2 p-2 rounded-lg input focus:outline-none focus:ring-0 border-slate-300 ",id:"phone",maxLength:"15",onChange:c=>{a(c),x({...r,phone:c})},value:r.phone}),f.phone&&e.jsx("p",{className:"text-red-500 font-serif text-sm mt-1",children:f.phone}),e.jsxs("div",{className:"flex justify-center mt-4 gap-4",children:[e.jsx("button",{className:"p-3 px-8 rounded-xl bg-slate-300 text-slate-600",type:"button",onClick:b,children:"Back"}),e.jsx("button",{className:"p-3 px-8 rounded-xl btn-color text-white font-semibold text-center hover:opacity-95",type:"submit",children:"Next"})]})]}),l===7&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 md:p-6 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-gray md:text-xl text-sm font-bold",children:"Pick your TimeSlot"}),e.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[e.jsx("h1",{className:"text-sm text-gray",children:"Session Gap"}),e.jsxs("select",{className:"text-xs rounded-m w-24 border-2 focus:border-purple-400 outline outline-none focus:ring-0",onChange:le,value:q,children:[e.jsx("option",{value:15,children:"15 min"}),e.jsx("option",{value:30,children:"30 min"}),e.jsx("option",{value:45,children:"45 min"})]})]})]}),e.jsx("div",{className:"flex justify-center mt-4 overflow-auto ",children:ae.map(c=>e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("button",{type:"button",className:`px-3 py-2 border-primary-60 font-semibold  ${$===c?"text-primary-60 bg-primary-50 transition-all duration-300":"bg-slate-200 text-gray"}`,onClick:()=>ie(c),children:c.slice(0,3)}),e.jsxs("div",{className:"flex flex-col text-center items-center",children:[e.jsx("p",{className:"text-xs text-gray-900",style:{fontSize:"11px"},children:r.timeSlots[c].length}),e.jsx("p",{style:{fontSize:"11px"},children:"Slots"})]})]},c))}),e.jsx("div",{className:"flex mt-2",children:e.jsx("button",{onClick:Xt,type:"button",className:"p-1 px-2 text-xs rounded-xl btn-color text-white font-semibold text-center hover:opacity-95",children:"Select Time Range"})}),$&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"mt-2 text-gray font-medium",children:"Morning Slots"}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2 overflow-auto mt-2",children:ge.map(c=>e.jsx("button",{type:"button",onClick:()=>ye($,c),className:`py-2 text-xs rounded-md border border-slate-200 hover:border-primary-50 hover:text-primary-60 duration-200 ${r.timeSlots[$].includes(c)?"bg-primary-50 text-primary-60 border border-purple-200":"bg-slate-100 border border-slate-300"}`,children:c},c))}),e.jsx("h1",{className:"mt-2 text-gray font-medium",children:"Afternoon Slots"}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2 overflow-auto mt-2",children:fe.map(c=>e.jsx("button",{type:"button",onClick:()=>ye($,c),className:`py-2 text-xs  rounded-md  hover:border-primary-50 hover:text-primary-60 duration-200 ${r.timeSlots[$].includes(c)?"bg-primary-50 text-primary-60 border border-purple-200":"bg-slate-100 border border-slate-300"}`,children:c},c))}),e.jsx("h1",{className:"mt-2 text-gray font-medium",children:"Evening Slots"}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-2 overflow-auto mt-2",children:de.map(c=>e.jsx("button",{type:"button",onClick:()=>ye($,c),className:`py-2 text-xs rounded-md  hover:border-primary-50 hover:text-primary-60 duration-200 ${r.timeSlots[$].includes(c)?"bg-primary-50 text-primary-60 border border-purple-200":"bg-slate-100 border border-slate-300"}`,children:c},c))})]})]}),e.jsxs("div",{className:"flex justify-center mt-4 mb-6 gap-4",children:[e.jsx("button",{className:"p-3 px-8 rounded-xl bg-slate-300 text-slate-600",type:"button",onClick:b,children:"Back"}),e.jsx("button",{className:"p-3 px-8 rounded-xl btn-color text-white font-semibold text-center hover:opacity-95",type:"submit",children:"Next"})]})]}),l===8&&e.jsxs("div",{className:"flex flex-col p-6  rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold menu-headTextColor text-left mb-4",children:"About"}),e.jsx("label",{className:"mb-2 menu-headTextColor font-bold text-left ml-3",children:"Biograpghy"}),e.jsx("input",{type:"textarea",className:"input border-2 p-2 rounded-lg focus:outline-none focus:ring-0",placeholder:"Enter your biography",onChange:w,value:r.description,name:"description",required:!0}),f.description&&e.jsx("p",{className:"text-red-500 font-serif text-sm mt-1",children:f.description}),e.jsxs("div",{className:"flex justify-center mt-4 gap-4",children:[e.jsx("button",{className:"p-3 px-8 rounded-xl bg-slate-300 text-slate-600",type:"button",onClick:b,children:"Back"}),e.jsx("button",{onClick:se,className:"p-3 px-8 rounded-xl btn-color text-white font-semibold text-center hover:opacity-95",children:"Save"})]})]})]})]})})]})}function ra(){const t=Ye(),[s,a]=i.useState("Dashboard"),{currentUser:n}=V(l=>l.user),{currentProvider:o}=V(l=>l.provider),{isUserBookingFetched:r}=V(l=>l.booking),x=pe();return i.useEffect(()=>{(async()=>{if(r)return;const u=`/server/booking/getuserbookings/${n._id}`;try{x(ys());const f=await fetch(u);f.ok||console.log("Response status:",f.status);const p=(await f.json()).sort((A,k)=>new Date(k.createdAt)-new Date(A.createdAt));x(Ns(p))}catch(f){console.error("An error occurred while fetching booking details:",f),x(ws(f))}})()},[n._id,x,r]),i.useEffect(()=>{const u=new URLSearchParams(t.search).get("tab");["dashboard","providers","profile","Profile Setting","Parent Details","Bookings","messages"].includes(u)&&a(u)},[t.search]),i.useEffect(()=>{const u=new URLSearchParams(t.search).get("tag");["dashboard","providers","profile","Profile Setting","Parent Details","Bookings","messages"].includes(u)&&a(u)},[t.search]),e.jsxs("div",{className:"flex flex-col mx-auto w-full",children:[e.jsx(e.Fragment,{children:e.jsx(zs,{})}),s==="dashboard"&&e.jsx(Hs,{}),s==="providers"&&(o?e.jsx(Br,{}):e.jsx(zr,{})),(s==="profile"||s==="Profile Setting"||s==="Parent Details"||s==="Bookings")&&e.jsx(Ws,{}),s==="messages"&&e.jsx(Rr,{})]})}export{ra as default};
