import{r as a,a as U,j as e}from"./react-DiIsFRGf.js";import{S as V}from"./react-select-xtze-_c4.js";import{a as q,b as G}from"./react-router-DJddit7Q.js";import{P as Z}from"./ProviderItem-CFaegr91.js";import{_ as J,g as K,a as X}from"./react-places-autocomplete-D3qYPf5y.js";import{u as Y}from"./react-top-loading-bar-BLjLFdAM.js";import{F as ee,Q as te}from"./react-icons-8x28c1Op.js";import{r as d}from"./@material-tailwind-CfbTshu2.js";import{L as W}from"./react-router-dom-CiSQRV_j.js";import{C as re}from"./react-content-loader-DBgsaXRA.js";import{c as y,d as se,P as ae}from"./flowbite-react-Fyy4migT.js";import{v as oe}from"./index-WeOTgdyh.js";import"./@floating-ui-DNv8sKgv.js";import"./aria-hidden-DQ5UC2Eg.js";import"./tabbable-DNPBiPWX.js";import"./react-dom-byw35-pb.js";import"./scheduler-CzFDRTuY.js";import"./@babel-CabbEptY.js";import"./@emotion-CEC3ZH7r.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./stylis-YPZU7XtI.js";import"./use-isomorphic-layout-effect-YmIeajr3.js";import"./memoize-one-BdPwpGay.js";import"./@remix-run-Dj_uVd1O.js";import"./prop-types-DepTH4Nk.js";import"./react-redux-Dbcc7wIi.js";import"./use-sync-external-store-CLl2ARCe.js";import"./react-hot-toast-BDpxPdYe.js";import"./goober-vt3s6TGe.js";import"./lodash.debounce-q-m0yV_j.js";import"./classnames-BarBPuyi.js";import"./tailwind-merge-BXtt6hLZ.js";import"./framer-motion-aHfq1aqb.js";import"./tslib-DM0Z-3HQ.js";import"./hey-listen-CLGyRvAf.js";import"./style-value-types-Pspc_Zm6.js";import"./popmotion-CLyVFpOP.js";import"./framesync-BCkQ-MAm.js";import"./@motionone-0R8ZHWcy.js";import"./material-ripple-effects-BS6XNNYc.js";import"./typewriter-effect-BuJ_1VG0.js";import"./country-state-city-B5NRDuuX.js";import"./firebase-CbIrmIWz.js";import"./@firebase-Bu6QwI_o.js";import"./idb-BXWtuYvb.js";import"./@reduxjs-lV2PETub.js";import"./redux-DITMfSWq.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./redux-persist-BVedYr7E.js";import"./javascript-time-ago-BndSdHl7.js";import"./relative-time-format-Cuui0pOH.js";function ot(){const $=q(),[m,N]=a.useState(""),[p,h]=a.useState({}),[u,S]=a.useState(!0),[g,C]=a.useState(!1),[n,k]=a.useState([]),P=a.useRef(null),l=G(),[L,I]=a.useState(window.innerWidth),[f,D]=a.useState(""),w=t=>{D(t.target.id)},[M,F]=a.useState(1),b=9,[E,Q]=a.useState(0),[_,R]=U.useState(!1),A=()=>R(!0),j=()=>R(!1);a.useEffect(()=>{const t=()=>I(window.innerWidth);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const T=oe.map(t=>({value:t.value,label:t.value,isDisabled:t.isDisabled})),H=async t=>{try{const r=await K(t),o=await X(r[0]);h({city:t})}catch(r){console.error("Error occurred in handleSelect:",r)}},O=t=>{t.preventDefault();const r=new URLSearchParams(window.location.search);r.set("searchTerm",m),r.set("address",p.city);const o=r.toString();$(`/search?${o}`),F(1)};a.useEffect(()=>{const t=new URLSearchParams(l.search);console.log("useEffect triggered",l.search);const r=t.get("searchTerm");r&&r!==m&&N(r);const o=async s=>{console.log("fetchProvider called",s),C(!0),S(!0);const i=new URLSearchParams(l.search);i.set("searchTerm",m),i.set("address",s.city);const x=i.toString(),z=await(await fetch(`/server/provider/get?${x}`)).json();k(z.providers),console.log("data",z),S(!1),C(!1)};let c=t.get("address");if(c){const s={city:c};h(s),o(s)}else navigator.geolocation?navigator.geolocation.getCurrentPosition(async s=>{const v=(await(await fetch(`https://api.opencagedata.com/geocode/v1/json?q=${s.coords.latitude}+${s.coords.longitude}&key=fedcc649cb88412196b0d38073698d71`)).json()).results[0].components.city;h({city:v}),o(v)}):console.log("Geolocation is not supported by this browser.");P.current.complete()},[l.search]);const B=async t=>{F(t);const r=(t-1)*b,o=new URLSearchParams(window.location.search);o.set("startIndex",r);const c=o.toString(),i=await(await fetch(`/server/provider/get?${c}`)).json();console.log("page data",i),k(i.providers),Q(i.totalCount),window.scrollTo({top:0,behavior:"smooth"})};return a.useEffect(()=>{B(1)},[]),a.useEffect(()=>{n.length!==0?document.title=`${n.length} BEST ${new URLSearchParams(l.search).get("searchTerm")} near ${p.city}`:document.title="1Step"}),e.jsxs("div",{className:"w-full md:p-8 sm:mx-auto overflow-visible min-h-screen chatbgimage",children:[e.jsx(Y,{ref:P,color:"#ff9900",height:3,speed:1e3})," ",e.jsx("div",{className:"w-full overflow-visible",children:e.jsx(U.Fragment,{children:e.jsxs(d.Drawer,{open:_,onClose:j,className:"p-4 z-50",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx(d.Typography,{variant:"h5",color:"blue-gray",className:"b-2 border-b w-full ",children:"Filters"}),e.jsx(d.IconButton,{variant:"text",color:"blue-gray",onClick:j,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"h-5 w-5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h1",{className:"mb-4",children:"Care Settings"}),e.jsxs("div",{className:"flex flex-col items-start border p-3 border-slate-300 rounded-lg",children:[e.jsxs("div",{className:"",children:[e.jsxs("div",{children:[e.jsx(y,{id:"virtual",color:"blue",checked:f==="virtual",className:"mr-2",onChange:w}),e.jsx("label",{children:"Virtual"})]}),e.jsx(y,{id:"clinic",color:"blue",className:"mr-2",checked:f==="clinic",onChange:w}),e.jsx("label",{children:"In-Clinic"})]}),e.jsxs("div",{children:[e.jsx(y,{id:"home",color:"blue",className:"mr-2",checked:f==="home",onChange:w}),e.jsx("label",{children:"In-Home"})]})]})]}),e.jsxs("div",{className:"flex gap-2 text-center",children:[e.jsx(d.Button,{size:"sm",variant:"outlined",className:"flex gap-2 w-full text-center",onClick:j,children:"Cancel"}),e.jsx(d.Button,{size:"sm",className:"flex gap-2 w-full",children:"Save"})]})]})})}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("form",{className:"p-4 flex sm:w-[600px] justify-center md:outline outline-offset-2 outline-1 outline-gray-300 md:bg-white rounded-lg md:shadow-lg",onSubmit:O,children:e.jsxs("div",{className:"flex flex-row md:flex-row space-x-3 items-center overflow-visible",children:[e.jsxs("div",{className:"transform border-b-2 bg-transparent text-lg duration-300 focus-within:border-amber-500 z-20",children:[e.jsx("label",{htmlFor:"what",className:"font-sans px-2 block text-base text-gray-700 font-bold",children:"What"}),e.jsx(V,{id:"what",value:T.find(t=>t.value===m),onChange:t=>N(t?t.value:""),options:T,placeholder:"Service or provider",isSearchable:!0,className:"md:w-full capitalize trauncate md:text-base text-sm border-slate-800 text-gray-900 px-2 leading-tight",styles:{control:(t,r)=>({...t,backgroundColor:"transparent",minWidth:L>786?210:140,width:"auto",margin:0,border:"0px solid black",boxShadow:(r.isFocused,0),"&:hover":{border:"0px solid black"}}),singleValue:t=>({...t,maxWidth:160,position:"absolute",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),option:(t,r)=>({...t,backgroundColor:r.isSelected?"#F9CB5E":t.backgroundColor,color:r.isSelected?"#4D4A45":t.color}),indicatorSeparator:()=>({}),menu:t=>({...t,width:L>786?240:250})}})]}),e.jsxs("div",{className:"transform border-b-2 md:mb-0.5 mt-1 md:mt-0 bg-transparent text-lg duration-300 focus-within:border-amber-500",children:[e.jsx("label",{htmlFor:"where",className:"block px-2 text-base font-bold text-gray-700",children:"Where"}),e.jsx(J,{value:p.city||"",onChange:t=>h({city:t}),onSelect:H,children:({getInputProps:t,suggestions:r,getSuggestionItemProps:o,loading:c})=>e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{...t({placeholder:"City or Zip Code",className:"w-28 md:w-full appearance-none bg-transparent capitalize md:text-base text-sm border-none text-gray-700 px-3 leading-tight focus:outline-none location-search-input focus:outline-none focus:border-transparent focus:ring-0"})}),e.jsxs("div",{className:"text-base autocomplete-dropdown-container overflow-hidden",style:{position:"absolute",zIndex:1e3},children:[c&&e.jsx("div",{children:"Loading..."}),r.map(s=>{const i=s.active?"suggestion-item--active":"suggestion-item",x=s.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return a.createElement("div",{...o(s,{className:i,style:x}),key:s.placeId},e.jsx("span",{children:s.description}))})]})]})})]}),e.jsx("button",{type:"submit",className:`p-3 h-12 w-12 font-medium text-indigo-950 active:shadow-none rounded-lg shadow md:inline transition-all duration-300 ease-in-out mt-4 mb-4 focus:outline-none focus:border-transparent focus:ring-0 flex items-center justify-center ${g?"bg-primary-50":"btn-color"}`,children:g?e.jsx(se,{color:"purple",size:"md",className:"flex items-center justify-center"}):e.jsx(ee,{className:"h-4 w-6"})})]})})}),e.jsx("hr",{className:"border-gray-300 flex md:hidden"}),e.jsxs("div",{className:"space-y-3 p-",children:[e.jsx("div",{className:"sm:flex-col lg:flex-row lg:w-1/2",children:" "}),e.jsxs("div",{children:[e.jsx("div",{className:"md:py-2 pl-2 md:pl-0 flex items-center",children:e.jsxs(d.Button,{variant:"outlined",className:"flex flex-row text-gray-800 items-center gap-2 font-bold",onClick:A,children:[e.jsx(te,{}),"Filter"]})}),e.jsxs("div",{className:"breadcrumbs flex flex-row font-semibold text-sm mt-2 text-gray-700 md:justify-start justify-center",children:[e.jsx(W,{to:"/",className:"hover:underline hover:text-purple-500",children:"Home"})," >",e.jsxs(W,{to:`/${m}`,className:"hover:underline hover:text-purple-500",children:[" ",new URLSearchParams(l.search).get("searchTerm")]})," "," >",e.jsxs("p",{children:[" ",new URLSearchParams(l.search).get("address")]})]})]}),n.length!==0&&!u&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"font-bold text-xl md:text-3xl text-gray justify-center md:text-start text-center",children:[n.length," Best"," ",new URLSearchParams(l.search).get("searchTerm")," near"," ",new URLSearchParams(l.search).get("address")]})}),e.jsx("div",{className:"md:px-3 2xl:px-40  2xl:mx-auto",children:e.jsx("div",{className:"p-2 grid sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 sm:gap-4 md:gap-8 sm:p-3",children:u?n.length>0?e.jsx("div",{className:"mx-auto grid sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 text-center text-xl text-slate-700 w-full",children:n.map(t=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"md:hidden block mt-4",children:e.jsxs(re,{viewBox:"0 0 320 220",speed:2,height:250,width:360,backgroundColor:"#e2e2e2",foregroundColor:"#D1BEE0",children:[e.jsx("circle",{cx:"40",cy:"60",r:"36"}),e.jsx("rect",{x:"90",y:"34",rx:"4",ry:"4",width:"100",height:"9"}),e.jsx("rect",{x:"90",y:"56",rx:"4",ry:"4",width:"140",height:"13"}),e.jsx("rect",{x:"90",y:"80",rx:"4",ry:"4",width:"290",height:"9"}),e.jsx("rect",{x:"20",y:"110",rx:"4",ry:"4",width:"150",height:"9"}),e.jsx("rect",{x:"20",y:"130",rx:"4",ry:"4",width:"190",height:"9"}),e.jsx("rect",{x:"20",y:"150",rx:"4",ry:"4",width:"100",height:"9"}),"(button)",e.jsx("rect",{x:"20",y:"180",rx:"4",ry:"4",width:"290",height:"34"})]})},t._id)}))}):null:e.jsx(e.Fragment,{children:n.length>0?n.map(t=>e.jsx(Z,{provider:{...t,totalrating:parseFloat(t.totalrating)}},t._id)):e.jsx("p",{className:"text-xl text-slate-700",children:"We couldn't find any doctors for you"})})})}),n.length>0&&E>b&&!u&&!g&&e.jsx("div",{children:e.jsx(ae,{totalPages:Math.ceil(E/b),currentPage:M,onPageChange:B,showIcons:!0})})]})]})}export{ot as default};
