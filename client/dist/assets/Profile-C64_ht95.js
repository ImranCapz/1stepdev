import{r,j as e}from"./react-DiIsFRGf.js";import{a as $,u as B}from"./react-redux-Dbcc7wIi.js";import{t as A,u as M,v as O,w as V}from"./@firebase-Bu6QwI_o.js";import{e as q,o as z,u as J,a as v,b as Y}from"./index-WeOTgdyh.js";import{u as G}from"./react-top-loading-bar-BLjLFdAM.js";import{L as f}from"./react-router-dom-CiSQRV_j.js";import{_ as H}from"./react-hot-toast-BDpxPdYe.js";import{n as K,o as Q,p as W}from"./react-icons-8x28c1Op.js";import"./@floating-ui-DNv8sKgv.js";import"./aria-hidden-DQ5UC2Eg.js";import"./tabbable-DNPBiPWX.js";import"./react-dom-byw35-pb.js";import"./scheduler-CzFDRTuY.js";import"./use-sync-external-store-CLl2ARCe.js";import"./idb-BXWtuYvb.js";import"./typewriter-effect-BuJ_1VG0.js";import"./react-router-DJddit7Q.js";import"./@remix-run-Dj_uVd1O.js";import"./react-select-xtze-_c4.js";import"./@babel-CabbEptY.js";import"./@emotion-CEC3ZH7r.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./stylis-YPZU7XtI.js";import"./use-isomorphic-layout-effect-YmIeajr3.js";import"./memoize-one-BdPwpGay.js";import"./country-state-city-B5NRDuuX.js";import"./prop-types-DepTH4Nk.js";import"./flowbite-react-Fyy4migT.js";import"./firebase-CbIrmIWz.js";import"./tslib-DM0Z-3HQ.js";import"./@reduxjs-lV2PETub.js";import"./redux-DITMfSWq.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./@material-tailwind-CfbTshu2.js";import"./classnames-BarBPuyi.js";import"./tailwind-merge-BXtt6hLZ.js";import"./framer-motion-aHfq1aqb.js";import"./hey-listen-CLGyRvAf.js";import"./style-value-types-Pspc_Zm6.js";import"./popmotion-CLyVFpOP.js";import"./framesync-BCkQ-MAm.js";import"./@motionone-0R8ZHWcy.js";import"./material-ripple-effects-BS6XNNYc.js";import"./redux-persist-BVedYr7E.js";import"./javascript-time-ago-BndSdHl7.js";import"./relative-time-format-Cuui0pOH.js";import"./goober-vt3s6TGe.js";function Ge(){const j=r.useRef(null),[d,w]=r.useState(),[n,y]=r.useState(0),[S,P]=r.useState(!1),[c,b]=r.useState({}),p=r.useRef(null),[C,U]=r.useState(!1),[E,u]=r.useState(!1),[x,N]=r.useState([]),{currentUser:l,loading:D,error:_}=$(t=>t.user),o=B();r.useEffect(()=>{d&&k(d)},[d]);const k=async t=>{const s=A(z),a=new Date().getTime()+t.name,h=M(s,a),m=O(h,t);m.on("state_changed",i=>{const L=i.bytesTransferred/i.totalBytes*100;y(Math.round(L))},i=>{P(!0)},()=>{V(m.snapshot.ref).then(i=>b({...c,profilePicture:i}))})},F=t=>{t.preventDefault(),j.current.click()},R=async t=>{t.preventDefault();try{p.current.continuousStart(50),o(J());const a=await(await fetch(`/server/user/update/${l._id}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)})).json();if(a.success===!1){o(v(a));return}o(Y(a)),U(!0)}catch(s){o(v(s))}finally{p.current.complete()}},g=t=>{b({...c,[t.target.id]:t.target.value})},T=async()=>{try{u(!1);const s=await(await fetch(`/server/user/providers/${l._id}`)).json();if(s.success===!1){u(!0);return}N(s)}catch{u(!0)}},I=async t=>{try{const a=await(await fetch(`/server/provider/delete/${t}`,{method:"DELETE"})).json();if(a.success===!1)return console.log(a),H.success("Provider Deleted Successfully");N(h=>h.filter(m=>m._id!==t))}catch(s){console.log(s.message)}};return e.jsxs("div",{className:"bg-slate-100 p-3 mx-auto",children:[e.jsx(G,{ref:p,color:"#ff9900",height:3}),e.jsxs("h1",{className:"flex flex-col p-2 mb-4 font-bold text-2xl text-zinc-800",children:["Account Settings :"," "]}),e.jsxs("div",{className:"p-10 bg-white rounded-lg border",children:[e.jsx("div",{className:"",children:e.jsxs("form",{className:"flex flex-col items-start gap-7",onSubmit:R,children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("input",{type:"file",id:"profilePicture",name:"profilePicture",ref:j,hidden:!0,accept:"image/*",onChange:t=>w(t.target.files[0])}),e.jsx("div",{className:"relative w-34 h-34 mx-auto group",children:e.jsxs("label",{htmlFor:"profilePicture",className:"w-24 h-24 cursor-pointer",onClick:F,children:[e.jsx("img",{src:c.profilePicture||l.profilePicture,alt:"profile",className:"w-32 h-32 rounded-full object-cover border-4 border-[lightgray]"}),e.jsxs("div",{className:"hidden rounded-full group-hover:flex flex-col items-center justify-center absolute inset-0 bg-gray-800 bg-opacity-60",children:[e.jsx("img",{src:"https://www.svgrepo.com/show/33565/upload.svg",alt:"camera",className:"w-10 h-10"}),e.jsx("p",{className:"text-white text-xs",children:"Change Picture"})]})]})}),e.jsx("p",{className:"text-sm self-center",children:S?e.jsx("span",{className:"text-red-500",children:"Please upload a valid image"}):n>0&&n<100?e.jsx("span",{children:`Uploading: ${n}%`}):n===100?e.jsx("span",{className:"text-green-700",children:"Image Uploaded Successfully"}):""})]}),e.jsxs("div",{className:"flex flex-col md:w-1/2 gap-2 relative",children:[e.jsx("label",{htmlFor:"username",className:"text-xl text-slate-600",children:"Username"}),e.jsxs("div",{className:"flex items-center mt-2 w-50 h-14 rounded-lg ring-0 ring-inset border-0 focus:ring-2 bg-slate-100",children:[e.jsx(K,{className:"ml-3 text-xl text-gray-400"}),e.jsx("input",{defaultValue:l.username,type:"text",id:"username",required:!0,placeholder:"username",className:"flex-grow text-xl pl-3 text-gray-800 bg-state-100 p-3 rounded-lg ring-0 ring-inset ring-gray-300 py-1.5 border-0 focus:ring-2 bg-slate-100",onChange:g})]}),e.jsx("label",{htmlFor:"username",className:"text-xl mt-4 text-slate-600",children:"Email Address"}),e.jsxs("div",{className:"flex items-center mt-2 h-14 rounded-lg ring-0 ring-inset border-0 focus:ring-2 bg-slate-100",children:[e.jsx(Q,{className:"ml-3 text-xls w-5 h-5 text-gray-400"}),e.jsx("input",{defaultValue:l.email,type:"email",id:"email",placeholder:"email",className:"flex-grow text-xl pl-3 w-3/4 mx-auto text-gray-500 bg-state-100 p-3 rounded-lg ring-0 ring-inset ring-gray-300 py-1.5 border-0 focus:ring-2 bg-slate-100",onChange:g,disabled:!0})]}),e.jsx("label",{htmlFor:"username",className:"text-xl mt-4 text-slate-600",children:"Password"}),e.jsxs("div",{className:"flex items-center mt-2 w-50 h-14 rounded-lg ring-0 ring-inset border-0 focus:ring-2 bg-slate-100",children:[e.jsx(W,{className:"ml-3 text-xl text-gray-400"}),e.jsx("input",{type:"text",id:"password",placeholder:"password",className:"flex-grow text-xl pl-3 text-gray-500 bg-state-100 p-3 rounded-lg ring-0 ring-inset ring-gray-300 py-1.5 border-0 focus:ring-2 bg-slate-100",onChange:g})]}),e.jsx("button",{className:"bg-blue-600 text-xl font-semibold text-white mt-6 p-3 rounded-lg hover:opacity-95 transition-all disabled:opacity-80",children:D?"Saving...":"Save Changes"})]})]})}),e.jsx("p",{className:"text-red-700 mt-7",children:_&&"something went wrong"}),e.jsx("p",{className:"text-green-700 mt-7",children:C&&"Updated Successfully"}),e.jsx("button",{onClick:T,className:"text-green-700 w-full",children:"Show Created Provider"}),e.jsx("p",{className:"text-red-700 mt-7",children:E?"Error showing Provider":""}),x&&x.length>0&&e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h1",{className:"text-center mt-7 text-2xl font-semibold",children:"Your Providers"}),x.map(t=>e.jsxs("div",{className:" rounded-lg p-3 flex gap-4 justify-between items-center",children:[e.jsx(f,{to:`/provider/${t._id}`,children:e.jsx("img",{src:t.imageUrls[0],alt:"provider cover",className:"h-16 w-16 object-contain"})}),e.jsx(f,{onClick:()=>o(q(t._id)),className:"flex-1 font-semibold hover:underline truncate",to:`/provider/${t._id}`,children:e.jsx("p",{children:t.fullName})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("button",{onClick:()=>I(t._id),className:"text-red-700 uppercase",children:"Delete"}),e.jsx(f,{to:"/dashboard?tab=providers",children:e.jsx("button",{className:"text-green-700 uppercase",children:"EDIT"})})]})]},t._id))]})]})]})}export{Ge as default};
