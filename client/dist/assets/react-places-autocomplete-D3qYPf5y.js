import{r as w}from"./react-DiIsFRGf.js";import{p as y}from"./prop-types-DepTH4Nk.js";import{l as b}from"./lodash.debounce-q-m0yV_j.js";var l={},f={},p={};Object.defineProperty(p,"__esModule",{value:!0});p.compose=function(){for(var n=arguments.length,r=Array(n),e=0;e<n;e++)r[e]=arguments[e];return function(){for(var t=arguments.length,o=Array(t),u=0;u<t;u++)o[u]=arguments[u];r.forEach(function(i){return i&&i.apply(void 0,o)})}};p.pick=function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),t=1;t<r;t++)e[t-1]=arguments[t];return e.reduce(function(o,u){return n&&n.hasOwnProperty(u)&&(o[u]=n[u]),o},{})};Object.defineProperty(f,"__esModule",{value:!0});var g=Object.assign||function(a){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(a[e]=r[e])}return a},A=function(){function a(n,r){for(var e=0;e<r.length;e++){var t=r[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,r,e){return r&&a(n.prototype,r),e&&a(n,e),n}}(),I=w,P=h(I),O=y,s=h(O),_=b,M=h(_),c=p;function h(a){return a&&a.__esModule?a:{default:a}}function x(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function E(a,n){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:a}function D(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(a,n):a.__proto__=n)}var C=function(n){return{mainText:n.main_text,secondaryText:n.secondary_text}},m=function(a){D(n,a);function n(r){x(this,n);var e=E(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,r));return e.init=function(){if(!window.google)throw new Error("[react-places-autocomplete]: Google Maps JavaScript API library must be loaded. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");if(!window.google.maps.places)throw new Error("[react-places-autocomplete]: Google Maps Places library must be loaded. Please add `libraries=places` to the src URL. See: https://github.com/kenny-hibino/react-places-autocomplete#load-google-library");e.autocompleteService=new window.google.maps.places.AutocompleteService,e.autocompleteOK=window.google.maps.places.PlacesServiceStatus.OK,e.setState(function(t){return t.ready?null:{ready:!0}})},e.autocompleteCallback=function(t,o){if(e.setState({loading:!1}),o!==e.autocompleteOK){e.props.onError(o,e.clearSuggestions);return}var u=e.props.highlightFirstSuggestion;e.setState({suggestions:t.map(function(i,S){return{id:i.id,description:i.description,placeId:i.place_id,active:!!(u&&S===0),index:S,formattedSuggestion:C(i.structured_formatting),matchedSubstrings:i.matched_substrings,terms:i.terms,types:i.types}})})},e.fetchPredictions=function(){var t=e.props.value;t.length&&(e.setState({loading:!0}),e.autocompleteService.getPlacePredictions(g({},e.props.searchOptions,{input:t}),e.autocompleteCallback))},e.clearSuggestions=function(){e.setState({suggestions:[]})},e.clearActive=function(){e.setState({suggestions:e.state.suggestions.map(function(t){return g({},t,{active:!1})})})},e.handleSelect=function(t,o,u){e.clearSuggestions(),e.props.onSelect?e.props.onSelect(t,o,u):e.props.onChange(t)},e.getActiveSuggestion=function(){return e.state.suggestions.find(function(t){return t.active})},e.selectActiveAtIndex=function(t){var o=e.state.suggestions.find(function(u){return u.index===t}).description;e.setActiveAtIndex(t),e.props.onChange(o)},e.selectUserInputValue=function(){e.clearActive(),e.props.onChange(e.state.userInputValue)},e.handleEnterKey=function(){var t=e.getActiveSuggestion();t===void 0?e.handleSelect(e.props.value,null,null):e.handleSelect(t.description,t.placeId,t)},e.handleDownKey=function(){if(e.state.suggestions.length!==0){var t=e.getActiveSuggestion();t===void 0?e.selectActiveAtIndex(0):t.index===e.state.suggestions.length-1?e.selectUserInputValue():e.selectActiveAtIndex(t.index+1)}},e.handleUpKey=function(){if(e.state.suggestions.length!==0){var t=e.getActiveSuggestion();t===void 0?e.selectActiveAtIndex(e.state.suggestions.length-1):t.index===0?e.selectUserInputValue():e.selectActiveAtIndex(t.index-1)}},e.handleInputKeyDown=function(t){switch(t.key){case"Enter":t.preventDefault(),e.handleEnterKey();break;case"ArrowDown":t.preventDefault(),e.handleDownKey();break;case"ArrowUp":t.preventDefault(),e.handleUpKey();break;case"Escape":e.clearSuggestions();break}},e.setActiveAtIndex=function(t){e.setState({suggestions:e.state.suggestions.map(function(o,u){return u===t?g({},o,{active:!0}):g({},o,{active:!1})})})},e.handleInputChange=function(t){var o=t.target.value;if(e.props.onChange(o),e.setState({userInputValue:o}),!o){e.clearSuggestions();return}e.props.shouldFetchSuggestions&&e.debouncedFetchPredictions()},e.handleInputOnBlur=function(){e.mousedownOnSuggestion||e.clearSuggestions()},e.getActiveSuggestionId=function(){var t=e.getActiveSuggestion();return t?"PlacesAutocomplete__suggestion-"+t.placeId:void 0},e.getIsExpanded=function(){return e.state.suggestions.length>0},e.getInputProps=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.hasOwnProperty("value"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `value`. Use `value` prop instead");if(t.hasOwnProperty("onChange"))throw new Error("[react-places-autocomplete]: getInputProps does not accept `onChange`. Use `onChange` prop instead");var o={type:"text",autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":e.getIsExpanded(),"aria-activedescendant":e.getActiveSuggestionId(),disabled:!e.state.ready};return g({},o,t,{onKeyDown:(0,c.compose)(e.handleInputKeyDown,t.onKeyDown),onBlur:(0,c.compose)(e.handleInputOnBlur,t.onBlur),value:e.props.value,onChange:function(i){e.handleInputChange(i)}})},e.getSuggestionItemProps=function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=e.handleSuggestionMouseEnter.bind(e,t.index),i=e.handleSuggestionClick.bind(e,t);return g({},o,{key:t.id,id:e.getActiveSuggestionId(),role:"option",onMouseEnter:(0,c.compose)(u,o.onMouseEnter),onMouseLeave:(0,c.compose)(e.handleSuggestionMouseLeave,o.onMouseLeave),onMouseDown:(0,c.compose)(e.handleSuggestionMouseDown,o.onMouseDown),onMouseUp:(0,c.compose)(e.handleSuggestionMouseUp,o.onMouseUp),onTouchStart:(0,c.compose)(e.handleSuggestionTouchStart,o.onTouchStart),onTouchEnd:(0,c.compose)(e.handleSuggestionMouseUp,o.onTouchEnd),onClick:(0,c.compose)(i,o.onClick)})},e.handleSuggestionMouseEnter=function(t){e.setActiveAtIndex(t)},e.handleSuggestionMouseLeave=function(){e.mousedownOnSuggestion=!1,e.clearActive()},e.handleSuggestionMouseDown=function(t){t.preventDefault(),e.mousedownOnSuggestion=!0},e.handleSuggestionTouchStart=function(){e.mousedownOnSuggestion=!0},e.handleSuggestionMouseUp=function(){e.mousedownOnSuggestion=!1},e.handleSuggestionClick=function(t,o){o&&o.preventDefault&&o.preventDefault();var u=t.description,i=t.placeId;e.handleSelect(u,i,t),setTimeout(function(){e.mousedownOnSuggestion=!1})},e.state={loading:!1,suggestions:[],userInputValue:r.value,ready:!r.googleCallbackName},e.debouncedFetchPredictions=(0,M.default)(e.fetchPredictions,r.debounce),e}return A(n,[{key:"componentDidMount",value:function(){var e=this.props.googleCallbackName;if(e){var t=window.google&&window.google.maps&&window.google.maps.places;t?this.init():window[e]=this.init}else this.init()}},{key:"componentWillUnmount",value:function(){var e=this.props.googleCallbackName;e&&window[e]&&delete window[e]}},{key:"render",value:function(){return this.props.children({getInputProps:this.getInputProps,getSuggestionItemProps:this.getSuggestionItemProps,loading:this.state.loading,suggestions:this.state.suggestions})}}]),n}(P.default.Component);m.propTypes={onChange:s.default.func.isRequired,value:s.default.string.isRequired,children:s.default.func.isRequired,onError:s.default.func,onSelect:s.default.func,searchOptions:s.default.shape({bounds:s.default.object,componentRestrictions:s.default.object,location:s.default.object,offset:s.default.oneOfType([s.default.number,s.default.string]),radius:s.default.oneOfType([s.default.number,s.default.string]),types:s.default.array}),debounce:s.default.number,highlightFirstSuggestion:s.default.bool,shouldFetchSuggestions:s.default.bool,googleCallbackName:s.default.string};m.defaultProps={onError:function(n,r){return console.error(`[react-places-autocomplete]: error happened when fetching data from Google Maps API.
Please check the docs here (https://developers.google.com/maps/documentation/javascript/places#place_details_responses)
Status: `,n)},searchOptions:{},debounce:200,highlightFirstSuggestion:!1,shouldFetchSuggestions:!0};f.default=m;var d={};Object.defineProperty(d,"__esModule",{value:!0});d.geocodeByAddress=function(n){var r=new window.google.maps.Geocoder,e=window.google.maps.GeocoderStatus.OK;return new Promise(function(t,o){r.geocode({address:n},function(u,i){i!==e&&o(i),t(u)})})};d.getLatLng=function(n){return new Promise(function(r,e){try{var t={lat:n.geometry.location.lat(),lng:n.geometry.location.lng()};r(t)}catch(o){e(o)}})};d.geocodeByPlaceId=function(n){var r=new window.google.maps.Geocoder,e=window.google.maps.GeocoderStatus.OK;return new Promise(function(t,o){r.geocode({placeId:n},function(u,i){i!==e&&o(i),t(u)})})};Object.defineProperty(l,"__esModule",{value:!0});var k=l.getLatLng=l.geocodeByPlaceId=U=l.geocodeByAddress=void 0,K=f,L=T(K),v=d;function T(a){return a&&a.__esModule?a:{default:a}}var U=l.geocodeByAddress=v.geocodeByAddress;l.geocodeByPlaceId=v.geocodeByPlaceId;k=l.getLatLng=v.getLatLng;var j=l.default=L.default;export{j as _,k as a,U as g};
