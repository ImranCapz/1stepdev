import{r,j as a}from"./react-DiIsFRGf.js";import{u as C}from"./react-router-Ck6p_Z-K.js";import{S as w}from"./react-select-xtze-_c4.js";import{r as N}from"./react-icons-4Z_jIp8v.js";import{C as P}from"./country-state-city-B5NRDuuX.js";import{s as k}from"./suggestions.jsx-CTOk9yr1.js";import{P as W}from"./prop-types-DepTH4Nk.js";const E=({defaultSearchTerm:f})=>{const d=C(),[h,m]=r.useState(f||""),[l,i]=r.useState(""),[u,x]=r.useState([]),[F,g]=r.useState([]),[c,v]=r.useState(window.innerWidth),p=k.map(e=>({value:e.value,label:e.value,isDisabled:e.isDisabled})),y=async e=>{const t=new URLSearchParams(window.location.search);t.set("address",e);const s=t.toString(),n=await(await fetch(`/server/provider/get?${s}`)).json();g(n)},S=e=>{e.preventDefault();const t=new URLSearchParams;if(t.set("searchTerm",h),!l)fetch("https://ipapi.co/json/").then(s=>s.json()).then(async s=>{const o=s.city;i(o),t.set("address",o);const n=t.toString();d(`/search?${n}`)});else{t.set("address",l);const s=t.toString();d(`/search?${s}`)}};return r.useEffect(()=>{const e=new URLSearchParams(location.search),t=e.get("searchTerm");let s=e.get("address");t&&m(t),s?(i(s),y(s)):fetch("https://ipapi.co/json/").then(o=>o.json()).then(o=>{const n=o.region_code,j=P.getCitiesOfState("IN",n);x(j.map(b=>({value:b.name,label:b.name}))),i(o.city)})},[]),r.useEffect(()=>{const e=()=>v(window.innerWidth);return window.addEventListener("resize",e),()=>window.removeEventListener("Resize",e)},[]),a.jsx("div",{className:"pl-5 pr-5 flex max-w-[750px] max-h-[300px] justify-center outline outline-offset-2 outline-1 outline-gray-300 bg-white rounded-lg",children:a.jsxs("form",{className:"flex flex-row space-x-3 items-center",onSubmit:S,children:[a.jsxs("div",{className:"transform border-b-2 bg-transparent text-lg duration-300 focus-within:border-amber-500 mb-8 z-10",children:[a.jsx("label",{htmlFor:"what",className:"font-sans py-1 px-2 block text-base text-gray-700 font-bold mt-8",children:"What"}),a.jsx(w,{id:"what",value:p.find(e=>e.value===h),onChange:e=>m(e.value),options:p,placeholder:"search provider",required:!0,isSearchable:!0,className:"capitalize trauncate text-xs md:text-sm border-slate-800 w-full text-gray-900 leading-tight focus:outline-none overflow-visible",styles:{control:(e,t)=>({...e,backgroundColor:"transparent",minWidth:c>786?210:140,width:"auto",margin:0,border:"0px solid black",boxShadow:(t.isFocused,0),"&:hover":{border:"0px solid black"}}),singleValue:e=>({...e,maxWidth:160,position:"absolute",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),option:(e,t)=>({...e,backgroundColor:t.isSelected?"#F9CB5E":e.backgroundColor,color:t.isSelected?"#4D4A45":e.color}),indicatorSeparator:()=>({}),menu:e=>({...e,width:c>786?240:250})}})]}),a.jsxs("div",{className:"transform border-b-2 bg-transparent text-lg duration-300 focus-within:border-amber-500 mb-8 z-10",children:[a.jsx("label",{htmlFor:"where",className:"block py-1 px-2 text-base font-bold text-gray-700 mt-8",children:"Where"}),a.jsx(w,{type:"address",id:"address",placeholder:"City, Pin Code",value:u.find(e=>e.value===l),onChange:e=>i(e.value),options:u,isSearchable:!0,className:"capitalize trauncate text-xs md:text-sm border-slate-800 w-full text-gray-900 leading-tight focus:outline-none overflow-visible",styles:{control:e=>({...e,backgroundColor:"transparent !important",minWidth:c<786?110:260,width:"auto",border:"none",outline:"none",boxShadow:"none",transition:"all 0.3s ease"}),singleValue:e=>({...e,maxWidth:160,position:"absolute",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),option:(e,t)=>({...e,backgroundColor:t.isSelected?"#F9CB5E":e.backgroundColor,color:t.isSelected?"#4D4A45":e.color})}})]}),a.jsx("button",{type:"submit","data-ripple-light":"true",className:"py-4 px-5 font-medium text-indigo-950 btn-color transition ease-in-out duration-300 disabled:opacity-50 disabled:shadow-none disabled:pointer-events-none text-xs  rounded-lg shadow-md shadow-gray-900/10 hover:shadow-lg hover:shadow-gray-900/20 focus:opacity-[0.85] focus:shadow-none active:opacity-[0.85] active:shadow-none mt-4 mb-4 mr-4",children:a.jsx(N,{})})]})})};E.propTypes={defaultSearchTerm:W.string};export{E as S};
