import{r as l,j as e}from"./react-DiIsFRGf.js";import{U as y,Y as b,Z as S,_ as R,$ as E,a0 as P,a1 as C}from"./react-icons-4Z_jIp8v.js";import{u as f}from"./react-redux-Cmcgb_ry.js";import{_ as c}from"./react-hot-toast-BDpxPdYe.js";import"./@floating-ui-DNv8sKgv.js";import"./aria-hidden-DQ5UC2Eg.js";import"./tabbable-DNPBiPWX.js";import"./react-dom-byw35-pb.js";import"./scheduler-CzFDRTuY.js";import"./use-sync-external-store-CLl2ARCe.js";import"./goober-vt3s6TGe.js";function H(){const[r,u]=l.useState(""),[o,h]=l.useState(null),[n,j]=l.useState(0),[v,d]=l.useState(!1),{currentUser:x}=f(t=>t.user),[g,m]=l.useState(!1),{id:p}=f(t=>t.provider),a=p;l.useEffect(()=>{(async()=>{try{m(!0);const i=await(await fetch(`/server/provider/get/${a}`)).json();u(i)}catch(s){console.error("Error:",s)}m(!1)})()},[a]),l.useEffect(()=>{(async()=>{try{const i=await(await fetch(`/server/rating/getreview/${a}`)).json();j(i)}catch(s){console.error("Error:",s)}})()},[a]);const w=async()=>{if(!o){c.error("Please Select a Review");return}if(!x){c.error("Please Login to Post Review");return}const t={"Strong No":1,No:2,Maybe:3,Yes:4,"Strong Yes":5};try{d(!0);const s=await fetch("/server/rating/review",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:x._id,star:t[o],providerId:a})}),i=await s.json();s.status===200&&c.success("Review Posted Successfully"),d(!1)}catch(s){console.error("Error:",s)}},N=[{value:"Strong No",icon:e.jsx(S,{}),text:"1 star",color:"bg-red-100",textColor:"text-red-600"},{value:"No",icon:e.jsx(R,{}),text:"2 star",color:"bg-orange-100",textColor:"text-orange-600"},{value:"Maybe",icon:e.jsx(E,{}),text:"3 star",color:"bg-amber-100",textColor:"text-amber-600"},{value:"Yes",icon:e.jsx(P,{}),text:"4 star",color:"bg-green-100",textColor:"text-green-600"},{value:"Strong Yes",icon:e.jsx(C,{}),text:"5 star",color:"bg-emerald-100",textColor:"text-emerald-600"}];return e.jsx("div",{className:"min-h-screen",children:g?e.jsx(e.Fragment,{}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-52vh md:h-72vh bg-listbg bg-cover bg-center flex flex-col justify-center items-center text-white",children:e.jsxs("div",{className:"",children:[e.jsx("h1",{className:"flex flex-col items-center text-base md:text-xl font-semibold text-zinc-600",children:"YOUR REVIEW FOR"}),e.jsx("h1",{className:"flex flex-col items-center text-3xl md:text-5xl font-bold md:mt-6  text-gray-700",children:r.fullName})]})}),e.jsx("div",{className:"w-full flex flex-col md:flex-row justify-center items-center",children:e.jsxs("div",{className:"md:w-2/3 mx-auto flex flex-col-reverse md:flex-row justify-center items-start",children:[e.jsx("div",{className:"w-full md:w-2/3 p-4",children:e.jsxs("div",{className:"flex flex-col justify-center outline outline-offset-4 outline-1 outline-gray-300 bg-white rounded-lg",children:[e.jsx("div",{className:"p-3 font-semibold text-slate-700",children:"Would you recommend this provider?*"}),e.jsx("div",{className:"flex flex-row gap-5 p-2",children:N.map(t=>e.jsx("button",{onClick:()=>h(t.value),onMouseEnter:s=>{s.currentTarget.classList.remove("bg-white","text-gray-700"),s.currentTarget.classList.add(t.color,t.textColor)},onMouseLeave:s=>{o!==t.value&&(s.currentTarget.classList.remove(t.color,t.textColor),s.currentTarget.classList.add("bg-white","text-gray-700"))},className:`border p-6 border-gray-300 sm:w-full sm:pb-full relative md:w-36 md:h-24 flex flex-col items-center justify-center rounded-lg transition-colors duration-200 ${o===t.value?t.color+" "+t.textColor:"bg-white text-gray-700"}`,children:e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"flex items-center  justify-center md:text-xl mt-2 mb-1",children:t.icon}),e.jsx("div",{className:"hidden md:block font-semibold mb-1",children:t.value}),e.jsx("span",{className:"flex items-center flex-col text-xs",children:t.text})]})},t.value))}),e.jsx("div",{className:"border-t mt-2 mb-2 border-gray-300"}),e.jsx("div",{className:"flex flex-col items-center",children:e.jsx("button",{onClick:w,className:"w-full bg-sky-300 rounded-lg md:p-4 p-3 text-gray-700 font-bold",children:v?"Posting Review...":"Post Review"})})]})}),e.jsxs("div",{className:"w-full flex flex-col md:w-2/3 items-center mt-4 mb-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:r.profilePicture,alt:"profile",className:"rounded-full size-32 object-cover shadow-sm "})}),e.jsx("p",{className:"text-2xl text-slate-700  mt-2 font-semibold",children:r.fullName}),e.jsx("div",{className:"md:text-sm text-xs text-slate-700 mt-2 text-center font-semibold",children:Array.isArray(r.name)?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:r.name.slice(0,2).join(", ")}),r.name.length>2?e.jsx("p",{children:r.name.slice(2).join(", ")}):null,r.name.length>3?e.jsx("p",{children:`+${r.name.length-2}more`}):null]}):e.jsx("p",{children:r.name})}),e.jsxs("div",{className:"flex mt-2",children:[e.jsx(y,{className:"h-4 w-4 items-center text-sky-300"}),e.jsxs("p",{className:"flex flex-col text-sm text-gray-700 truncate w-full md:w-auto",children:[r.address&&`${r.address.city}, ${r.address.pincode}`,e.jsx("span",{className:"block md:inline text-center"})]})]}),e.jsxs("div",{className:"flex flex-row items-center justify-center mt-2 gap-2",children:[e.jsx("div",{className:"text-slate-700",children:e.jsx(b,{})}),e.jsx("h1",{className:"text-slate-700 text-sm",children:n.totalrating}),e.jsxs("h1",{className:"text-slate-700",children:["(",n.totalratings," Reviews)"]})]})]})]})})]})})}export{H as default};
