import{r as l,j as e}from"./react-DiIsFRGf.js";import{S as v,B as Z,a as h}from"./flowbite-react-Fyy4migT.js";import{c as ee,W as L,H as se,X as re,Y as ae}from"./react-icons-8x28c1Op.js";import{b as k,a as R}from"./react-router-DJddit7Q.js";import{L as S}from"./react-router-dom-CiSQRV_j.js";import{u as te,a as F}from"./react-redux-Dbcc7wIi.js";import{s as le,o as oe}from"./index-WeOTgdyh.js";import ie from"./DashUsers-PugLcR0l.js";import{_ as ne}from"./react-countup-uwXQ9Xr-.js";import{t as de,u as ce,v as ue,w as me}from"./@firebase-Bu6QwI_o.js";import{_ as N}from"./react-hot-toast-BDpxPdYe.js";import{S as C}from"./react-select-xtze-_c4.js";import{S as pe,C as he,a as E}from"./country-state-city-B5NRDuuX.js";import"./@floating-ui-DNv8sKgv.js";import"./aria-hidden-DQ5UC2Eg.js";import"./tabbable-DNPBiPWX.js";import"./react-dom-byw35-pb.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-Dj_uVd1O.js";import"./use-sync-external-store-CLl2ARCe.js";import"./typewriter-effect-BuJ_1VG0.js";import"./prop-types-DepTH4Nk.js";import"./firebase-CbIrmIWz.js";import"./tslib-DM0Z-3HQ.js";import"./@reduxjs-lV2PETub.js";import"./redux-DITMfSWq.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./react-top-loading-bar-BLjLFdAM.js";import"./@material-tailwind-CfbTshu2.js";import"./classnames-BarBPuyi.js";import"./tailwind-merge-BXtt6hLZ.js";import"./framer-motion-aHfq1aqb.js";import"./hey-listen-CLGyRvAf.js";import"./style-value-types-Pspc_Zm6.js";import"./popmotion-CLyVFpOP.js";import"./framesync-BCkQ-MAm.js";import"./@motionone-0R8ZHWcy.js";import"./material-ripple-effects-BS6XNNYc.js";import"./redux-persist-BVedYr7E.js";import"./javascript-time-ago-BndSdHl7.js";import"./relative-time-format-Cuui0pOH.js";import"./@babel-CabbEptY.js";import"./@emotion-CEC3ZH7r.js";import"./hoist-non-react-statics-Buxaj0Kl.js";import"./react-is-8JwjhRSi.js";import"./stylis-YPZU7XtI.js";import"./use-isomorphic-layout-effect-YmIeajr3.js";import"./memoize-one-BdPwpGay.js";import"./idb-BXWtuYvb.js";import"./goober-vt3s6TGe.js";import"./countup.js-BQgg0Ipr.js";function fe(){const u=k(),[o,f]=l.useState(""),g=te(),m=R();l.useEffect(()=>{const n=new URLSearchParams(u.search).get("tab");n&&f(n)},[u.search]);const x=async()=>{try{const i=await fetch("/server/auth/signout",{method:"GET"}),n=await i.json();i.ok?(g(le()),m("/")):console.log(n.message)}catch(i){console.log(i.message)}};return e.jsx(v,{className:"w-full md:w-56",children:e.jsx(v.Items,{children:e.jsxs(v.ItemGroup,{className:"flex flex-col gap-2",children:[e.jsx(S,{to:"/admin-dashboard?tab=dashboard",children:e.jsx(v.Item,{active:o==="dashboard",icon:ee,label:"Admin",labelColor:"light",as:"div",children:"Dashboard"})}),e.jsx(S,{to:"/admin-dashboard?tab=users",children:e.jsx(v.Item,{active:o==="users",icon:L,labelColor:"light",as:"div",children:"Users"})}),e.jsx(S,{to:"/admin-dashboard?tab=createprovider",children:e.jsx(v.Item,{active:o==="createprovider",icon:L,labelColor:"light",as:"div",children:"Provider"})}),e.jsx(v.Item,{icon:se,className:"cursor-pointer",onClick:x,children:"Sign Out"})]})})})}function ge(){const{currentUser:u}=F(n=>n.user),[o,f]=l.useState([]),[g,m]=l.useState(0),[x,i]=l.useState(0);return l.useEffect(()=>{const n=async()=>{try{const p=await fetch("/server/user/getusers?limit=5"),j=await p.json();p.ok&&(f(j.users),m(j.totalUsers),i(j.lastMonthUsers))}catch(p){console.log(p.message)}};u.isAdmin&&n()},[u]),e.jsxs("div",{className:"p-3 md:mx-auto",children:[e.jsxs("div",{className:"flex flex-col p-3 bg-sky-200 gap-4 md:w-72 w-full rounded-md shadow-md",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-gray-500 font-semibold text-md uppercase",children:"Total Users"}),e.jsxs("p",{className:"text-2xl",children:[" ",e.jsx(ne,{end:g,duration:1})]})]}),e.jsx(re,{className:"bg-sky-500 text-white rounded-full text-5xl p-3"})]}),e.jsxs("div",{className:"flex gap-2 text-sm",children:[e.jsxs("span",{className:"text-green-500 flex items-center",children:[e.jsx(ae,{}),x]}),e.jsx("div",{className:"text-gray-500 ",children:"Last Month"})]})]}),e.jsx("div",{className:"",children:e.jsxs("div",{className:"flex flex-col w-full md:w-auto shadow-md p-2 rounded-lg ",children:[e.jsxs("div",{className:"flex justify-between p-3 text-sm font font-semibold",children:[e.jsx("h1",{className:"text-center p-2",children:"Recent Users"}),e.jsx(Z,{children:e.jsx(S,{to:"/admin-dashboard?tab=users",children:"See all"})})]}),e.jsxs(h,{hoverable:!0,children:[e.jsxs(h.Head,{children:[e.jsx(h.HeadCell,{children:"User Image"}),e.jsx(h.HeadCell,{children:"Email"})]}),o&&o.map(n=>e.jsx(h.Body,{className:"divide-y",children:e.jsxs(h.Row,{className:"bg-white",children:[e.jsx(h.Cell,{children:e.jsx("img",{src:n.profilePicture,alt:"user profile picture",className:"w-10 h-10 rounded-full"})}),e.jsx(h.Cell,{children:n.email})]})},n._id))]})]})})]})}function xe(){const{currentUser:u}=F(s=>s.user),[o,f]=l.useState([]),[g,m]=l.useState(""),[x,i]=l.useState(!1),[n,p]=l.useState(!1),[j,U]=l.useState(!1),H=R(),q=l.useRef(null),[r,c]=l.useState({imageUrls:[],name:"",email:"",qualification:"",license:"",fullName:"",experience:"",phone:"",address:{addressLine1:"",country:"",state:"",city:"",street:"",pincode:""},therapytype:"",availability:{morningStart:"08:00",morningEnd:"12:00",eveningStart:"13:00",eveningEnd:"17:00"},regularPrice:"",description:"",profilePicture:""}),B=s=>{c({...r,imageUrls:r.imageUrls.filter((a,t)=>t!==s)})},M=()=>{if(o.length>0&&o.length+r.imageUrls.length<7){i(!0),m(!1);const s=[];for(let a=0;a<o.length;a++)s.push(I(o[a]));Promise.all(s).then(a=>(c({...r,imageUrls:r.imageUrls.concat(a)}),m(!1),i(!1),N.success("Image uploaded successfully"))).catch(()=>{N.error("Image upload failed(2 mb max per image)"),i(!1)})}else N.error("you can only upload 6 images per provider"),i(!1)},I=async s=>new Promise((a,t)=>{const T=de(oe),A=new Date().getTime()+s.name,b=ce(T,A),D=ue(b,s);D.on("state_changed",y=>{const X=y.bytesTransferred/y.totalBytes*100;console.log(`Upload is ${X} % done`)},y=>{t(y)},()=>{me(D.snapshot.ref).then(y=>{a(y)})})}),d=s=>{const{id:a,value:t,type:T}=s.target;["addressLine1","street","pincode"].includes(a)?c(b=>({...b,address:{...b.address,[a]:t}})):c(T==="time"?b=>({...b,availability:{...b.availability,[a]:t}}):{...r,[a]:t})},_=async s=>{s.preventDefault();try{if(r.imageUrls.length<1)return N.error("You must upload at least one image");U(!0),p(!1);const t=await(await fetch("/server/provider/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,userRef:u._id})})).json();U(!1),t.success&&p(t.message),H(`/provider/${t._id}`)}catch(a){p(a.message),U(!1)}},O=s=>{s.preventDefault(),q.current.click()},W=s=>{const a=s.target.files[0];a&&(i(!0),I(a).then(t=>{c({...r,profilePicture:t}),i(!1),N.success("Profile image uploaded successfully")}).catch(()=>{N.error("Profile image upload failed"),i(!1)}))},G=[{value:"Diagnostic Evaluation",label:"Diagnostic Evaluation"},{value:"Speech Therapy",label:"Speech Therapy"},{value:"ABA Therapy",label:"ABA Therapy"},{value:"Occupational Therapy",label:"Occupational Therapy"},{value:"School-Based Service",label:"School-Based Service"},{value:"Dance Movement",label:"Dance Movement"},{value:"Art as Therapy",label:"Art as Therapy"},{value:"Counselling",label:"Counselling"}],Y=[{value:"Virtual",label:"Virtual"},{value:"In-Clinic",label:"In-Clinic"},{value:"In-Home",label:"In-Home"}],[P,$]=l.useState(),[Q,V]=l.useState([]);let z=E.getAllCountries();const[w,J]=l.useState(z[0]);let K=pe.getStatesOfCountry(w.isoCode);return l.useEffect(()=>{if(w&&P){const s=he.getCitiesOfState(w.isoCode,P);V(s)}},[w,P]),e.jsxs("div",{className:"md:p-10 p-2 w-full mx-auto flex-col items-center",children:[e.jsx("h1",{className:"text-base text-gray-700 font-semibold text-left my-7 mt-5",children:"Fill the form to create a provider"}),e.jsx("input",{type:"file",id:"profilePicture",name:"profilePicture",ref:q,hidden:!0,accept:"image/*",required:!0,onChange:W}),e.jsx("div",{className:"relative w-24 h-24 mx-auto group",children:e.jsxs("label",{htmlFor:"profilePicture",className:"w-24 h-24 cursor-pointer",onClick:O,children:[e.jsx("img",{src:r.profilePicture||"https://i.ibb.co/tKQH4zp/defaultprofile.jpg",alt:"profile",className:"w-24 h-24 rounded-full object-cover border-4 border-[lightgray]"}),e.jsxs("div",{className:"hidden rounded-full group-hover:flex flex-col items-center justify-center absolute inset-0 bg-gray-800 bg-opacity-60",children:[e.jsx("img",{src:"https://www.svgrepo.com/show/33565/upload.svg",alt:"camera",className:"w-8 h-8"}),e.jsx("p",{className:"text-white text-xs",children:"Choose Profile"})]})]})}),e.jsxs("form",{onSubmit:_,className:"flex flex-col sm:flex-row gap-4 mt-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 flex-1",children:[e.jsx(C,{id:"name",options:G,isMulti:!0,required:!0,placeholder:"What service do you provide?",touchUi:!1,className:"border-2 p-3 rounded-lg border-slate-500 focus:border-amber-700  hover:border-amber-500",onChange:s=>{c(a=>({...a,name:s.map(t=>t.value)}))},styles:{control:s=>({...s,backgroundColor:"transparent",minWidth:"160px",border:"none",outline:"none",boxShadow:"none",transition:"all 0.3s ease"})}}),e.jsx("input",{type:"text",placeholder:"Full Name*",className:"border-2 p-3 rounded-lg focus:border-amber-700 focus:outline-none focus:ring-0",id:"fullName",required:!0,onChange:d,value:r.fullName}),e.jsx("input",{type:"email",placeholder:"Email",className:"border-2 p-3 rounded-lg focus:border-amber-600 focus:ring-0",id:"email",required:!0,onChange:d,value:r.email}),e.jsx("input",{type:"text",placeholder:"Qualification(e.g.,Psychologist, Counselor)",className:"border-2 p-3 rounded-lg focus:border-amber-600 focus:ring-0",id:"qualification",required:!0,onChange:d,value:r.qualification}),e.jsx("input",{type:"text",placeholder:"Licensing (License number, issuing authority)",className:"border-2 p-3 rounded-lg focus:border-amber-700 focus:outline-none focus:ring-0",id:"license",required:!0,onChange:d,value:r.license}),e.jsx("input",{placeholder:"Address Line 1",className:"border-2 p-3 rounded-lg border-slate-500 focus:border-amber-700 focus:outline-none focus:ring-0",id:"addressLine1",required:!0,onChange:d,value:r.address.addressLine1}),e.jsx("input",{placeholder:"Street",className:"w-full border-2 p-3 rounded-lg border-slate-500 focus:border-amber-700 focus:outline-none focus:ring-0",id:"street",required:!0,onChange:d,value:r.address.street}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(C,{id:"country",options:E.getAllCountries().map(s=>({value:s.name,label:s.name})),className:"w-full rounded-lg border-2 border-slate-500",placeholder:"Select Country",onChange:s=>{const a=E.getAllCountries().find(t=>t.name===s.value);J(a),c({...r,address:{...r.address,country:s.label}})}}),e.jsx(C,{id:"state",options:K.map(s=>({value:s.isoCode,label:s.name})),placeholder:"Select State",className:"w-full rounded-lg border-2 border-slate-500",onChange:s=>{console.log("State select onChange triggered",s),$(s.value),c({...r,address:{...r.address,state:s.label}})}})]}),e.jsxs("div",{className:"flex flex-row gap-2",children:[e.jsx(C,{id:"city",options:Q.map(s=>({value:s.name,label:s.name})),className:"w-full border-2 rounded-lg border-slate-500",placeholder:"Select City",onChange:s=>{c({...r,address:{...r.address,city:s.label}})}}),e.jsx("input",{placeholder:"Pincode",className:"w-full border-2 p-1 border-slate-500 rounded-lg focus:border-amber-700 focus:outline-none focus:ring-0",id:"pincode",required:!0,onChange:d,value:r.address.pincode})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",id:"regularPrice",min:"50",max:"100000",required:!0,className:"border-2 p-3 rounded-lg focus:border-amber-700 focus:outline-none focus:ring-0",onChange:d,value:r.regularPrice}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("p",{children:"Regular Fees"}),e.jsx("span",{className:"text-xs",children:"( â‚¹ per Appointment )"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",id:"experience",min:"0",max:"100000",required:!0,className:"border-2 p-3 rounded-lg focus:border-amber-700 focus:outline-none focus:ring-0",onChange:d,value:r.experience}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("p",{children:"Year of Experience"}),e.jsx("span",{className:"text-xs",children:"( services )"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col flex-1 gap-4",children:[e.jsx(C,{id:"therapytype",options:Y,isMulti:!0,required:!0,placeholder:"Type of Therapy",touchUi:!1,className:"border-2 p-3 rounded-lg border-slate-500 bg-white focus:border-amber-700 hover:border-amber-500",onChange:s=>{c(a=>({...a,therapytype:s.map(t=>t.value)}))},styles:{control:s=>({...s,backgroundColor:"transparent",minWidth:"160px",border:"none",boxShadow:"none",transition:"all 0.3s ease"})}}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("input",{type:"number",placeholder:"Phone number",className:"border-2 p-3 rounded-lg focus:border-amber-700 focus:outline-none focus:ring-0",id:"phone",required:!0,onChange:d,value:r.phone}),e.jsx("p",{className:"font-semibold",children:"Availability:"}),e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsx("p",{children:"Morning:"}),e.jsx("input",{type:"time",id:"morningStart",className:"border-2 p-3 rounded-lg focus:border-amber-700 focus:outline-none focus:ring-0",required:!0,value:r.availability.morningStart,onChange:d}),e.jsx("input",{type:"time",id:"morningEnd",className:"border-2 p-3 rounded-lg focus:border-amber-700 focus:outline-none focus:ring-0",required:!0,value:r.availability.morningEnd,onChange:d})]}),e.jsxs("div",{className:"flex flex-row gap-4 pl-1",children:[e.jsx("p",{children:"Evening:"}),e.jsx("input",{type:"time",id:"eveningStart",className:"border-2 p-3 rounded-lg focus:border-amber-700 focus:outline-none focus:ring-0",required:!0,value:r.availability.eveningStart,onChange:d}),e.jsx("input",{type:"time",id:"eveningEnd",className:"border-2 p-3 rounded-lg focus:border-amber-700 focus:outline-none focus:ring-0",required:!0,value:r.availability.eveningEnd,onChange:d})]})]}),e.jsx("textarea",{type:"text",placeholder:"Biography",className:"border-2 p-3 rounded-lg focus:border-amber-700 focus:outline-none focus:ring-0",id:"description",required:!0,onChange:d,value:r.description}),e.jsxs("p",{className:"font-semibold",children:["Images:",e.jsx("span",{className:"font-normal text-gray-600 ml-2",children:"The first image will be the cover. pick image for showcase (max 6)"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{onChange:s=>f(s.target.files),className:"p-3 border border-gray-300 rounded w-full",type:"file",id:"images",accept:"image/*",multiple:!0}),e.jsx("button",{type:"button",disabled:x,onClick:M,className:"p-3 text-green-700 border border-green-700 rounded uppercase hover:shadow-lg disabled:opacity-85",children:x?"uploading...":"upload"})]}),e.jsx("p",{className:"text-red-700 text-xs",children:g&&g}),r.imageUrls.length>0&&r.imageUrls.map((s,a)=>e.jsxs("div",{className:"flex justify-between p-3 border items-center",children:[e.jsx("img",{src:s,alt:"image",className:"w-20 h-20 object-contain rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>B(a),className:"p-3 text-red-700 rounded-lg uppercase hover:opacity-75",children:"Delete"})]},a)),e.jsx("button",{disabled:j||x,className:"p-3 bg-slate-700 text-white rounded=lg uppercase hover:opacity-95 disabled:opacity-80",children:j?"Creating Provider":"Create Provider"}),n&&e.jsx("p",{className:"text-red-700 text-xs",children:n})]})]})]})}function gs(){const u=k(),[o,f]=l.useState("");return l.useEffect(()=>{const m=new URLSearchParams(u.search).get("tab");m&&f(m)},[u.search]),e.jsxs("div",{className:"min-h-screen flex flex-col md:flex-row ",children:[e.jsx("div",{className:"md:w-56",children:e.jsx(fe,{})}),e.jsx("div",{children:o==="dashboard"&&e.jsx(ge,{})}),o==="users"&&e.jsx(ie,{}),o==="createprovider"&&e.jsx(xe,{})]})}export{gs as default};
